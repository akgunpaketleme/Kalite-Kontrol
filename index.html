<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKG Kalite Kontrol ve Paketleme Takip Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
            justify-content: center;
        }
        .tab {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        .tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        .tab.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        .tab-content {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .tab-content.active {
            display: block;
        }
        .tab-content h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2em;
            text-align: center;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            border-radius: 10px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 1.1em;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }
        .btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            margin: 5px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }
        .btn-success {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .hata-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
        }
        .hata-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 12px;
            border-radius: 8px;
        }
        .hata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
        }
        .hata-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }
        .hata-item:hover {
            border-color: #3498db;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.1);
        }
        .hata-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
        }
        .hata-item label {
            flex-grow: 1;
            font-weight: 600;
            color: #2c3e50;
        }
        .hata-adet-container {
            display: flex;
            gap: 8px;
        }
        .hata-adet {
            width: 70px;
            padding: 8px;
            text-align: center;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-weight: bold;
        }
        .hata-adet:first-child {
            border-color: #e74c3c;
            color: #e74c3c;
        }
        .hata-adet:last-child {
            border-color: #f39c12;
            color: #f39c12;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
        }
        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .stat-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .alert {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 600;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .kayit-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .kayit-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        .kayit-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            color: #2c3e50;
        }
        .stok-kayit-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .stok-kayit-item:hover {
            border-color: #3498db;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.2);
        }
        .stok-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        .stok-header h4 {
            color: #2c3e50;
            font-size: 1.3em;
        }
        .stok-bilgi {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .stok-bilgi-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        .stok-kontrol {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 8px;
        }
        .stok-btn-small {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .stok-btn-small.minus {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .stok-btn-small:hover {
            transform: scale(1.1);
        }
        .stok-adet-display {
            background: white;
            padding: 8px 15px;
            border: 2px solid #3498db;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.2em;
            color: #2c3e50;
            min-width: 60px;
            text-align: center;
        }
        .stok-adet-input {
            width: 80px;
            padding: 8px;
            text-align: center;
            border: 2px solid #f39c12;
            border-radius: 6px;
            font-weight: bold;
        }
        .stok-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .btn-edit {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        .btn-delete {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        .btn-edit:hover,
        .btn-delete:hover {
            transform: translateY(-2px);
        }
        .kaydedilmis-stoklar {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border: 2px solid #e9ecef;
        }
        .kaydedilmis-stoklar h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 12px;
            border-radius: 8px;
        }
        .siparis-checkbox-container {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 2px solid #e9ecef;
        }
        .siparis-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        .checkbox-item:hover {
            background-color: #e9ecef;
        }
        .checkbox-item input[type="checkbox"] {
            transform: scale(1.1);
        }
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            .hata-grid {
                grid-template-columns: 1fr;
            }
            .tabs {
                flex-direction: column;
            }
            .tab {
                width: 100%;
                margin-bottom: 5px;
            }
            .stok-bilgi {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ­ AKG Kalite Kontrol ve Paketleme Takip Sistemi</h1>
        </div>
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('kalite-kontrol')">ğŸ” Kalite Kontrol</button>
            <button class="tab" onclick="showTab('siparis-hazirlik')">ğŸ“‹ SipariÅŸ HazÄ±rlÄ±ÄŸÄ±</button>
            <button class="tab" onclick="showTab('stok')">ğŸ“¦ Stok YÃ¶netimi</button>
            <button class="tab" onclick="showTab('gunluk-performans')">âš¡ GÃ¼nlÃ¼k Performans</button>
            <button class="tab" onclick="showTab('istatistikler')">ğŸ“ˆ Ä°statistikler</button>
            <button class="tab" onclick="showTab('veri-goruntule')">ğŸ“Š Veri GÃ¶rÃ¼ntÃ¼le</button>
            <button class="tab" onclick="showTab('raporlar')">ğŸ“‹ Raporlar</button>
            <button class="tab" onclick="showTab('ayarlar')">âš™ï¸ Ayarlar</button>
        </div>
        <!-- Kalite Kontrol Tab -->
        <div id="kalite-kontrol" class="tab-content active">
            <h2>ğŸ” Kalite Kontrol Formu</h2>
            <form id="kaliteForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="tarih">ğŸ“… Tarih/Saat</label>
                        <input type="datetime-local" id="tarih" required>
                    </div>
                    <div class="form-group">
                        <label for="operator">ğŸ‘¤ OperatÃ¶rÃ¼n AdÄ±</label>
                        <input type="text" id="operator" placeholder="OperatÃ¶r adÄ±nÄ± yazÄ±n" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKodu">ğŸ“¦ ÃœrÃ¼n Kodu</label>
                        <input type="text" id="urunKodu" placeholder="ÃœrÃ¼n kodunu girin" required>
                    </div>
                    <div class="form-group">
                        <label for="toplamAdet">ğŸ“Š Toplam Adet</label>
                        <input type="number" id="toplamAdet" min="1" placeholder="Toplam Ã¼rÃ¼n adedi" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisNo">ğŸ·ï¸ SipariÅŸ NumarasÄ±</label>
                        <input type="text" id="siparisNo" placeholder="SipariÅŸ numarasÄ±nÄ± girin" required>
                    </div>
                </div>
                <div class="hata-container">
                    <h3>ğŸš« Hata TÃ¼rleri ve Adetleri</h3>
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 15px; gap: 8px; font-size: 12px; color: #666; font-weight: bold;">
                        <span style="color: #e74c3c; width: 70px; text-align: center;">Ä°skarta</span>
                        <span style="color: #f39c12; width: 70px; text-align: center;">Geri Giden</span>
                    </div>
                    <div class="hata-grid">
                        <div class="hata-item">
                            <input type="checkbox" id="hata1" name="hatalar" value="AÄŸÄ±z yamukluÄŸu">
                            <label for="hata1">AÄŸÄ±z yamukluÄŸu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata2" name="hatalar" value="Yetersiz kaynak">
                            <label for="hata2">Yetersiz kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata3" name="hatalar" value="Fazla kaynak">
                            <label for="hata3">Fazla kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata4" name="hatalar" value="BakÄ±r erimesi">
                            <label for="hata4">BakÄ±r erimesi</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata5" name="hatalar" value="DÄ±ÅŸa kaynak akmasÄ±">
                            <label for="hata5">DÄ±ÅŸa kaynak akmasÄ±</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata6" name="hatalar" value="Vuruk">
                            <label for="hata6">Vuruk</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata7" name="hatalar" value="BoÄŸum uzunluÄŸu farklÄ±lÄ±ÄŸÄ±">
                            <label for="hata7">BoÄŸum uzunluÄŸu farklÄ±lÄ±ÄŸÄ±</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata8" name="hatalar" value="BoÄŸum yamukluÄŸu">
                            <label for="hata8">BoÄŸum yamukluÄŸu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata9" name="hatalar" value="Ã‡izik Ã¼rÃ¼n">
                            <label for="hata9">Ã‡izik Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata10" name="hatalar" value="TemizlenememiÅŸ Ã¼rÃ¼n">
                            <label for="hata10">TemizlenememiÅŸ Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata11" name="hatalar" value="Bilyeli Ã¼rÃ¼n">
                            <label for="hata11">Bilyeli Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hataDiger" name="hatalar" value="DiÄŸer">
                            <label for="hataDiger">DiÄŸer</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                    </div>
                    <div id="digerHataDetay" style="display: none; margin-top: 15px;">
                        <label for="digerHataAciklama" style="display: block; margin-bottom: 5px; font-weight: bold;">DiÄŸer Hata AÃ§Ä±klamasÄ±:</label>
                        <input type="text" id="digerHataAciklama" placeholder="Hata detayÄ±nÄ± yazÄ±n..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px;">
                    </div>
                </div>
                <button type="submit" class="btn">ğŸ’¾ Kalite Kontrol KaydÄ±nÄ± Kaydet</button>
            </form>
            <div id="kaliteAlert"></div>
            <!-- Kalite Kontrol KayÄ±tlarÄ± Tablosu -->
            <div id="kaliteKayitlari">
                <h3>ğŸ“‹ Kalite Kontrol KayÄ±tlarÄ±</h3>
                <div id="kaliteKayitlariListesi"></div>
            </div>
        </div>
        <!-- SipariÅŸ HazÄ±rlÄ±ÄŸÄ± Tab -->
        <div id="siparis-hazirlik" class="tab-content">
            <h2>ğŸ“‹ SipariÅŸ HazÄ±rlÄ±ÄŸÄ±</h2>
            <!-- SipariÅŸ Ekleme Formu -->
            <form id="siparisEkleForm">
                <h3>â• Yeni SipariÅŸ Ekle</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hazirlikTarih">ğŸ“… Tarih</label>
                        <input type="date" id="hazirlikTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikOperator">ğŸ‘¤ OperatÃ¶r</label>
                        <input type="text" id="hazirlikOperator" placeholder="OperatÃ¶r adÄ±nÄ± yazÄ±n" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikSiparisNo">ğŸ·ï¸ SipariÅŸ No</label>
                        <input type="text" id="hazirlikSiparisNo" placeholder="SipariÅŸ numarasÄ±" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKoduSiparis">ğŸ“¦ ÃœrÃ¼n Kodu</label>
                        <input type="text" id="urunKoduSiparis" placeholder="ÃœrÃ¼n kodu" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisAdet">ğŸ“Š SipariÅŸ Adedi</label>
                        <input type="number" id="siparisAdet" min="1" placeholder="Toplam adet" required>
                    </div>
                </div>
                <button type="submit" class="btn">â• SipariÅŸ Ekle</button>
            </form>
            <div id="siparisEkleAlert"></div>
            <!-- SipariÅŸler Listesi -->
            <div id="siparislerContainer">
                <h3>ğŸ“‹ Mevcut SipariÅŸler</h3>
                <div id="siparislerListesi"></div>
            </div>
        </div>
        <!-- Stok YÃ¶netimi Tab -->
        <div id="stok" class="tab-content">
            <h2>ğŸ“¦ Stok YÃ¶netimi</h2>
            <!-- Stok Ekleme Formu -->
            <form id="stokForm">
                <h3>â• Stok Ekle/GÃ¼ncelle</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="stokMalzemeTuru">ğŸ”§ Malzeme TÃ¼rÃ¼</label>
                        <select id="stokMalzemeTuru" required>
                            <option value="">Malzeme tÃ¼rÃ¼nÃ¼ seÃ§in</option>
                            <option value="izolasyon">Ä°zolasyon</option>
                            <option value="koli">Koli</option>
                            <option value="kutu">Kutu</option>
                            <option value="poset">PoÅŸet</option>
                            <option value="tapa">Tapa</option>
                            <option value="etiket">Etiket</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="stokUrunAdi">ğŸ“¦ ÃœrÃ¼n AdÄ±</label>
                        <input type="text" id="stokUrunAdi" placeholder="ÃœrÃ¼n adÄ±nÄ± yazÄ±n" required>
                    </div>
                    <div class="form-group">
                        <label for="stokOlculeri">ğŸ“ Ã–lÃ§Ã¼ler (Ä°steÄŸe BaÄŸlÄ±)</label>
                        <input type="text" id="stokOlculeri" placeholder="Ã–rn: 25x15x10 cm">
                    </div>
                    <div class="form-group">
                        <label for="stokMevcut">ğŸ“Š Mevcut Adet</label>
                        <input type="number" id="stokMevcut" min="0" placeholder="Mevcut adet" required>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" class="btn">ğŸ’¾ Stok Kaydet</button>
                    <button type="button" class="btn btn-success" onclick="temizleStokFormu()">ğŸ§¹ Formu Temizle</button>
                </div>
            </form>
            <div id="stokAlert"></div>
            <!-- Stok YÃ¶netim ButonlarÄ± -->
            <div style="text-align: center; margin: 25px 0;">
                <button class="btn btn-success" onclick="tumStoklariYukle()">ğŸ”„ StoklarÄ± Yenile</button>
                <button class="btn btn-danger" onclick="tumStoklariSifirla()">ğŸ—‘ï¸ TÃ¼m StoklarÄ± Sil</button>
            </div>
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti"></div>
            </div>
            <!-- Stoklar Listesi -->
            <div id="stokListesiContainer">
                <h3>ğŸ“‹ KayÄ±tlÄ± Stoklar</h3>
                <div id="stokListesi"></div>
            </div>
        </div>
        <!-- GÃ¼nlÃ¼k Performans Tab -->
        <div id="gunluk-performans" class="tab-content">
            <h2>âš¡ GÃ¼nlÃ¼k Performans Takibi</h2>
            <form id="performansForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="performansTarih">ğŸ“… Tarih</label>
                        <input type="date" id="performansTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="performansCalisan">ğŸ‘¤ Ã‡alÄ±ÅŸan AdÄ±</label>
                        <input type="text" id="performansCalisan" placeholder="Ã‡alÄ±ÅŸan adÄ±nÄ± yazÄ±n" required>
                    </div>
                </div>
                <div class="hata-container">
                    <h3>ğŸ­ Ä°ÅŸlem PerformanslarÄ±</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <h4>ğŸ“¦ Kutu HazÄ±rlÄ±ÄŸÄ±</h4>
                            <input type="text" id="kutuHazirlikUrun" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="kutuHazirlikAdet" placeholder="Adet" min="0">
                            <input type="number" id="kutuHazirlikSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>ğŸ“‹ Koli HazÄ±rlama</h4>
                            <input type="text" id="koliHazirlamaUrun" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="koliHazirlamaAdet" placeholder="Adet" min="0">
                            <input type="number" id="koliHazirlamaSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>ğŸ”§ Ä°zolasyon</h4>
                            <input type="text" id="izolasyonUrunPerf" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="izolasyonAdetPerf" placeholder="Adet" min="0">
                            <input type="number" id="izolasyonSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>ğŸ” Kalite Kontrol</h4>
                            <input type="text" id="kaliteKontrolUrun" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="kaliteKontrolAdet" placeholder="Adet" min="0">
                            <input type="number" id="kaliteKontrolSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>ğŸ›ï¸ PoÅŸetleme</h4>
                            <input type="text" id="posetlemeUrunPerf" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="posetlemeAdetPerf" placeholder="Adet" min="0">
                            <input type="number" id="posetlemeSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>ğŸ“¦ ÃœrÃ¼n Kutulama</h4>
                            <input type="text" id="urunKutulamaUrun" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="urunKutulamaAdet" placeholder="Adet" min="0">
                            <input type="number" id="urunKutulamaSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>ğŸ”© Ek ParÃ§a</h4>
                            <input type="text" id="ekParcaUrunPerf" placeholder="ÃœrÃ¼n adÄ±">
                            <input type="number" id="ekParcaAdetPerf" placeholder="Adet" min="0">
                            <input type="number" id="ekParcaSure" placeholder="SÃ¼re (dk)" min="0">
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn">ğŸ’¾ Performans KaydÄ±nÄ± Kaydet</button>
            </form>
            <div id="performansAlert"></div>
            <!-- Son Performans KayÄ±tlarÄ± -->
            <div id="performansKayitlariContainer">
                <h3>ğŸ“Š Son Performans KayÄ±tlarÄ±</h3>
                <div id="performansKayitlariListesi"></div>
            </div>
        </div>
        <!-- Ä°statistikler Tab -->
        <div id="istatistikler" class="tab-content">
            <h2>ğŸ“ˆ Ä°statistikler</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKaliteKayit">0</h3>
                    <p>Toplam Kalite Kontrol</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparisKayit">0</h3>
                    <p>Toplam SipariÅŸ</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformansKayit">0</h3>
                    <p>Toplam Performans</p>
                </div>
                <div class="stat-card">
                    <h3 id="tamamlananSiparis">0</h3>
                    <p>Tamamlanan SipariÅŸ</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamHataAdet">0</h3>
                    <p>Toplam HatalÄ± ÃœrÃ¼n</p>
                </div>
                <div class="stat-card">
                    <h3 id="basariOrani">0%</h3>
                    <p>BaÅŸarÄ± OranÄ±</p>
                </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">ğŸ“Š Hata Ä°statistikleri</h4>
                <div id="hataIstatistikleri"></div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">â±ï¸ Performans Ä°statistikleri</h4>
                <div id="performansIstatistikleri"></div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">ğŸ‘¥ Ã‡alÄ±ÅŸan BazlÄ± Ä°statistikler</h4>
                <div id="calisanIstatistikleri"></div>
            </div>
        </div>
        <!-- Veri GÃ¶rÃ¼ntÃ¼le Tab -->
        <div id="veri-goruntule" class="tab-content">
            <h2>ğŸ“Š Veri GÃ¶rÃ¼ntÃ¼le</h2>
            <div class="form-grid" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label for="veriTuru">ğŸ” Veri TÃ¼rÃ¼</label>
                    <select id="veriTuru" onchange="loadVeriTablosu()">
                        <option value="kalite">Kalite Kontrol Verileri</option>
                        <option value="siparis">SipariÅŸ HazÄ±rlÄ±k Verileri</option>
                        <option value="performans">Performans Verileri</option>
                        <option value="stok">Stok Verileri</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tarihFiltre">ğŸ“… Tarih Filtresi</label>
                    <select id="tarihFiltre" onchange="loadVeriTablosu()">
                        <option value="hepsi">TÃ¼m Tarihler</option>
                        <option value="bugun">BugÃ¼n</option>
                        <option value="bu-hafta">Bu Hafta</option>
                        <option value="bu-ay">Bu Ay</option>
                    </select>
                </div>
            </div>
            <div id="veriTablosuContainer"></div>
            <div style="margin-top: 20px; text-align: center;">
                <button class="btn" onclick="exportCurrentData()">ğŸ“¥ GÃ¶rÃ¼ntÃ¼lenen Verileri Excel'e Aktar</button>
            </div>
        </div>
        <!-- Raporlar Tab -->
        <div id="raporlar" class="tab-content">
            <h2>ğŸ“‹ Raporlar</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKayit">0</h3>
                    <p>Toplam Kalite Kontrol KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparis">0</h3>
                    <p>SipariÅŸ HazÄ±rlÄ±k KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformans">0</h3>
                    <p>Performans KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="stokSayisi">0</h3>
                    <p>Stok Kalemi</p>
                </div>
            </div>
            <div style="margin-top: 30px;">
                <button class="btn" onclick="exportToExcel('kalite')">ğŸ“¥ Kalite Verilerini Excel'e Aktar</button>
                <button class="btn btn-success" onclick="exportToExcel('performans')">ğŸ“¥ Performans Verilerini Excel'e Aktar</button>
                <button class="btn" onclick="exportToExcel('siparis')">ğŸ“¥ SipariÅŸ Verilerini Excel'e Aktar</button>
                <button class="btn btn-danger" onclick="exportToExcel('hepsi')">ğŸ“¥ TÃ¼m Verileri Excel'e Aktar</button>
            </div>
        </div>
        <!-- Ayarlar Tab -->
        <div id="ayarlar" class="tab-content">
            <h2>âš™ï¸ Sistem AyarlarÄ±</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>ğŸ’¾ Veri Yedekleme</label>
                    <button class="btn" onclick="exportAllData()">TÃ¼m Verileri Yedekle (JSON)</button>
                </div>
                <div class="form-group">
                    <label>ğŸ“¤ Veri Geri YÃ¼kleme</label>
                    <input type="file" id="importFile" accept=".json" onchange="importData()">
                </div>
                <div class="form-group">
                    <label>ğŸ—‘ï¸ Veri Temizleme</label>
                    <button class="btn btn-danger" onclick="clearAllData()">TÃ¼m Verileri Temizle</button>
                </div>
            </div>
        </div>
        <!-- Modal for Editing -->
        <div id="editModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
            <div style="background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto;">
                <span style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;" onclick="document.getElementById('editModal').style.display='none'">&times;</span>
                <h3>âœï¸ SipariÅŸ DÃ¼zenle</h3>
                <div id="editFormContainer"></div>
            </div>
        </div>
    </div>
    <script>
        // Global deÄŸiÅŸkenler
        let kaliteKayitlari = JSON.parse(localStorage.getItem('kaliteKayitlari') || '[]');
        let siparisHazirlikKayitlari = JSON.parse(localStorage.getItem('siparisHazirlikKayitlari') || '[]');
        let performansKayitlari = JSON.parse(localStorage.getItem('performansKayitlari') || '[]');
        let stokKayitlari = JSON.parse(localStorage.getItem('stokKayitlari') || '[]');
        
        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const nowString = now.toISOString().slice(0, 16);
            const today = now.toISOString().slice(0, 10);
            document.getElementById('tarih').value = nowString;
            document.getElementById('hazirlikTarih').value = today;
            document.getElementById('performansTarih').value = today;
            loadStats();
            loadStokListesi();
            loadKaliteKayitlari();
            loadSiparislerListesi();
            loadIstatistikler();
            loadVeriTablosu();
            tumStoklariOzetGoster();
            // Stok formu iÃ§in event listener
            document.getElementById('stokForm').addEventListener('submit', stokEkleGuncelle);
            // DiÄŸer hata checkbox'Ä± iÃ§in listener
            document.getElementById('hataDiger').addEventListener('change', function() {
                const digerDetay = document.getElementById('digerHataDetay');
                digerDetay.style.display = this.checked ? 'block' : 'none';
            });
        });

        // Kalite kontrol kaydÄ± silme fonksiyonu
        function kaliteKaydiSil(id) {
            if (confirm('Bu kalite kontrol kaydÄ±nÄ± silmek istediÄŸinizden emin misiniz?')) {
                kaliteKayitlari = kaliteKayitlari.filter(k => k.id !== id);
                localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
                loadKaliteKayitlari();
                loadStats();
                showAlert('kaliteAlert', 'Kalite kontrol kaydÄ± silindi!', 'success');
            }
        }

        // Kalite kayÄ±tlarÄ±nÄ± tablo formatÄ±nda yÃ¼kle
        function loadKaliteKayitlari() {
            const container = document.getElementById('kaliteKayitlariListesi');
            if (!container) return;
            if (kaliteKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">HenÃ¼z kalite kontrol kaydÄ± bulunmuyor.</p>';
                return;
            }
            // Hata tÃ¼rlerini topla (dinamik sÃ¼tunlar iÃ§in)
            const tumHataTurleri = new Set();
            kaliteKayitlari.forEach(kayit => {
                kayit.hatalar.forEach(hata => {
                    tumHataTurleri.add(hata.tur);
                });
            });
            let html = '<div style="overflow-x: auto; background: white; border-radius: 8px; border: 2px solid #e9ecef; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">';
            html += '<table style="width: 100%; border-collapse: collapse; font-size: 14px;">';
            // Tablo baÅŸlÄ±ÄŸÄ±
            html += `
                <thead style="background: linear-gradient(135deg, #3498db, #2980b9); color: white;">
                    <tr>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap;">ğŸ“… Tarih/Saat</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap;">ğŸ‘¤ OperatÃ¶r</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap;">ğŸ“¦ ÃœrÃ¼n Kodu</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap;">ğŸ“Š Toplam Adet</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap;">ğŸ·ï¸ SipariÅŸ No</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap; background: #e74c3c;">ğŸ—‘ï¸ Toplam Ä°skarta</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap; background: #f39c12;">â†©ï¸ Toplam Geri DÃ¶nen</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap; background: #e74c3c;">ğŸš« Ä°ÅŸlem</th>
            `;
            // Hata tÃ¼rÃ¼ sÃ¼tunlarÄ±
            Array.from(tumHataTurleri).forEach(hataTuru => {
                html += `<th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center; white-space: nowrap; background: #8e44ad; font-size: 12px;">ğŸš« ${hataTuru}</th>`;
            });
            html += '</tr></thead><tbody>';
            // Veri satÄ±rlarÄ± (en son kayÄ±t Ã¼stte)
            kaliteKayitlari.slice().reverse().forEach((kayit, index) => {
                const toplamIskarta = kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet, 0);
                const toplamGeriDonen = kayit.hatalar.reduce((total, hata) => total + hata.geriGidenAdet, 0);
                html += `<tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'}; border-bottom: 1px solid #dee2e6;">`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; white-space: nowrap; font-size: 12px;">${new Date(kayit.tarih).toLocaleString('tr-TR')}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; font-weight: 600;">${kayit.operator}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; font-weight: 600; color: #2c3e50;">${kayit.urunKodu}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; font-weight: bold; color: #27ae60;">${kayit.toplamAdet}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;">${kayit.siparisNo}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; font-weight: bold; color: ${toplamIskarta > 0 ? '#e74c3c' : '#27ae60'}; background: ${toplamIskarta > 0 ? '#fdf2f2' : '#f0f9f0'};">${toplamIskarta}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; font-weight: bold; color: ${toplamGeriDonen > 0 ? '#f39c12' : '#27ae60'}; background: ${toplamGeriDonen > 0 ? '#fef9e7' : '#f0f9f0'};">${toplamGeriDonen}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;"><button onclick="kaliteKaydiSil(${kayit.id})" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px;">ğŸ—‘ï¸ Sil</button></td>`;
                // Her hata tÃ¼rÃ¼ iÃ§in veri
                Array.from(tumHataTurleri).forEach(hataTuru => {
                    const hataVeri = kayit.hatalar.find(h => h.tur === hataTuru);
                    if (hataVeri) {
                        const toplamHata = hataVeri.iskartaAdet + hataVeri.geriGidenAdet;
                        html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; font-size: 11px; ${toplamHata > 0 ? 'background: #fff2f2; color: #721c24; font-weight: bold;' : 'color: #666;'}">
                            ${toplamHata > 0 ? `Ä°:${hataVeri.iskartaAdet} G:${hataVeri.geriGidenAdet}` : '-'}
                        </td>`;
                    } else {
                        html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center; color: #999;">-</td>`;
                    }
                });
                html += '</tr>';
            });
            html += '</tbody></table></div>';
            // Ã–zet bilgi
            const toplamKayit = kaliteKayitlari.length;
            const genelToplamIskarta = kaliteKayitlari.reduce((total, kayit) =>
                total + kayit.hatalar.reduce((hataTotal, hata) => hataTotal + hata.iskartaAdet, 0), 0);
            const genelToplamGeriDonen = kaliteKayitlari.reduce((total, kayit) =>
                total + kayit.hatalar.reduce((hataTotal, hata) => hataTotal + hata.geriGidenAdet, 0), 0);
            const genelToplamUretim = kaliteKayitlari.reduce((total, kayit) => total + kayit.toplamAdet, 0);
            html += `
                <div style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; color: white;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; text-align: center;">
                        <div><strong style="font-size: 1.2em;">${toplamKayit}</strong><br><small>Toplam KayÄ±t</small></div>
                        <div><strong style="font-size: 1.2em;">${genelToplamUretim}</strong><br><small>Toplam Ãœretim</small></div>
                        <div><strong style="font-size: 1.2em; color: #ffcccb;">${genelToplamIskarta}</strong><br><small>Toplam Ä°skarta</small></div>
                        <div><strong style="font-size: 1.2em; color: #ffe4b5;">${genelToplamGeriDonen}</strong><br><small>Toplam Geri DÃ¶nen</small></div>
                        <div><strong style="font-size: 1.2em; color: #90ee90;">${genelToplamUretim > 0 ? Math.round((1 - (genelToplamIskarta + genelToplamGeriDonen)/genelToplamUretim) * 100) : 0}%</strong><br><small>BaÅŸarÄ± OranÄ±</small></div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }
        
        // Stok ekleme/gÃ¼ncelleme fonksiyonu
        function stokEkleGuncelle(e) {
            if (e) e.preventDefault();
            const malzemeTuru = document.getElementById('stokMalzemeTuru').value;
            const urunAdi = document.getElementById('stokUrunAdi').value.trim();
            const olculeri = document.getElementById('stokOlculeri').value.trim();
            const mevcutAdet = parseInt(document.getElementById('stokMevcut').value) || 0;
            if (!malzemeTuru || !urunAdi) {
                showAlert('stokAlert', 'LÃ¼tfen malzeme tÃ¼rÃ¼ ve Ã¼rÃ¼n adÄ± giriniz!', 'error');
                return;
            }
            // AynÄ± Ã¼rÃ¼n var mÄ± kontrol et
            const existingIndex = stokKayitlari.findIndex(stok =>
                stok.malzemeTuru === malzemeTuru &&
                stok.urunAdi.toLowerCase() === urunAdi.toLowerCase() &&
                stok.olculeri === olculeri
            );
                 const yeniStok = {
                id: existingIndex !== -1 ? stokKayitlari[existingIndex].id : Date.now(),
                malzemeTuru: malzemeTuru,
                urunAdi: urunAdi,
                olculeri: olculeri,
                mevcutAdet: mevcutAdet,
                sonGuncelleme: new Date().toISOString()
            };
            if (existingIndex !== -1) {
                stokKayitlari[existingIndex] = yeniStok;
                showAlert('stokAlert', 'Stok baÅŸarÄ±yla gÃ¼ncellendi!', 'success');
            } else {
                stokKayitlari.push(yeniStok);
                showAlert('stokAlert', 'Stok baÅŸarÄ±yla eklendi!', 'success');
            }
            localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
            loadStokListesi();
            tumStoklariOzetGoster();
            temizleStokFormu();
        }
        
        // Stok formu temizle
        function temizleStokFormu() {
            document.getElementById('stokForm').reset();
        }
        
        // Stok listesi gÃ¶ster
        function loadStokListesi() {
            const container = document.getElementById('stokListesi');
            if (!container) return;
            if (stokKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">HenÃ¼z stok kaydÄ± bulunmuyor.</p>';
                return;
            }
            let html = '';
            stokKayitlari.forEach(stok => {
                html += `
                    <div class="stok-kayit-item">
                        <div class="stok-header">
                            <h4>ğŸ“¦ ${stok.urunAdi}</h4>
                            <span style="background: #3498db; color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; font-weight: bold;">
                                ${stok.malzemeTuru.toUpperCase()}
                            </span>
                        </div>
                        <div class="stok-bilgi">
                            <div class="stok-bilgi-item">
                                <span><strong>ğŸ“ Ã–lÃ§Ã¼ler:</strong></span>
                                <span>${stok.olculeri || 'BelirtilmemiÅŸ'}</span>
                            </div>
                            <div class="stok-bilgi-item">
                                <span><strong>ğŸ“Š Mevcut Adet:</strong></span>
                                <span style="font-weight: bold; color: ${stok.mevcutAdet > 0 ? '#27ae60' : '#e74c3c'};">
                                    ${stok.mevcutAdet}
                                </span>
                            </div>
                            <div class="stok-bilgi-item">
                                <span><strong>ğŸ•’ Son GÃ¼ncelleme:</strong></span>
                                <span>${new Date(stok.sonGuncelleme).toLocaleString('tr-TR')}</span>
                            </div>
                        </div>
                        <div class="stok-kontrol">
                            <button class="stok-btn-small minus" onclick="stokAzalt(${stok.id})">-</button>
                            <div class="stok-adet-display">${stok.mevcutAdet}</div>
                            <button class="stok-btn-small" onclick="stokArttir(${stok.id})">+</button>
                            <input type="number" class="stok-adet-input" id="adet-${stok.id}" placeholder="Adet" min="0">
                            <button class="btn" style="margin-left: 10px; padding: 5px 10px;" onclick="stokGuncelle(${stok.id})">GÃ¼ncelle</button>
                        </div>
                        <div class="stok-actions">
                            <button class="btn-edit" onclick="stokDuzenle(${stok.id})">âœï¸ DÃ¼zenle</button>
                            <button class="btn-delete" onclick="stokSil(${stok.id})">ğŸ—‘ï¸ Sil</button>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }
        
        // Stok miktarÄ± arttÄ±r
        function stokArttir(id) {
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok) {
                stok.mevcutAdet++;
                stok.sonGuncelleme = new Date().toISOString();
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
            }
        }
        
        // Stok miktarÄ± azalt
        function stokAzalt(id) {
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok && stok.mevcutAdet > 0) {
                stok.mevcutAdet--;
                stok.sonGuncelleme = new Date().toISOString();
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
            }
        }
        
        // Stok gÃ¼ncelle
        function stokGuncelle(id) {
            const input = document.getElementById(`adet-${id}`);
            const yeniAdet = parseInt(input.value);
            if (isNaN(yeniAdet) || yeniAdet < 0) {
                alert('LÃ¼tfen geÃ§erli bir adet giriniz!');
                return;
            }
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok) {
                stok.mevcutAdet = yeniAdet;
                stok.sonGuncelleme = new Date().toISOString();
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'Stok baÅŸarÄ±yla gÃ¼ncellendi!', 'success');
            }
        }
        
        // Stok dÃ¼zenle
        function stokDuzenle(id) {
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok) {
                document.getElementById('stokMalzemeTuru').value = stok.malzemeTuru;
                document.getElementById('stokUrunAdi').value = stok.urunAdi;
                document.getElementById('stokOlculeri').value = stok.olculeri;
                document.getElementById('stokMevcut').value = stok.mevcutAdet;
                // Form'un en Ã¼stÃ¼ne scroll
                document.getElementById('stokForm').scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        // Stok sil
        function stokSil(id) {
            if (confirm('Bu stok kaydÄ±nÄ± silmek istediÄŸinizden emin misiniz?')) {
                stokKayitlari = stokKayitlari.filter(s => s.id !== id);
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'Stok kaydÄ± silindi!', 'success');
            }
        }
        
        // TÃ¼m stoklarÄ± yÃ¼kle
        function tumStoklariYukle() {
            loadStokListesi();
            tumStoklariOzetGoster();
            showAlert('stokAlert', 'Stoklar yenilendi!', 'success');
        }
        
        // TÃ¼m stoklarÄ± sÄ±fÄ±rla
        function tumStoklariSifirla() {
            if (confirm('TÃ¼m stok kayÄ±tlarÄ±nÄ± silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz!')) {
                stokKayitlari = [];
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'TÃ¼m stok kayÄ±tlarÄ± silindi!', 'success');
            }
        }
        
        // TÃ¼m stoklarÄ±n Ã¶zetini gÃ¶ster (sadece stok yÃ¶netimi sayfasÄ±nda)
        function tumStoklariOzetGoster() {
            const container = document.getElementById('stokOzeti');
            if (!container) return;
            if (stokKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">HenÃ¼z stok kaydÄ± bulunmuyor.</p>';
                return;
            }
            // Malzeme tÃ¼rlerine gÃ¶re grupla
            const stokGruplari = {};
            stokKayitlari.forEach(stok => {
                if (!stokGruplari[stok.malzemeTuru]) {
                    stokGruplari[stok.malzemeTuru] = [];
                }
                stokGruplari[stok.malzemeTuru].push(stok);
            });
            let html = '';
            Object.keys(stokGruplari).forEach(tur => {
                const turStoklar = stokGruplari[tur];
                const toplamAdet = turStoklar.reduce((total, stok) => total + stok.mevcutAdet, 0);
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 2px solid #e9ecef;">
                        <h4 style="color: #2c3e50; margin-bottom: 10px; text-transform: uppercase; background: #3498db; color: white; padding: 8px; border-radius: 4px; text-align: center;">
                            ğŸ“¦ ${tur} (Toplam: ${toplamAdet} adet)
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                `;
                turStoklar.forEach(stok => {
                    html += `
                        <div style="display: flex; justify-content: space-between; padding: 8px; background: #f8f9fa; border-radius: 4px; border-left: 4px solid ${stok.mevcutAdet > 0 ? '#27ae60' : '#e74c3c'};">
                            <span style="font-weight: 600;">${stok.urunAdi}</span>
                            <span style="font-weight: bold; color: ${stok.mevcutAdet > 0 ? '#27ae60' : '#e74c3c'};">${stok.mevcutAdet}</span>
                        </div>
                    `;
                });
                html += '</div></div>';
            });
            container.innerHTML = html;
        }
        
        // Tab deÄŸiÅŸtirme
        function showTab(tabName) {
            // TÃ¼m tab content'leri gizle
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            // TÃ¼m tab butonlarÄ±nÄ±n active class'Ä±nÄ± kaldÄ±r
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            // SeÃ§ilen tab'i gÃ¶ster
            document.getElementById(tabName).classList.add('active');
            // TÄ±klanan tab butonuna active class ekle
            event.target.classList.add('active');
            // Stok Ã¶zetini yenile (sadece stok sayfasÄ±nda)
            if (tabName === 'stok') {
                tumStoklariOzetGoster();
            }
            // Tab deÄŸiÅŸtiÄŸinde ilgili verileri yÃ¼kle
            if (tabName === 'istatistikler') {
                loadIstatistikler();
            } else if (tabName === 'veri-goruntule') {
                loadVeriTablosu();
            } else if (tabName === 'raporlar') {
                loadStats();
            }
        }
        
        // Alert gÃ¶sterme fonksiyonu
        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (!container) return;
            const alertClass = type === 'success' ? 'alert-success' : 'alert-error';
            container.innerHTML = `<div class="alert ${alertClass}">${message}</div>`;
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }
        
        // Kalite kontrol form submit
        document.getElementById('kaliteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                tarih: document.getElementById('tarih').value,
                operator: document.getElementById('operator').value.trim(),
                urunKodu: document.getElementById('urunKodu').value.trim(),
                toplamAdet: parseInt(document.getElementById('toplamAdet').value),
                siparisNo: document.getElementById('siparisNo').value.trim(),
                hatalar: []
            };
            // SeÃ§ili hatalarÄ± topla
            const hataCheckboxes = document.querySelectorAll('input[name="hatalar"]:checked');
            hataCheckboxes.forEach(checkbox => {
                const hataItem = checkbox.closest('.hata-item');
                const hataAdetInputs = hataItem.querySelectorAll('.hata-adet');
                const iskartaAdet = parseInt(hataAdetInputs[0].value) || 0;
                const geriGidenAdet = parseInt(hataAdetInputs[1].value) || 0;
                if (iskartaAdet > 0 || geriGidenAdet > 0) {
                    let hataTuru = checkbox.value;
                    // DiÄŸer seÃ§enegi iÃ§in aÃ§Ä±klama ekle
                    if (hataTuru === 'DiÄŸer') {
                        const digerAciklama = document.getElementById('digerHataAciklama').value.trim();
                        if (digerAciklama) {
                            hataTuru = `DiÄŸer: ${digerAciklama}`;
                        }
                    }
                    formData.hatalar.push({
                        tur: hataTuru,
                        iskartaAdet: iskartaAdet,
                        geriGidenAdet: geriGidenAdet
                    });
                }
            });
            if (formData.hatalar.length === 0) {
                showAlert('kaliteAlert', 'LÃ¼tfen en az bir hata tÃ¼rÃ¼ seÃ§in ve adetlerini girin!', 'error');
                return;
            }
            // Kaydet
            kaliteKayitlari.push(formData);
            localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
            // Form temizle
            document.getElementById('kaliteForm').reset();
            const now = new Date().toISOString().slice(0, 16);
            document.getElementById('tarih').value = now;
            // DiÄŸer hata detay alanÄ±nÄ± gizle
            document.getElementById('digerHataDetay').style.display = 'none';
            // Veri listesini gÃ¼ncelle
            loadKaliteKayitlari();
            loadStats();
            showAlert('kaliteAlert', 'Kalite kontrol kaydÄ± baÅŸarÄ±yla kaydedildi!', 'success');
        });
        
        // SipariÅŸ ekleme form submit
        document.getElementById('siparisEkleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                tarih: document.getElementById('hazirlikTarih').value,
                operator: document.getElementById('hazirlikOperator').value.trim(),
                siparisNo: document.getElementById('hazirlikSiparisNo').value.trim(),
                urunKodu: document.getElementById('urunKoduSiparis').value.trim(),
                siparisAdet: parseInt(document.getElementById('siparisAdet').value),
                durum: 'hazirlanÄ±yor',
                olusturmaTarihi: new Date().toISOString(),
                checkboxDurum: {
                    koli: false,
                    kutu: false,
                    izolasyon: false,
                    etiket: false,
                    posetMevcut: false,
                    tapaMevcut: false
                }
            };
            siparisHazirlikKayitlari.push(formData);
            localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
            // Form temizle
            document.getElementById('siparisEkleForm').reset();
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('hazirlikTarih').value = today;
            loadSiparislerListesi();
            loadStats();
            showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla eklendi!', 'success');
        });
        
        // SipariÅŸleri listele
        function loadSiparislerListesi() {
            const container = document.getElementById('siparislerListesi');
            if (!container) return;
            if (siparisHazirlikKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">HenÃ¼z sipariÅŸ kaydÄ± bulunmuyor.</p>';
                return;
            }
            let html = '';
            siparisHazirlikKayitlari.slice().reverse().forEach(siparis => {
                const durumRenk = siparis.durum === 'tamamlandÄ±' ? '#27ae60' : siparis.durum === 'hazirlanÄ±yor' ? '#f39c12' : '#e74c3c';
                const durumIcon = siparis.durum === 'tamamlandÄ±' ? 'âœ…' : siparis.durum === 'hazirlanÄ±yor' ? 'ğŸ”„' : 'â¸ï¸';
                html += `
                    <div class="kayit-item">
                        <div class="kayit-header">
                            <div>
                                <strong>ğŸ·ï¸ ${siparis.siparisNo} - ğŸ“¦ ${siparis.urunKodu}</strong>
                                <span style="margin-left: 15px; background: ${durumRenk}; color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px;">
                                    ${durumIcon} ${siparis.durum.toUpperCase()}
                                </span>
                            </div>
                            <div>
                                <button class="btn-edit" onclick="siparisEdit(${siparis.id})">âœï¸</button>
                                <button class="btn-delete" onclick="siparisSil(${siparis.id})" style="margin-left: 5px;">ğŸ—‘ï¸</button>
                            </div>
                        </div>
                        <div class="kayit-details">
                            <div><strong>ğŸ“… Tarih:</strong> ${new Date(siparis.tarih).toLocaleDateString('tr-TR')}</div>
                            <div><strong>ğŸ‘¤ OperatÃ¶r:</strong> ${siparis.operator}</div>
                            <div><strong>ğŸ“Š Adet:</strong> ${siparis.siparisAdet}</div>
                            <div><strong>ğŸ•’ OluÅŸturulma:</strong> ${new Date(siparis.olusturmaTarihi).toLocaleString('tr-TR')}</div>
                        </div>
                        <!-- Checkbox'lar -->
                        <div class="siparis-checkbox-container">
                            <h4 style="margin-bottom: 10px; color: #2c3e50;">ğŸ“‹ Paketleme Kontrol Listesi:</h4>
                            <div class="siparis-checkboxes">
                                <label class="checkbox-item">
                                    <input type="checkbox" ${siparis.checkboxDurum?.koli ? 'checked' : ''} onchange="updateCheckbox(${siparis.id}, 'koli', this.checked)"> â˜ Koli
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" ${siparis.checkboxDurum?.kutu ? 'checked' : ''} onchange="updateCheckbox(${siparis.id}, 'kutu', this.checked)"> â˜ Kutu
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" ${siparis.checkboxDurum?.izolasyon ? 'checked' : ''} onchange="updateCheckbox(${siparis.id}, 'izolasyon', this.checked)"> â˜ Ä°zolasyon
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" ${siparis.checkboxDurum?.etiket ? 'checked' : ''} onchange="updateCheckbox(${siparis.id}, 'etiket', this.checked)"> â˜ Etiket
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" ${siparis.checkboxDurum?.posetMevcut ? 'checked' : ''} onchange="updateCheckbox(${siparis.id}, 'posetMevcut', this.checked)"> â˜ PoÅŸet Mevcut
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" ${siparis.checkboxDurum?.tapaMevcut ? 'checked' : ''} onchange="updateCheckbox(${siparis.id}, 'tapaMevcut', this.checked)"> â˜ Tapa Mevcut
                                </label>
                            </div>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // Checkbox durumu gÃ¼ncelle
        function updateCheckbox(siparisId, checkboxType, isChecked) {
            const siparis = siparisHazirlikKayitlari.find(s => s.id === siparisId);
            if (siparis) {
                if (!siparis.checkboxDurum) {
                    siparis.checkboxDurum = {};
                }
                siparis.checkboxDurum[checkboxType] = isChecked;
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
            }
        }
        
        // SipariÅŸ edit
        function siparisEdit(id) {
            const siparis = siparisHazirlikKayitlari.find(s => s.id === id);
            if (!siparis) return;
            const modal = document.getElementById('editModal');
            const container = document.getElementById('editFormContainer');
            container.innerHTML = `
                <form id="editSiparisForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸ“… Tarih</label>
                            <input type="date" id="editTarih" value="${siparis.tarih}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ‘¤ OperatÃ¶r</label>
                            <input type="text" id="editOperator" value="${siparis.operator}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ·ï¸ SipariÅŸ No</label>
                            <input type="text" id="editSiparisNo" value="${siparis.siparisNo}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“¦ ÃœrÃ¼n Kodu</label>
                            <input type="text" id="editUrunKodu" value="${siparis.urunKodu}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“Š SipariÅŸ Adedi</label>
                            <input type="number" id="editSiparisAdet" value="${siparis.siparisAdet}" min="1" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“‹ Durum</label>
                            <select id="editDurum" required>
                                <option value="hazirlanÄ±yor" ${siparis.durum === 'hazirlanÄ±yor' ? 'selected' : ''}>ğŸ”„ HazÄ±rlanÄ±yor</option>
                                <option value="tamamlandÄ±" ${siparis.durum === 'tamamlandÄ±' ? 'selected' : ''}>âœ… TamamlandÄ±</option>
                                <option value="beklemede" ${siparis.durum === 'beklemede' ? 'selected' : ''}>â¸ï¸ Beklemede</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-top: 20px; text-align: center;">
                        <button type="submit" class="btn">ğŸ’¾ GÃ¼ncelle</button>
                        <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">âŒ Ä°ptal</button>
                    </div>
                </form>
            `;
            modal.style.display = 'block';
            document.getElementById('editSiparisForm').addEventListener('submit', function(e) {
                e.preventDefault();
                siparis.tarih = document.getElementById('editTarih').value;
                siparis.operator = document.getElementById('editOperator').value.trim();
                siparis.siparisNo = document.getElementById('editSiparisNo').value.trim();
                siparis.urunKodu = document.getElementById('editUrunKodu').value.trim();
                siparis.siparisAdet = parseInt(document.getElementById('editSiparisAdet').value);
                siparis.durum = document.getElementById('editDurum').value;
                siparis.guncellemeTarihi = new Date().toISOString();
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                loadSiparislerListesi();
                loadStats();
                modal.style.display = 'none';
                showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla gÃ¼ncellendi!', 'success');
            });
        }
        
        // SipariÅŸ sil
        function siparisSil(id) {
            if (confirm('Bu sipariÅŸi silmek istediÄŸinizden emin misiniz?')) {
                siparisHazirlikKayitlari = siparisHazirlikKayitlari.filter(s => s.id !== id);
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                loadSiparislerListesi();
                loadStats();
                showAlert('siparisEkleAlert', 'SipariÅŸ silindi!', 'success');
            }
        }
        
        // Performans form submit
        document.getElementById('performansForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const performansData = {
                id: Date.now(),
                tarih: document.getElementById('performansTarih').value,
                calisan: document.getElementById('performansCalisan').value.trim(),
                islemler: []
            };
            // Ä°ÅŸlem verilerini topla
            const islemler = [
                { ad: 'Kutu HazÄ±rlÄ±ÄŸÄ±', urun: 'kutuHazirlikUrun', adet: 'kutuHazirlikAdet', sure: 'kutuHazirlikSure' },
                { ad: 'Koli HazÄ±rlama', urun: 'koliHazirlamaUrun', adet: 'koliHazirlamaAdet', sure: 'koliHazirlamaSure' },
                { ad: 'Ä°zolasyon', urun: 'izolasyonUrunPerf', adet: 'izolasyonAdetPerf', sure: 'izolasyonSure' },
                { ad: 'Kalite Kontrol', urun: 'kaliteKontrolUrun', adet: 'kaliteKontrolAdet', sure: 'kaliteKontrolSure' },
                { ad: 'PoÅŸetleme', urun: 'posetlemeUrunPerf', adet: 'posetlemeAdetPerf', sure: 'posetlemeSure' },
                { ad: 'ÃœrÃ¼n Kutulama', urun: 'urunKutulamaUrun', adet: 'urunKutulamaAdet', sure: 'urunKutulamaSure' },
                { ad: 'Ek ParÃ§a', urun: 'ekParcaUrunPerf', adet: 'ekParcaAdetPerf', sure: 'ekParcaSure' }
            ];
            islemler.forEach(islem => {
                const urun = document.getElementById(islem.urun).value.trim();
                const adet = parseInt(document.getElementById(islem.adet).value) || 0;
                const sure = parseInt(document.getElementById(islem.sure).value) || 0;
                if (urun && adet > 0 && sure > 0) {
                    performansData.islemler.push({
                        ad: islem.ad,
                        urun: urun,
                        adet: adet,
                        sure: sure,
                        hiz: Math.round((adet / sure) * 60 * 100) / 100 // adet/saat
                    });
                }
            });
            if (performansData.islemler.length === 0) {
                showAlert('performansAlert', 'LÃ¼tfen en az bir iÅŸlem performansÄ± girin!', 'error');
                return;
            }
            performansKayitlari.push(performansData);
            localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
            document.getElementById('performansForm').reset();
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('performansTarih').value = today;
            loadPerformansKayitlari();
            loadStats();
            showAlert('performansAlert', 'Performans kaydÄ± baÅŸarÄ±yla kaydedildi!', 'success');
        });
        
        // Performans kayÄ±tlarÄ±nÄ± listele
        function loadPerformansKayitlari() {
            const container = document.getElementById('performansKayitlariListesi');
            if (!container) return;
            if (performansKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">HenÃ¼z performans kaydÄ± bulunmuyor.</p>';
                return;
            }
            let html = '';
            performansKayitlari.slice().reverse().forEach(kayit => {
                const toplamIslem = kayit.islemler.length;
                const ortalamaSure = kayit.islemler.reduce((total, islem) => total + islem.sure, 0) / toplamIslem;
                const toplamAdet = kayit.islemler.reduce((total, islem) => total + islem.adet, 0);
                html += `
                    <div class="kayit-item">
                        <div class="kayit-header">
                            <div>
                                <strong>ğŸ‘¤ ${kayit.calisan} - ğŸ“… ${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</strong>
                                <span style="margin-left: 15px; background: #27ae60; color: white; padding: 3px 8px; border-radius: 12px; font-size: 12px;">
                                    ğŸ“Š ${toplamIslem} Ä°ÅŸlem
                                </span>
                            </div>
                        </div>
                        <div style="margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 6px;">
                            <strong>ğŸ“ˆ Ã–zet:</strong> Toplam ${toplamAdet} adet, ${Math.round(ortalamaSure)} dk ortalama sÃ¼re
                        </div>
                        <div class="kayit-details">
                `;
                kayit.islemler.forEach(islem => {
                    html += `
                        <div style="background: white; padding: 10px; border-radius: 6px; border: 2px solid #e9ecef;">
                            <strong>${islem.ad}</strong><br>
                            ğŸ¯ ${islem.urun}<br>
                            ğŸ“Š ${islem.adet} adet / â±ï¸ ${islem.sure} dk<br>
                            <span style="color: #27ae60; font-weight: bold;">ğŸš€ ${islem.hiz} adet/saat</span>
                        </div>
                    `;
                });
                html += '</div></div>';
            });
            container.innerHTML = html;
        }
        
        // Ä°statistikleri yÃ¼kle
        function loadIstatistikler() {
            // Hata istatistikleri
            const hataIstatContainer = document.getElementById('hataIstatistikleri');
            if (hataIstatContainer) {
                const hataIstatistikleri = {};
                kaliteKayitlari.forEach(kayit => {
                    kayit.hatalar.forEach(hata => {
                        if (!hataIstatistikleri[hata.tur]) {
                            hataIstatistikleri[hata.tur] = { iskarta: 0, geriGiden: 0, toplam: 0 };
                        }
                        hataIstatistikleri[hata.tur].iskarta += hata.iskartaAdet;
                        hataIstatistikleri[hata.tur].geriGiden += hata.geriGidenAdet;
                        hataIstatistikleri[hata.tur].toplam += (hata.iskartaAdet + hata.geriGidenAdet);
                    });
                });
                let hataHtml = '';
                Object.keys(hataIstatistikleri).sort((a, b) => hataIstatistikleri[b].toplam - hataIstatistikleri[a].toplam).forEach(hataTuru => {
                    const hata = hataIstatistikleri[hataTuru];
                    hataHtml += `
                        <div style="display: flex; justify-content: space-between; padding: 10px; margin-bottom: 8px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #e74c3c;">
                            <span style="font-weight: 600;">${hataTuru}</span>
                            <span>Ä°skarta: <strong>${hata.iskarta}</strong> | Geri DÃ¶nen: <strong>${hata.geriGiden}</strong> | <span style="color: #e74c3c; font-weight: bold;">Toplam: ${hata.toplam}</span></span>
                        </div>
                    `;
                });
                hataIstatContainer.innerHTML = hataHtml || '<p style="text-align: center; color: #666;">HenÃ¼z hata verisi yok.</p>';
            }
            // Performans istatistikleri
            const performansIstatContainer = document.getElementById('performansIstatistikleri');
            if (performansIstatContainer) {
                const performansIstatistikleri = {};
                performansKayitlari.forEach(kayit => {
                    kayit.islemler.forEach(islem => {
                        if (!performansIstatistikleri[islem.ad]) {
                            performansIstatistikleri[islem.ad] = { adet: 0, sure: 0, sayac: 0 };
                        }
                        performansIstatistikleri[islem.ad].adet += islem.adet;
                        performansIstatistikleri[islem.ad].sure += islem.sure;
                        performansIstatistikleri[islem.ad].sayac++;
                    });
                });
                let performansHtml = '';
                Object.keys(performansIstatistikleri).forEach(islemAdi => {
                    const islem = performansIstatistikleri[islemAdi];
                    const ortalamaSure = Math.round(islem.sure / islem.sayac);
                    const ortalamaHiz = Math.round((islem.adet / islem.sure) * 60 * 100) / 100;
                    performansHtml += `
                        <div style="display: flex; justify-content: space-between; padding: 10px; margin-bottom: 8px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #27ae60;">
                            <span style="font-weight: 600;">${islemAdi}</span>
                            <span>Toplam: <strong>${islem.adet} adet</strong> | Ortalama: <strong>${ortalamaSure} dk</strong> | <span style="color: #27ae60; font-weight: bold;">HÄ±z: ${ortalamaHiz} adet/saat</span></span>
                        </div>
                    `;
                });
                performansIstatContainer.innerHTML = performansHtml || '<p style="text-align: center; color: #666;">HenÃ¼z performans verisi yok.</p>';
            }
            // Ã‡alÄ±ÅŸan bazlÄ± istatistikler
            const calisanIstatContainer = document.getElementById('calisanIstatistikleri');
            if (calisanIstatContainer) {
                const calisanIstatistikleri = {};
                // Kalite kontrol verilerinden Ã§alÄ±ÅŸan istatistikleri
                kaliteKayitlari.forEach(kayit => {
                    if (!calisanIstatistikleri[kayit.operator]) {
                        calisanIstatistikleri[kayit.operator] = { kaliteKontrol: 0, performans: 0, toplamUretim: 0, toplamHata: 0 };
                    }
                    calisanIstatistikleri[kayit.operator].kaliteKontrol++;
                    calisanIstatistikleri[kayit.operator].toplamUretim += kayit.toplamAdet;
                    calisanIstatistikleri[kayit.operator].toplamHata += kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                });
                // Performans verilerinden Ã§alÄ±ÅŸan istatistikleri
                performansKayitlari.forEach(kayit => {
                    if (!calisanIstatistikleri[kayit.calisan]) {
                        calisanIstatistikleri[kayit.calisan] = { kaliteKontrol: 0, performans: 0, toplamUretim: 0, toplamHata: 0 };
                    }
                    calisanIstatistikleri[kayit.calisan].performans++;
                });
                let calisanHtml = '';
                Object.keys(calisanIstatistikleri).forEach(calisanAdi => {
                    const calisan = calisanIstatistikleri[calisanAdi];
                    const basariOrani = calisan.toplamUretim > 0 ? Math.round((1 - calisan.toplamHata / calisan.toplamUretim) * 100) : 0;
                    calisanHtml += `
                        <div style="padding: 15px; margin-bottom: 10px; background: white; border-radius: 8px; border: 2px solid #e9ecef;">
                            <h5 style="color: #2c3e50; margin-bottom: 10px;">ğŸ‘¤ ${calisanAdi}</h5>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; font-size: 14px;">
                                <div>Kalite Kontrol: <strong>${calisan.kaliteKontrol}</strong></div>
                                <div>Performans: <strong>${calisan.performans}</strong></div>
                                <div>Ãœretim: <strong>${calisan.toplamUretim}</strong></div>
                                <div>HatalÄ±: <strong style="color: #e74c3c;">${calisan.toplamHata}</strong></div>
                                <div>BaÅŸarÄ±: <strong style="color: #27ae60;">${basariOrani}%</strong></div>
                            </div>
                        </div>
                    `;
                });
                calisanIstatContainer.innerHTML = calisanHtml || '<p style="text-align: center; color: #666;">HenÃ¼z Ã§alÄ±ÅŸan verisi yok.</p>';
            }
        }
        
        // Veri tablosunu yÃ¼kle
        function loadVeriTablosu() {
            const veriTuru = document.getElementById('veriTuru').value;
            const tarihFiltre = document.getElementById('tarihFiltre').value;
            const container = document.getElementById('veriTablosuContainer');
            if (!container) return;
            let veri = [];
            let baslik = '';
            switch (veriTuru) {
                case 'kalite':
                    veri = kaliteKayitlari;
                    baslik = 'Kalite Kontrol Verileri';
                    break;
                case 'siparis':
                    veri = siparisHazirlikKayitlari;
                    baslik = 'SipariÅŸ HazÄ±rlÄ±k Verileri';
                    break;
                case 'performans':
                    veri = performansKayitlari;
                    baslik = 'Performans Verileri';
                    break;
                case 'stok':
                    veri = stokKayitlari;
                    baslik = 'Stok Verileri';
                    break;
            }
            // Tarih filtresi uygula
            if (tarihFiltre !== 'hepsi') {
                const bugÃ¼n = new Date();
                veri = veri.filter(kayit => {
                    const kayitTarihi = new Date(kayit.tarih || kayit.sonGuncelleme || kayit.olusturmaTarihi);
                    switch (tarihFiltre) {
                        case 'bugun':
                            return kayitTarihi.toDateString() === bugÃ¼n.toDateString();
                        case 'bu-hafta':
                            const haftaOnce = new Date(bugÃ¼n.getTime() - 7 * 24 * 60 * 60 * 1000);
                            return kayitTarihi >= haftaOnce;
                        case 'bu-ay':
                            return kayitTarihi.getMonth() === bugÃ¼n.getMonth() && kayitTarihi.getFullYear() === bugÃ¼n.getFullYear();
                        default:
                            return true;
                    }
                });
            }
            if (veri.length === 0) {
                container.innerHTML = `
                    <div style="background: white; padding: 25px; border-radius: 10px; text-align: center; color: #666;">
                        <h4>${baslik}</h4>
                        <p>SeÃ§ilen kriterlere uygun veri bulunamadÄ±.</p>
                    </div>
                `;
                return;
            }
            let html = `
                <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                    <h4 style="color: #2c3e50; margin-bottom: 20px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">
                        ${baslik} (${veri.length} kayÄ±t)
                    </h4>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
            `;
            // Tablo baÅŸlÄ±ÄŸÄ± ve iÃ§eriÄŸi veri tÃ¼rÃ¼ne gÃ¶re oluÅŸtur
            switch (veriTuru) {
                case 'kalite':
                    html += `
                        <thead style="background: #f8f9fa;">
                            <tr>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Tarih</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">OperatÃ¶r</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">ÃœrÃ¼n Kodu</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Toplam Adet</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">SipariÅŸ No</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Hata SayÄ±sÄ±</th>
                            </tr>
                        </thead>
                        <tbody>
                    `;
                    veri.forEach((kayit, index) => {
                        const toplamHata = kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                        html += `
                            <tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${new Date(kayit.tarih).toLocaleString('tr-TR')}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.operator}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.urunKodu}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.toplamAdet}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.siparisNo}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center; color: ${toplamHata > 0 ? '#e74c3c' : '#27ae60'}; font-weight: bold;">${toplamHata}</td>
                            </tr>
                        `;
                    });
                    break;
                case 'siparis':
                    html += `
                        <thead style="background: #f8f9fa;">
                            <tr>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Tarih</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">OperatÃ¶r</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">SipariÅŸ No</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">ÃœrÃ¼n Kodu</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Adet</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Durum</th>
                            </tr>
                        </thead>
                        <tbody>
                    `;
                    veri.forEach((kayit, index) => {
                        const durumRenk = kayit.durum === 'tamamlandÄ±' ? '#27ae60' : kayit.durum === 'hazirlanÄ±yor' ? '#f39c12' : '#e74c3c';
                        html += `
                            <tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.operator}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.siparisNo}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.urunKodu}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.siparisAdet}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center; color: ${durumRenk}; font-weight: bold;">${kayit.durum.toUpperCase()}</td>
                            </tr>
                        `;
                    });
                    break;
                case 'performans':
                    html += `
                        <thead style="background: #f8f9fa;">
                            <tr>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Tarih</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Ã‡alÄ±ÅŸan</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Ä°ÅŸlem SayÄ±sÄ±</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Toplam Adet</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Toplam SÃ¼re (dk)</th>
                            </tr>
                        </thead>
                        <tbody>
                    `;
                    veri.forEach((kayit, index) => {
                        const toplamAdet = kayit.islemler.reduce((total, islem) => total + islem.adet, 0);
                        const toplamSure = kayit.islemler.reduce((total, islem) => total + islem.sure, 0);
                        html += `
                            <tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.calisan}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.islemler.length}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${toplamAdet}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${toplamSure}</td>
                            </tr>
                        `;
                    });
                    break;
                case 'stok':
                    html += `
                        <thead style="background: #f8f9fa;">
                            <tr>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Malzeme TÃ¼rÃ¼</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">ÃœrÃ¼n AdÄ±</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Ã–lÃ§Ã¼ler</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Mevcut Adet</th>
                                <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center;">Son GÃ¼ncelleme</th>
                            </tr>
                        </thead>
                        <tbody>
                    `;
                    veri.forEach((kayit, index) => {
                        html += `
                            <tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.malzemeTuru}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.urunAdi}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${kayit.olculeri || '-'}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center; color: ${kayit.mevcutAdet > 0 ? '#27ae60' : '#e74c3c'}; font-weight: bold;">${kayit.mevcutAdet}</td>
                                <td style="padding: 10px; border: 1px solid #dee2e6; text-align: center;">${new Date(kayit.sonGuncelleme).toLocaleString('tr-TR')}</td>
                            </tr>
                        `;
                    });
                    break;
            }
            html += '</tbody></table></div></div>';
            container.innerHTML = html;
        }
        
        // Ä°statistikleri yÃ¼kle
        function loadStats() {
            document.getElementById('toplamKaliteKayit').textContent = kaliteKayitlari.length;
            document.getElementById('toplamSiparisKayit').textContent = siparisHazirlikKayitlari.length;
            document.getElementById('toplamPerformansKayit').textContent = performansKayitlari.length;
            const tamamlananSiparisCount = siparisHazirlikKayitlari.filter(s => s.durum === 'tamamlandÄ±').length;
            document.getElementById('tamamlananSiparis').textContent = tamamlananSiparisCount;
            const toplamHataAdet = kaliteKayitlari.reduce((total, kayit) => {
                return total + kayit.hatalar.reduce((hataTotal, hata) => hataTotal + hata.iskartaAdet + hata.geriGidenAdet, 0);
            }, 0);
            document.getElementById('toplamHataAdet').textContent = toplamHataAdet;
            const toplamUretim = kaliteKayitlari.reduce((total, kayit) => total + kayit.toplamAdet, 0);
            const basariOrani = toplamUretim > 0 ? Math.round((1 - toplamHataAdet / toplamUretim) * 100) : 0;
            document.getElementById('basariOrani').textContent = basariOrani + '%';
            // Raporlar sayfasÄ± iÃ§in
            if (document.getElementById('toplamKayit')) {
                document.getElementById('toplamKayit').textContent = kaliteKayitlari.length;
                document.getElementById('toplamSiparis').textContent = siparisHazirlikKayitlari.length;
                document.getElementById('toplamPerformans').textContent = performansKayitlari.length;
                document.getElementById('stokSayisi').textContent = stokKayitlari.length;
            }
        }
        
        // Excel'e veri aktarma
        function exportToExcel(tur) {
            let data = [];
            let filename = '';
            switch (tur) {
                case 'kalite':
                    data = kaliteKayitlari.map(kayit => ({
                        'Tarih': new Date(kayit.tarih).toLocaleString('tr-TR'),
                        'OperatÃ¶r': kayit.operator,
                        'ÃœrÃ¼n Kodu': kayit.urunKodu,
                        'Toplam Adet': kayit.toplamAdet,
                        'SipariÅŸ No': kayit.siparisNo,
                        'Hata SayÄ±sÄ±': kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0)
                    }));
                    filename = 'kalite_kontrol_verileri';
                    break;
                case 'performans':
                    data = performansKayitlari.map(kayit => ({
                        'Tarih': new Date(kayit.tarih).toLocaleDateString('tr-TR'),
                        'Ã‡alÄ±ÅŸan': kayit.calisan,
                        'Ä°ÅŸlem SayÄ±sÄ±': kayit.islemler.length,
                        'Toplam Adet': kayit.islemler.reduce((total, islem) => total + islem.adet, 0),
                        'Toplam SÃ¼re (dk)': kayit.islemler.reduce((total, islem) => total + islem.sure, 0)
                    }));
                    filename = 'performans_verileri';
                    break;
                case 'siparis':
                    data = siparisHazirlikKayitlari.map(kayit => ({
                        'Tarih': new Date(kayit.tarih).toLocaleDateString('tr-TR'),
                        'OperatÃ¶r': kayit.operator,
                        'SipariÅŸ No': kayit.siparisNo,
                        'ÃœrÃ¼n Kodu': kayit.urunKodu,
                        'Adet': kayit.siparisAdet,
                        'Durum': kayit.durum
                    }));
                    filename = 'siparis_verileri';
                    break;
                case 'hepsi':
                    // TÃ¼m veriler iÃ§in karmaÅŸÄ±k export
                    alert('TÃ¼m verilerin Excel\'e aktarÄ±lmasÄ± Ã¶zelliÄŸi geliÅŸtirilme aÅŸamasÄ±ndadÄ±r.');
                    return;
            }
            if (data.length === 0) {
                alert('AktarÄ±lacak veri bulunamadÄ±!');
                return;
            }
            // CSV formatÄ±nda veri hazÄ±rla
            const headers = Object.keys(data[0]);
            let csv = headers.join(',') + '\n';
            data.forEach(row => {
                const values = headers.map(header => {
                    const value = row[header];
                    // VirgÃ¼l iÃ§eren deÄŸerleri tÄ±rnak iÃ§ine al
                    return typeof value === 'string' && value.includes(',') ? `"${value}"` : value;
                });
                csv += values.join(',') + '\n';
            });
            // DosyayÄ± indir
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
                        link.setAttribute('download', `${filename}_${new Date().toISOString().slice(0, 10)}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // GÃ¶rÃ¼ntÃ¼lenen verileri Excel'e aktar
        function exportCurrentData() {
            const veriTuru = document.getElementById('veriTuru').value;
            exportToExcel(veriTuru);
        }
        
        // TÃ¼m verileri yedekle
        function exportAllData() {
            const allData = {
                kaliteKayitlari: kaliteKayitlari,
                siparisHazirlikKayitlari: siparisHazirlikKayitlari,
                performansKayitlari: performansKayitlari,
                stokKayitlari: stokKayitlari,
                yedeklemeTarihi: new Date().toISOString()
            };
            const dataStr = JSON.stringify(allData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `akg_sistem_yedek_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            alert('Veri yedeÄŸi baÅŸarÄ±yla indirildi!');
        }
        
        // Veri geri yÃ¼kleme
        function importData() {
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.kaliteKayitlari) kaliteKayitlari = data.kaliteKayitlari;
                    if (data.siparisHazirlikKayitlari) siparisHazirlikKayitlari = data.siparisHazirlikKayitlari;
                    if (data.performansKayitlari) performansKayitlari = data.performansKayitlari;
                    if (data.stokKayitlari) stokKayitlari = data.stokKayitlari;
                    // LocalStorage'a kaydet
                    localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
                    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                    localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
                    localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                    // TÃ¼m verileri yenile
                    loadStats();
                    loadStokListesi();
                    loadKaliteKayitlari();
                    loadSiparislerListesi();
                    loadPerformansKayitlari();
                    loadIstatistikler();
                    loadVeriTablosu();
                    tumStoklariOzetGoster();
                    alert('Veriler baÅŸarÄ±yla geri yÃ¼klendi!');
                    fileInput.value = '';
                } catch (error) {
                    alert('Dosya formatÄ± hatalÄ±! LÃ¼tfen geÃ§erli bir yedek dosyasÄ± seÃ§in.');
                }
            };
            reader.readAsText(file);
        }
        
        // TÃ¼m verileri temizle
        function clearAllData() {
            if (confirm('TÃ¼m verileri silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz!')) {
                if (confirm('Bu iÅŸlem tÃ¼m kalite kontrol, sipariÅŸ, performans ve stok verilerini silecektir. Devam etmek istediÄŸinizden emin misiniz?')) {
                    kaliteKayitlari = [];
                    siparisHazirlikKayitlari = [];
                    performansKayitlari = [];
                    stokKayitlari = [];
                    localStorage.removeItem('kaliteKayitlari');
                    localStorage.removeItem('siparisHazirlikKayitlari');
                    localStorage.removeItem('performansKayitlari');
                    localStorage.removeItem('stokKayitlari');
                    // TÃ¼m verileri yenile
                    loadStats();
                    loadStokListesi();
                    loadKaliteKayitlari();
                    loadSiparislerListesi();
                    loadPerformansKayitlari();
                    loadIstatistikler();
                    loadVeriTablosu();
                    tumStoklariOzetGoster();
                    alert('TÃ¼m veriler baÅŸarÄ±yla temizlendi!');
                }
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde Ã§alÄ±ÅŸtÄ±r
        window.addEventListener('load', function() {
            loadPerformansKayitlari();
            loadIstatistikler();
            tumStoklariOzetGoster();
        });
        
        // Modal kapatma (ESC tuÅŸu ile)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.getElementById('editModal').style.display = 'none';
            }
        });
        
        // Modal dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda kapatma
        document.getElementById('editModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
        
        // Responsive tablo iÃ§in yatay kaydÄ±rma uyarÄ±sÄ±
        function addScrollHint() {
            const tables = document.querySelectorAll('table');
            tables.forEach(table => {
                const container = table.parentElement;
                if (container && container.scrollWidth > container.clientWidth) {
                    if (!container.querySelector('.scroll-hint')) {
                        const hint = document.createElement('div');
                        hint.className = 'scroll-hint';
                        hint.innerHTML = 'ğŸ‘ˆğŸ‘‰ KaydÄ±rarak tÃ¼m sÃ¼tunlarÄ± gÃ¶rebilirsiniz';
                        hint.style.cssText = `
                            background: #fff3cd;
                            color: #856404;
                            padding: 8px 12px;
                            border-radius: 4px;
                            font-size: 12px;
                            text-align: center;
                            margin-bottom: 10px;
                            border: 1px solid #ffeaa7;
                        `;
                        container.insertBefore(hint, table);
                    }
                }
            });
        }
        
        // Tablo yÃ¼klendiÄŸinde kaydÄ±rma ipucu ekle
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList') {
                    setTimeout(addScrollHint, 100);
                }
            });
        });
        
        // Observer'Ä± baÅŸlat
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
        
        // Print fonksiyonu
        function printCurrentTab() {
            const activeTab = document.querySelector('.tab-content.active');
            const originalDisplay = [];
            // DiÄŸer tÃ¼m elementleri gizle
            document.querySelectorAll('body > *:not(.container)').forEach(el => {
                originalDisplay.push(el.style.display);
                el.style.display = 'none';
            });
            // Sadece aktif tab'i gÃ¶ster
            const printContent = activeTab.cloneNode(true);
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>AKG Sistem - Rapor</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                        th { background-color: #f2f2f2; }
                        .no-print { display: none; }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none !important; }
                        }
                    </style>
                </head>
                <body>
                    <h1>AKG Kalite Kontrol ve Paketleme Takip Sistemi</h1>
                    <p>Rapor Tarihi: ${new Date().toLocaleString('tr-TR')}</p>
                    ${printContent.innerHTML}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
            // Orijinal display deÄŸerlerini geri yÃ¼kle
            document.querySelectorAll('body > *:not(.container)').forEach((el, index) => {
                el.style.display = originalDisplay[index];
            });
        }
        
        // Klavye kÄ±sayollarÄ±
        document.addEventListener('keydown', function(e) {
            // Ctrl+P ile yazdÄ±rma
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                printCurrentTab();
            }
            // Ctrl+S ile veri yedekleme
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                exportAllData();
            }
            // Tab tuÅŸlarÄ± (1-8)
            if (e.altKey && e.key >= '1' && e.key <= '8') {
                e.preventDefault();
                const tabButtons = document.querySelectorAll('.tab');
                const tabIndex = parseInt(e.key) - 1;
                if (tabButtons[tabIndex]) {
                    tabButtons[tabIndex].click();
                }
            }
        });
        
        // Otomatik kaydetme (her 5 dakikada bir)
        setInterval(function() {
            const timestamp = new Date().toISOString();
            localStorage.setItem('lastAutoSave', timestamp);
            // Konsola kaydetme bilgisi
            console.log('Otomatik kaydetme yapÄ±ldÄ±:', timestamp);
        }, 5 * 60 * 1000); // 5 dakika
        
        // Sayfa kapanÄ±rken uyarÄ±
        window.addEventListener('beforeunload', function(e) {
            const hasUnsavedData = document.querySelector('form input:not([type="submit"]):not([type="button"])');
            if (hasUnsavedData && hasUnsavedData.value.trim() !== '') {
                e.preventDefault();
                e.returnValue = 'KaydedilmemiÅŸ deÄŸiÅŸiklikleriniz var. SayfayÄ± kapatmak istediÄŸinizden emin misiniz?';
            }
        });
        
        // Performans izleme
        function checkPerformance() {
            const totalRecords = kaliteKayitlari.length + siparisHazirlikKayitlari.length + performansKayitlari.length + stokKayitlari.length;
            if (totalRecords > 1000) {
                console.warn('Ã‡ok fazla kayÄ±t mevcut (' + totalRecords + '). Performans etkilenebilir.');
                // Eski kayÄ±tlarÄ± temizleme Ã¶nerisi
                if (totalRecords > 2000) {
                    const shouldCleanup = confirm(
                        'Sistemde Ã§ok fazla kayÄ±t bulunuyor (' + totalRecords + ' kayÄ±t). ' +
                        'Eski kayÄ±tlarÄ± temizlemek performansÄ± artÄ±rabilir. ' +
                        'Temizleme iÅŸlemi yapmak ister misiniz? ' +
                        '(Ã–nce veri yedeÄŸi almanÄ±z Ã¶nerilir)'
                    );
                    if (shouldCleanup) {
                        showTab('ayarlar');
                    }
                }
            }
        }
        
        // Performans kontrolÃ¼ (sayfa yÃ¼klendiÄŸinde)
        setTimeout(checkPerformance, 2000);
        
        // Veri doÄŸrulama fonksiyonlarÄ±
        function validateKaliteData(data) {
            const required = ['tarih', 'operator', 'urunKodu', 'toplamAdet', 'siparisNo'];
            return required.every(field => data[field] && data[field].toString().trim() !== '');
        }
        
        function validateSiparisData(data) {
            const required = ['tarih', 'operator', 'siparisNo', 'urunKodu', 'siparisAdet'];
            return required.every(field => data[field] && data[field].toString().trim() !== '');
        }
        
        function validatePerformansData(data) {
            const required = ['tarih', 'calisan'];
            return required.every(field => data[field] && data[field].toString().trim() !== '') && data.islemler && data.islemler.length > 0;
        }
        
        function validateStokData(data) {
            const required = ['malzemeTuru', 'urunAdi', 'mevcutAdet'];
            return required.every(field => data[field] !== undefined && data[field].toString().trim() !== '');
        }
        
        // Veri temizleme (boÅŸ veya geÃ§ersiz kayÄ±tlarÄ± sil)
        function cleanupData() {
            if (confirm('Bu iÅŸlem geÃ§ersiz veya eksik verileri temizleyecek. Devam etmek ister misiniz?')) {
                let cleaned = 0;
                // Kalite verilerini temizle
                const originalKaliteLength = kaliteKayitlari.length;
                kaliteKayitlari = kaliteKayitlari.filter(validateKaliteData);
                cleaned += originalKaliteLength - kaliteKayitlari.length;
                // SipariÅŸ verilerini temizle
                const originalSiparisLength = siparisHazirlikKayitlari.length;
                siparisHazirlikKayitlari = siparisHazirlikKayitlari.filter(validateSiparisData);
                cleaned += originalSiparisLength - siparisHazirlikKayitlari.length;
                // Performans verilerini temizle
                const originalPerformansLength = performansKayitlari.length;
                performansKayitlari = performansKayitlari.filter(validatePerformansData);
                cleaned += originalPerformansLength - performansKayitlari.length;
                // Stok verilerini temizle
                const originalStokLength = stokKayitlari.length;
                stokKayitlari = stokKayitlari.filter(validateStokData);
                cleaned += originalStokLength - stokKayitlari.length;
                // GÃ¼ncellenmiÅŸ verileri kaydet
                localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                // TÃ¼m verileri yenile
                loadStats();
                loadStokListesi();
                loadKaliteKayitlari();
                loadSiparislerListesi();
                loadPerformansKayitlari();
                loadIstatistikler();
                loadVeriTablosu();
                tumStoklariOzetGoster();
                alert(`Temizleme tamamlandÄ±! ${cleaned} geÃ§ersiz kayÄ±t silindi.`);
            }
        }
        
        // Arama fonksiyonu
        function searchData(searchTerm, dataType) {
            if (!searchTerm || searchTerm.length < 2) {
                return [];
            }
            searchTerm = searchTerm.toLowerCase();
            let results = [];
            switch (dataType) {
                case 'kalite':
                    results = kaliteKayitlari.filter(kayit =>
                        kayit.operator.toLowerCase().includes(searchTerm) ||
                        kayit.urunKodu.toLowerCase().includes(searchTerm) ||
                        kayit.siparisNo.toLowerCase().includes(searchTerm)
                    );
                    break;
                case 'siparis':
                    results = siparisHazirlikKayitlari.filter(kayit =>
                        kayit.operator.toLowerCase().includes(searchTerm) ||
                        kayit.urunKodu.toLowerCase().includes(searchTerm) ||
                        kayit.siparisNo.toLowerCase().includes(searchTerm)
                    );
                    break;
                case 'performans':
                    results = performansKayitlari.filter(kayit =>
                        kayit.calisan.toLowerCase().includes(searchTerm) ||
                        kayit.islemler.some(islem =>
                            islem.ad.toLowerCase().includes(searchTerm) ||
                            islem.urun.toLowerCase().includes(searchTerm)
                        )
                    );
                    break;
                case 'stok':
                    results = stokKayitlari.filter(kayit =>
                        kayit.malzemeTuru.toLowerCase().includes(searchTerm) ||
                        kayit.urunAdi.toLowerCase().includes(searchTerm)
                    );
                    break;
            }
            return results;
        }
        
        // Son iÅŸlemler ve optimizasyonlar
        console.log('AKG Kalite Kontrol ve Paketleme Takip Sistemi baÅŸarÄ±yla yÃ¼klendi!');
        console.log('Klavye kÄ±sayollarÄ±:');
        console.log('- Ctrl+P: YazdÄ±r');
        console.log('- Ctrl+S: Veri yedeÄŸi al');
        console.log('- Alt+1-8: Tab deÄŸiÅŸtir');
        console.log('- ESC: ModalÄ± kapat');
        
        // Sistem durumu kontrolÃ¼
        function checkSystemHealth() {
            const health = {
                kaliteKayitlari: kaliteKayitlari.length,
                siparisHazirlikKayitlari: siparisHazirlikKayitlari.length,
                performansKayitlari: performansKayitlari.length,
                stokKayitlari: stokKayitlari.length,
                toplamKayit: kaliteKayitlari.length + siparisHazirlikKayitlari.length + performansKayitlari.length + stokKayitlari.length,
                sonGuncelleme: new Date().toISOString()
            };
            console.log('Sistem Durumu:', health);
            return health;
        }
        
        // Sistem durumunu gÃ¶ster (geliÅŸtirici konsolunda)
        setTimeout(checkSystemHealth, 1000);
    </script>
</body>
</html>
                
