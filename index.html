<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKG Kalite Kontrol ve Paketleme Takip Sistemi</title>
    <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; }
    .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
    .header { background: linear-gradient(135deg, #2c3e50, #34495e); color: white; padding: 25px; border-radius: 15px; text-align: center; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); }
    .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
    .tabs { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 25px; justify-content: center; }
    .tab { background: linear-gradient(135deg, #3498db, #2980b9); color: white; border: none; padding: 15px 25px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3); }
    .tab:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4); }
    .tab.active { background: linear-gradient(135deg, #e74c3c, #c0392b); box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4); }
    .tab-content { display: none; background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .tab-content.active { display: block; }
    .tab-content h2 { color: #2c3e50; margin-bottom: 25px; font-size: 2em; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 15px; border-radius: 10px; }
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 25px; }
    .form-group { display: flex; flex-direction: column; }
    .form-group label { font-weight: 600; margin-bottom: 8px; color: #2c3e50; font-size: 1.1em; }
    .form-group input, .form-group select, .form-group textarea { padding: 12px; border: 2px solid #bdc3c7; border-radius: 8px; font-size: 16px; transition: all 0.3s ease; }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #3498db; box-shadow: 0 0 10px rgba(52, 152, 219, 0.3); }
    .btn { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; border: none; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3); margin: 5px; }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4); }
    .btn-success { background: linear-gradient(135deg, #f39c12, #e67e22); }
    .btn-danger { background: linear-gradient(135deg, #e74c3c, #c0392b); }
    .hata-container { background: #f8f9fa; padding: 25px; border-radius: 12px; margin-bottom: 25px; border: 2px solid #e9ecef; }
    .hata-container h3 { color: #2c3e50; margin-bottom: 20px; text-align: center; background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; padding: 12px; border-radius: 8px; }
    .hata-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 15px; }
    .hata-item { background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef; display: flex; align-items: center; justify-content: space-between; transition: all 0.3s ease; }
    .hata-item:hover { border-color: #3498db; box-shadow: 0 4px 12px rgba(52, 152, 219, 0.1); }
    .hata-item input[type="checkbox"] { margin-right: 12px; transform: scale(1.3); }
    .hata-item label { flex-grow: 1; font-weight: 600; color: #2c3e50; }
    .hata-adet-container { display: flex; gap: 8px; }
    .hata-adet { width: 70px; padding: 8px; text-align: center; border: 2px solid #e9ecef; border-radius: 6px; font-weight: bold; }
    .hata-adet:first-child { border-color: #e74c3c; color: #e74c3c; }
    .hata-adet:last-child { border-color: #f39c12; color: #f39c12; }
    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .stat-card { background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3); }
    .stat-card h3 { font-size: 2.5em; margin-bottom: 10px; }
    .stat-card p { font-size: 1.1em; opacity: 0.9; }
    .alert { padding: 15px; margin: 15px 0; border-radius: 8px; font-weight: 600; }
    .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .alert-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .kayit-item { background: white; border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; margin-bottom: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
    .kayit-header { background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px 15px; border-radius: 6px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; font-weight: 600; }
    .kayit-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; color: #2c3e50; }
    .stok-kayit-item { background: white; border: 2px solid #e9ecef; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; }
    .stok-kayit-item:hover { border-color: #3498db; box-shadow: 0 6px 20px rgba(52, 152, 219, 0.2); }
    .stok-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #ecf0f1; }
    .stok-header h4 { color: #2c3e50; font-size: 1.3em; }
    .stok-bilgi { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
    .stok-bilgi-item { display: flex; justify-content: space-between; padding: 10px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #3498db; }
    .stok-kontrol { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 15px; padding: 15px; background: #ecf0f1; border-radius: 8px; }
    .stok-btn-small { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; font-size: 18px; font-weight: bold; transition: all 0.3s ease; }
    .stok-btn-small.minus { background: linear-gradient(135deg, #e74c3c, #c0392b); }
    .stok-btn-small:hover { transform: scale(1.1); }
    .stok-adet-display { background: white; padding: 8px 15px; border: 2px solid #3498db; border-radius: 6px; font-weight: bold; font-size: 1.2em; color: #2c3e50; min-width: 60px; text-align: center; }
    .stok-adet-input { width: 80px; padding: 8px; text-align: center; border: 2px solid #f39c12; border-radius: 6px; font-weight: bold; }
    .stok-actions { display: flex; gap: 10px; justify-content: center; }
    .btn-edit { background: linear-gradient(135deg, #f39c12, #e67e22); color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 12px; transition: all 0.3s ease; }
    .btn-delete { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-size: 12px; transition: all 0.3s ease; }
    .btn-edit:hover, .btn-delete:hover { transform: translateY(-2px); }
    .kaydedilmis-stoklar { background: #f8f9fa; padding: 25px; border-radius: 12px; margin: 25px 0; border: 2px solid #e9ecef; }
    .kaydedilmis-stoklar h3 { color: #2c3e50; margin-bottom: 20px; text-align: center; background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; padding: 12px; border-radius: 8px; }
    .siparis-checkbox-container { background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid #e9ecef; }
    .siparis-checkboxes { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-top: 10px; }
    .checkbox-item { display: flex; align-items: center; gap: 5px; font-size: 14px; font-weight: 500; cursor: pointer; padding: 5px; border-radius: 4px; transition: background-color 0.2s ease; }
    .checkbox-item:hover { background-color: #e9ecef; }
    .checkbox-item input[type="checkbox"] { transform: scale(1.1); }
    
    /* Yeni stiller - Güncel İşler için */
    .gorev-item { background: white; border: 2px solid #e9ecef; border-radius: 10px; padding: 15px; margin-bottom: 10px; cursor: move; transition: all 0.3s ease; }
    .gorev-item:hover { box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-color: #3498db; }
    .gorev-item.tamamlandi { opacity: 0.6; background: #f0f9f0; }
    .gorev-item.tamamlandi .gorev-baslik { text-decoration: line-through; }
    .gorev-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .gorev-baslik { font-weight: 600; font-size: 1.1em; color: #2c3e50; }
    .aciliyet-badge { padding: 4px 12px; border-radius: 15px; font-size: 12px; font-weight: bold; color: white; }
    .aciliyet-badge.acil { background: #e74c3c; }
    .aciliyet-badge.normal { background: #3498db; }
    .aciliyet-badge.dusuk { background: #95a5a6; }
    .gorev-notlar { background: #f8f9fa; padding: 10px; border-radius: 6px; margin-top: 10px; font-size: 14px; color: #666; }
    .gorev-not-item { background: white; padding: 8px; margin: 5px 0; border-radius: 4px; border-left: 3px solid #3498db; }
    .gorev-not-item strong { color: #2c3e50; }
    
    /* Sipariş durumu badge'leri */
    .durum-badge { padding: 5px 12px; border-radius: 15px; font-size: 13px; font-weight: bold; color: white; display: inline-block; }
    .durum-badge.bekleniyor { background: #f39c12; }
    .durum-badge.geldi { background: #27ae60; }
    .durum-badge.iptal { background: #95a5a6; }
    .durum-badge.gonderildi { background: #16a085; }
    .durum-badge.gidecek { background: #3498db; }
    .durum-badge.gerigeldi { background: #9b59b6; }
    
    /* TEMİZLEME YÖNETİMİ YENİ STİLLER */
    .temizleme-form-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #e9ecef; }
    .temizleme-form-section h3 { color: #2c3e50; margin-bottom: 15px; padding: 10px; background: linear-gradient(135deg, #16a085, #1abc9c); color: white; border-radius: 6px; text-align: center; }
    .alt-form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
    .alt-form-group { display: flex; flex-direction: column; }
    .alt-form-group label { font-weight: 600; margin-bottom: 5px; color: #2c3e50; font-size: 0.95em; }
    .alt-form-group input { padding: 10px; border: 2px solid #bdc3c7; border-radius: 6px; font-size: 14px; }
    .input-highlight-a { border-color: #e74c3c !important; background: #ffe5e5; }
    .input-highlight-b { border-color: #f39c12 !important; background: #fff4e5; }
    .hesaplama-card { background: white; padding: 15px; border-radius: 8px; border: 2px solid #3498db; margin-top: 15px; }
    .hesaplama-card h4 { color: #2c3e50; margin-bottom: 10px; text-align: center; font-size: 1.1em; }
    
    @media (max-width: 768px) {
    .form-grid { grid-template-columns: 1fr; }
    .hata-grid { grid-template-columns: 1fr; }
    .tabs { flex-direction: column; }
    .tab { width: 100%; margin-bottom: 5px; }
    .stok-bilgi { grid-template-columns: 1fr; }
    .stats-grid { grid-template-columns: 1fr; }
    }
    </style>
</head>
<body>
    <div class="container">
    <div class="header">
    <h1>🏭 AKG Kalite Kontrol ve Paketleme Takip Sistemi</h1>
    </div>

    <!-- Tabs -->
    <div class="tabs">
    <button class="tab active" onclick="showTab('kalite-kontrol')">🔍 Kalite Kontrol</button>
    <button class="tab" onclick="showTab('guncel-isler')">📋 Güncel İşler</button>
    <button class="tab" onclick="showTab('siparis-hazirlik')">📋 Sipariş Hazırlığı</button>
    <button class="tab" onclick="showTab('siparisler')">🛒 Siparişler</button>
    <button class="tab" onclick="showTab('gunluk-performans')">⚡ Günlük Performans</button>
    <button class="tab" onclick="showTab('stok')">📦 Stok Yönetimi</button>
    <button class="tab" onclick="showTab('temizleme-yonetimi')">🧽 Temizleme Yönetimi</button>
    <button class="tab" onclick="showTab('sevkiyat-yonetimi')">🚚 Sevkiyat Yönetimi</button>
    <button class="tab" onclick="showTab('yari-mamul')">🔧 Yarı Mamül Stok</button>
    <button class="tab" onclick="showTab('istatistikler')">📈 İstatistikler</button>
    <button class="tab" onclick="showTab('veri-goruntule')">📊 Veri Görüntüle</button>
    <button class="tab" onclick="showTab('raporlar')">📋 Raporlar</button>
    <button class="tab" onclick="showTab('ayarlar')">⚙️ Ayarlar</button>
    </div>

    <!-- Kalite Kontrol Tab -->
    <div id="kalite-kontrol" class="tab-content active">
    <h2>🔍 Kalite Kontrol Formu</h2>
    <form id="kaliteForm">
    <div class="form-grid">
    <div class="form-group">
    <label for="tarih">📅 Tarih/Saat</label>
    <input type="datetime-local" id="tarih" required>
    </div>
    <div class="form-group">
    <label for="operator">👤 Operatörün Adı</label>
    <select id="operator" required>
    <option value="">Operatör seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label for="urunKodu">📦 Ürün Kodu</label>
    <input type="text" id="urunKodu" placeholder="Ürün kodunu girin" required>
    </div>
    <div class="form-group">
    <label for="toplamAdet">📊 Toplam Adet</label>
    <input type="number" id="toplamAdet" min="1" placeholder="Toplam ürün adedi" required>
    </div>
    <div class="form-group">
    <label for="siparisNo">🔢 Sipariş Numarası</label>
    <input type="text" id="siparisNo" placeholder="Sipariş numarasını girin" required>
    </div>
    </div>

    <div class="hata-container">
    <h3>🚫 Hata Türleri ve Adetleri</h3>
    <div style="display: flex; justify-content: flex-end; margin-bottom: 15px; gap: 8px; font-size: 12px; color: #666; font-weight: bold;">
    <span style="color: #e74c3c; width: 70px; text-align: center;">İskarta</span>
    <span style="color: #f39c12; width: 70px; text-align: center;">Geri Giden</span>
    </div>
    <div class="hata-grid">
    <div class="hata-item">
    <input type="checkbox" id="hata1" name="hatalar" value="Ağız yamukluğu">
    <label for="hata1">Ağız yamukluğu</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata2" name="hatalar" value="Yetersiz kaynak">
    <label for="hata2">Yetersiz kaynak</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata3" name="hatalar" value="Fazla kaynak">
    <label for="hata3">Fazla kaynak</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata4" name="hatalar" value="Bakır erimesi">
    <label for="hata4">Bakır erimesi</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata5" name="hatalar" value="Dışa kaynak akması">
    <label for="hata5">Dışa kaynak akması</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata6" name="hatalar" value="Vuruk">
    <label for="hata6">Vuruk</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata7" name="hatalar" value="Boğum uzunluğu farklılığı">
    <label for="hata7">Boğum uzunluğu farklılığı</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata8" name="hatalar" value="Boğum yamukluğu">
    <label for="hata8">Boğum yamukluğu</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata9" name="hatalar" value="Çizik ürün">
    <label for="hata9">Çizik ürün</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata10" name="hatalar" value="Temizlenememiş ürün">
    <label for="hata10">Temizlenememiş ürün</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hata11" name="hatalar" value="Bilyeli ürün">
    <label for="hata11">Bilyeli ürün</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    <div class="hata-item">
    <input type="checkbox" id="hataDiger" name="hatalar" value="Diğer">
    <label for="hataDiger">Diğer</label>
    <div class="hata-adet-container">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    <input type="number" class="hata-adet" placeholder="0" min="0">
    </div>
    </div>
    </div>
    <div id="digerHataDetay" style="display: none; margin-top: 15px;">
    <label for="digerHataAciklama" style="display: block; margin-bottom: 5px; font-weight: bold;">Diğer Hata Açıklaması:</label>
    <input type="text" id="digerHataAciklama" placeholder="Hata detayını yazın..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px;">
    </div>
    </div>

    <button type="submit" class="btn">💾 Kalite Kontrol Kaydını Kaydet</button>
    </form>
    <div id="kaliteAlert"></div>

    <!-- Kalite Kontrol Kayıtları Tablosu -->
    <div id="kaliteKayitlari">
    <h3>📋 Kalite Kontrol Kayıtları</h3>
    <div id="kaliteKayitlariListesi"></div>
    </div>
    </div>

    <!-- Güncel İşler Tab -->
    <div id="guncel-isler" class="tab-content">
    <h2>📋 Güncel İşler - Yapılacaklar Listesi</h2>
    
    <!-- Görev Ekleme Formu -->
    <form id="gorevEkleForm">
    <h3>➕ Yeni Görev Ekle</h3>
    <div class="form-grid">
    <div class="form-group">
    <label for="gorevBaslik">📝 Görev Başlığı</label>
    <input type="text" id="gorevBaslik" placeholder="Görev başlığını girin" required>
    </div>
    <div class="form-group">
    <label for="gorevAciliyet">⚠️ Aciliyet</label>
    <select id="gorevAciliyet" required>
    <option value="acil">🔴 Acil</option>
    <option value="normal" selected>🔵 Normal</option>
    <option value="dusuk">⚪ Düşük</option>
    </select>
    </div>
    <div class="form-group">
    <label for="gorevAtanan">👤 Atanan Kişi</label>
    <select id="gorevAtanan">
    <option value="">Herkes</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label for="gorevAciklama">📄 Açıklama</label>
    <textarea id="gorevAciklama" rows="3" placeholder="Görev detayları..."></textarea>
    </div>
    </div>
    <button type="submit" class="btn">➕ Görev Ekle</button>
    </form>
    <div id="gorevAlert"></div>

    <!-- Sıralama ve Filtreleme -->
    <div style="margin: 20px 0; display: flex; gap: 10px; flex-wrap: wrap;">
    <button class="btn btn-success" onclick="siralaGorevler('aciliyet')">⚠️ Aciliyete Göre Sırala</button>
    <button class="btn" onclick="siralaGorevler('tarih')">📅 Tarihe Göre Sırala</button>
    <button class="btn btn-danger" onclick="tamamlananGizle()">👁️ Tamamlananları Gizle/Göster</button>
    </div>

    <!-- Görevler Listesi -->
    <div id="gorevlerListesi"></div>
    </div>

    <!-- Siparişler Tab (Yeni) -->
    <div id="siparisler" class="tab-content">
    <h2>🛒 Siparişler - Ürün İhtiyaçları</h2>
    
    <!-- Sipariş Ekleme Formu -->
    <form id="urunSiparisForm">
    <h3>➕ Yeni Ürün Siparişi</h3>
    <div class="form-grid">
    <div class="form-group">
    <label for="siparisUrunAdi">📦 Ürün Adı</label>
    <input type="text" id="siparisUrunAdi" placeholder="Ürün adı" required>
    </div>
    <div class="form-group">
    <label for="siparisAdetMiktar">📊 Adet / Miktar</label>
    <input type="text" id="siparisAdetMiktar" placeholder="Örn: 100 adet" required>
    </div>
    <div class="form-group">
    <label for="siparisOlcu">📏 Ölçü</label>
    <input type="text" id="siparisOlcu" placeholder="Örn: 25x15 cm">
    </div>
    <div class="form-group">
    <label for="siparisAciklama">📝 Açıklama / Not</label>
    <textarea id="siparisAciklama" rows="3" placeholder="Sipariş detayları, özel notlar..."></textarea>
    </div>
    <div class="form-group">
    <label for="siparisTalipEden">👤 Talep Eden</label>
    <select id="siparisTalipEden" required>
    <option value="">Kişi seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    </div>
    <button type="submit" class="btn">➕ Sipariş Ekle</button>
    </form>
    <div id="siparisAlert"></div>

    <!-- Filtre -->
    <div style="margin: 20px 0;">
    <label style="font-weight: 600; margin-right: 10px;">Filtre:</label>
    <button class="btn" onclick="filtreSiparisler('hepsi')">Tümü</button>
    <button class="btn btn-success" onclick="filtreSiparisler('bekleniyor')">Bekleniyor</button>
    <button class="btn btn-success" onclick="filtreSiparisler('geldi')">Geldi</button>
    <button class="btn-danger btn" onclick="filtreSiparisler('iptal')">İptal</button>
    </div>

    <!-- Siparişler Listesi -->
    <div id="urunSiparislerListesi"></div>
    </div>

    <!-- Sipariş Hazırlığı Tab (Not alanı eklendi) -->
    <div id="siparis-hazirlik" class="tab-content">
    <h2>📋 Sipariş Hazırlığı</h2>
    
    <!-- Sipariş Ekleme Formu -->
    <form id="siparisEkleForm">
    <h3>➕ Yeni Sipariş Ekle</h3>
    <div class="form-grid">
    <div class="form-group">
    <label for="hazirlikTarih">📅 Tarih</label>
    <input type="date" id="hazirlikTarih" required>
    </div>
    <div class="form-group">
    <label for="hazirlikOperator">👤 Operatör</label>
    <select id="hazirlikOperator" required>
    <option value="">Operatör seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label for="hazirlikSiparisNo">🔢 Sipariş No</label>
    <input type="text" id="hazirlikSiparisNo" placeholder="Sipariş numarası" required>
    </div>
    <div class="form-group">
    <label for="urunKoduSiparis">📦 Ürün Kodu</label>
    <input type="text" id="urunKoduSiparis" placeholder="Ürün kodu" required>
    </div>
    <div class="form-group">
    <label for="siparisAdet">📊 Sipariş Adedi</label>
    <input type="number" id="siparisAdet" min="1" placeholder="Toplam adet" required>
    </div>
    <div class="form-group">
    <label for="siparisNotlar">📝 Notlar (Yeni)</label>
    <textarea id="siparisNotlar" rows="3" placeholder="Örn: İlk önce B ürünleri hazırlanacak..."></textarea>
    </div>
    </div>
    <button type="submit" class="btn">➕ Sipariş Ekle</button>
    </form>
    <div id="siparisEkleAlert"></div>

    <!-- Siparişler Listesi -->
    <div id="siparislerContainer">
    <h3>📋 Mevcut Siparişler</h3>
    <div id="siparislerListesi"></div>
    </div>
    </div>

    <!-- Stok Yönetimi Tab (Eksi stok ve kullanılan adet eklendi) -->
    <div id="stok" class="tab-content">
    <h2>📦 Stok Yönetimi</h2>
    
    <!-- Stok Ekleme Formu -->
    <form id="stokForm">
    <h3>➕ Stok Ekle/Güncelle</h3>
    <div class="form-grid">
    <div class="form-group">
    <label for="stokMalzemeTuru">🔧 Malzeme Türü</label>
    <select id="stokMalzemeTuru" required>
    <option value="">Malzeme türünü seçin</option>
    <option value="izolasyon">İzolasyon</option>
    <option value="koli">Koli</option>
    <option value="kutu">Kutu</option>
    <option value="poset">Poşet</option>
    <option value="tapa">Tapa</option>
    <option value="etiket">Etiket</option>
    </select>
    </div>
    <div class="form-group">
    <label for="stokUrunAdi">📦 Ürün Adı</label>
    <input type="text" id="stokUrunAdi" placeholder="Ürün adını yazın" required>
    </div>
    <div class="form-group">
    <label for="stokOlculeri">📏 Ölçüler (İsteğe Bağlı)</label>
    <input type="text" id="stokOlculeri" placeholder="Örn: 25x15x10 cm">
    </div>
    <div class="form-group">
    <label for="stokMevcut">📊 Mevcut Adet (Eksi değer girilebilir)</label>
    <input type="number" id="stokMevcut" placeholder="Mevcut adet (negatif de olabilir)" required>
    </div>
    <div class="form-group">
    <label for="stokEkleyen">👤 Verileri Ekleyen</label>
    <select id="stokEkleyen" required>
    <option value="">Kişi seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    </div>
    <div style="text-align: center; margin-top: 20px;">
    <button type="submit" class="btn">💾 Stok Kaydet</button>
    <button type="button" class="btn btn-success" onclick="temizleStokFormu()">🧹 Formu Temizle</button>
    </div>
    </form>
    <div id="stokAlert"></div>

    <!-- Stok Yönetim Butonları -->
    <div style="text-align: center; margin: 25px 0;">
    <button class="btn btn-success" onclick="tumStoklariYukle()">🔄 Stokları Yenile</button>
    <button class="btn btn-danger" onclick="tumStoklariSifirla()">🗑️ Tüm Stokları Sil</button>
    </div>

    <!-- Tüm Stoklar Özeti -->
    <div class="kaydedilmis-stoklar">
    <h3>📦 Tüm Stoklar Özeti</h3>
    <div id="stokOzeti"></div>
    </div>

    <!-- Stoklar Listesi -->
    <div id="stokListesiContainer">
    <h3>📋 Kayıtlı Stoklar</h3>
    <div id="stokListesi"></div>
    </div>
    </div>

    <!-- TEMİZLEME YÖNETİMİ Tab (BİRLEŞTİRİLMİŞ) -->
    <div id="temizleme-yonetimi" class="tab-content">
    <h2>🧽 Temizleme Yönetimi</h2>
    
    <!-- Temizleme Formu -->
    <form id="temizlemeYonetimForm">
    <h3 style="text-align: center; margin-bottom: 20px;">➕ Yeni Temizleme Kaydı</h3>
    
    <!-- Temel Bilgiler -->
    <div class="temizleme-form-section">
    <h3>📋 Temel Bilgiler</h3>
    <div class="form-grid">
    <div class="form-group">
    <label for="tmzDurum">📊 Durum</label>
    <select id="tmzDurum" required onchange="toggleTemizlemeFields()">
    <option value="">Durum seçin</option>
    <option value="gidecek">Gidecek</option>
    <option value="gonderildi">Gönderildi</option>
    <option value="gerigeldi">Geri Geldi</option>
    </select>
    </div>
    <div class="form-group">
    <label for="tmzUrunKodu">📦 Ürün Kodu</label>
    <input type="text" id="tmzUrunKodu" placeholder="Ürün kodu" required>
    </div>
    <div class="form-group">
    <label for="tmzTarih">📅 Tarih</label>
    <input type="date" id="tmzTarih" required>
    </div>
    <div class="form-group">
    <label for="tmzEkleyen">👤 Verileri Ekleyen</label>
    <select id="tmzEkleyen" required>
    <option value="">Kişi seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    </div>
    </div>

    <!-- Gönderilen Ürünler Bölümü -->
    <div class="temizleme-form-section" id="gonderilenSection" style="display: none;">
    <h3>📤 Gönderilen Ürünler</h3>
    <div class="alt-form-grid">
    <div class="alt-form-group">
    <label>📦 Adet A <span style="color: #e74c3c; font-size: 12px;">(Kırmızı)</span></label>
    <input type="number" id="tmzAdetA" class="input-highlight-a" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>📦 Adet B <span style="color: #f39c12; font-size: 12px;">(Turuncu)</span></label>
    <input type="number" id="tmzAdetB" class="input-highlight-b" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Brüt A (kg)</label>
    <input type="number" id="tmzAgirlikBrutA" class="input-highlight-a" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Brüt B (kg)</label>
    <input type="number" id="tmzAgirlikBrutB" class="input-highlight-b" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Net A (kg)</label>
    <input type="number" id="tmzAgirlikNetA" class="input-highlight-a" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Net B (kg)</label>
    <input type="number" id="tmzAgirlikNetB" class="input-highlight-b" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>📦 Kasa Sayısı A</label>
    <input type="number" id="tmzKasaSayisiA" class="input-highlight-a" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>📦 Kasa Sayısı B</label>
    <input type="number" id="tmzKasaSayisiB" class="input-highlight-b" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>📦 Özel Kasa A</label>
    <input type="number" id="tmzOzelKasaA" class="input-highlight-a" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>📦 Özel Kasa B</label>
    <input type="number" id="tmzOzelKasaB" class="input-highlight-b" placeholder="0" min="0" step="1">
    </div>
    </div>
    </div>

    <!-- Dönen Ürünler Bölümü -->
    <div class="temizleme-form-section" id="donenSection" style="display: none;">
    <h3>↩️ Dönen Ürünler</h3>
    <div class="alt-form-grid">
    <div class="alt-form-group">
    <label>↩️ Dönen Adet A</label>
    <input type="number" id="tmzDonenAdetA" class="input-highlight-a" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>↩️ Dönen Adet B</label>
    <input type="number" id="tmzDonenAdetB" class="input-highlight-b" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Brüt A (Dönen)</label>
    <input type="number" id="tmzDonenBrutA" class="input-highlight-a" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Brüt B (Dönen)</label>
    <input type="number" id="tmzDonenBrutB" class="input-highlight-b" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Net A (Dönen)</label>
    <input type="number" id="tmzDonenNetA" class="input-highlight-a" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Ağırlık Net B (Dönen)</label>
    <input type="number" id="tmzDonenNetB" class="input-highlight-b" placeholder="0.00" min="0" step="0.01">
    </div>
    </div>
    </div>

    <!-- Ek Durumlar -->
    <div class="temizleme-form-section">
    <h3>📍 Ek Durumlar</h3>
    <div class="alt-form-grid">
    <div class="alt-form-group">
    <label>🏬 Depoda Kalan</label>
    <input type="number" id="tmzDepodaKalan" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>🧽 Temizlemede Kalan</label>
    <input type="number" id="tmzTemizlemedeKalan" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>🏭 Fabrikada Kalan A</label>
    <input type="number" id="tmzFabrikadaKalanA" class="input-highlight-a" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>🏭 Fabrikada Kalan B</label>
    <input type="number" id="tmzFabrikadaKalanB" class="input-highlight-b" placeholder="0" min="0" step="1">
    </div>
    </div>
    </div>

    <!-- Hesaplamalar -->
    <div class="temizleme-form-section">
    <h3>📊 Hesaplamalar ve Ek Bilgiler</h3>
    <div class="alt-form-grid">
    <div class="alt-form-group">
    <label>⚖️ Birim Ağırlık (Öncesi)</label>
    <input type="number" id="tmzBirimAgirlikOncesi" placeholder="0.000" min="0" step="0.001">
    </div>
    <div class="alt-form-group">
    <label>⚖️ Birim Ağırlık (Sonrası)</label>
    <input type="number" id="tmzBirimAgirlikSonrasi" placeholder="0.000" min="0" step="0.001">
    </div>
    <div class="alt-form-group">
    <label>📉 Temizleme Kaybı (kg)</label>
    <input type="number" id="tmzTemizlemeKaybi" placeholder="0.00" min="0" step="0.01">
    </div>
    <div class="alt-form-group">
    <label>📦 Toplam Mevcut Adet</label>
    <input type="number" id="tmzToplamMevcutAdet" placeholder="0" min="0" step="1">
    </div>
    <div class="alt-form-group">
    <label>📊 Fark</label>
    <input type="number" id="tmzFark" placeholder="0.00" step="0.01">
    </div>
    </div>
    </div>

    <div style="text-align: center; margin-top: 20px;">
    <button type="submit" class="btn">💾 Temizleme Kaydını Kaydet</button>
    <button type="button" class="btn btn-success" onclick="temizleTemizlemeFormu()">🧹 Formu Temizle</button>
    </div>
    </form>
    <div id="temizlemeYonetimAlert"></div>

    <!-- Filtre Butonları -->
    <div style="margin: 20px 0; text-align: center;">
    <label style="font-weight: 600; margin-right: 10px;">Filtre:</label>
    <button class="btn" onclick="filtreTemizlemeKayitlari('hepsi')">Tümü</button>
    <button class="btn btn-success" onclick="filtreTemizlemeKayitlari('gidecek')">Gidecek</button>
    <button class="btn btn-success" onclick="filtreTemizlemeKayitlari('gonderildi')">Gönderildi</button>
    <button class="btn btn-success" onclick="filtreTemizlemeKayitlari('gerigeldi')">Geri Geldi</button>
    </div>

    <!-- Kayıtlar Listesi -->
    <div id="temizlemeYonetimListesi">
    <h3>📋 Temizleme Kayıtları</h3>
    <div id="temizlemeYonetimKayitlari"></div>
    </div>
    </div>

    <!-- SEVKİYAT YÖNETİMİ Tab (BİRLEŞTİRİLMİŞ) -->
    <div id="sevkiyat-yonetimi" class="tab-content">
    <h2>🚚 Sevkiyat Yönetimi</h2>
    
    <!-- Sevkiyat Formu -->
    <form id="sevkiyatYonetimForm">
    <h3 style="text-align: center; margin-bottom: 20px;">➕ Yeni Sevkiyat Kaydı</h3>
    
    <div class="form-grid">
    <div class="form-group">
    <label for="sevkSiparisNo">🔢 Sipariş No</label>
    <input type="text" id="sevkSiparisNo" placeholder="Sipariş numarası" required>
    </div>
    <div class="form-group">
    <label for="sevkUrunTuru">📦 Ürün Türü</label>
    <input type="text" id="sevkUrunTuru" placeholder="Ürün türü" required>
    </div>
    <div class="form-group">
    <label for="sevkUrunNo">📦 Ürün No</label>
    <input type="text" id="sevkUrunNo" placeholder="Ürün numarası" required>
    </div>
    <div class="form-group">
    <label for="sevkHazirAdet">📊 Sevke Hazır Ürün Adeti</label>
    <input type="number" id="sevkHazirAdet" min="0" placeholder="Sevke hazır adet" required>
    </div>
    <div class="form-group">
    <label for="sevkKoliAdet">📦 Koli Adeti</label>
    <input type="number" id="sevkKoliAdet" min="0" placeholder="Koli adeti" required>
    </div>
    <div class="form-group">
    <label for="sevkTeslimTarih">📅 Teslim Edilen Tarih</label>
    <input type="date" id="sevkTeslimTarih">
    </div>
    <div class="form-group">
    <label for="sevkTeslimAdet">📊 Teslim Edilen Adet</label>
    <input type="number" id="sevkTeslimAdet" min="0" placeholder="Teslim edilen adet">
    </div>
    <div class="form-group">
    <label for="sevkFabrikadaKalan">🏭 Fabrikada Kalan Adet</label>
    <input type="number" id="sevkFabrikadaKalan" min="0" placeholder="Fabrikada kalan">
    </div>
    <div class="form-group">
    <label for="sevkTeslimAlan">👤 Teslim Alan</label>
    <input type="text" id="sevkTeslimAlan" placeholder="Teslim alan kişi">
    </div>
    <div class="form-group">
    <label for="sevkDepoIrsaliye">📋 Depo Giriş İrsaliyesi</label>
    <input type="text" id="sevkDepoIrsaliye" placeholder="İrsaliye numarası">
    </div>
    <div class="form-group">
    <label for="sevkEkleyen">👤 Verileri Ekleyen</label>
    <select id="sevkEkleyen" required>
    <option value="">Kişi seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    </div>

    <div style="text-align: center; margin-top: 20px;">
    <button type="submit" class="btn">💾 Sevkiyat Kaydını Kaydet</button>
    <button type="button" class="btn btn-success" onclick="temizleSevkiyatFormu()">🧹 Formu Temizle</button>
    </div>
    </form>
    <div id="sevkiyatYonetimAlert"></div>

    <!-- Kayıtlar Listesi -->
    <div id="sevkiyatYonetimListesi">
    <h3>📋 Sevkiyat Kayıtları</h3>
    <div id="sevkiyatYonetimKayitlari"></div>
    </div>
    </div>

    <!-- Yarı Mamül Stok Tab -->
    <div id="yari-mamul" class="tab-content">
    <h2>🔧 Yarı Mamül Stok</h2>
    <form id="yariMamulForm">
    <div class="form-grid">
    <div class="form-group">
    <label for="yariMamulUrunAdi">📦 Ürün Adı</label>
    <input type="text" id="yariMamulUrunAdi" placeholder="Ürün adını yazın" required>
    </div>
    <div class="form-group">
    <label for="yariMamulAdet">📊 Adeti</label>
    <input type="number" id="yariMamulAdet" min="0" placeholder="Adet" required>
    </div>
    <div class="form-group">
    <label for="yariMamulHangiParca">🔧 Hangi Parça</label>
    <input type="text" id="yariMamulHangiParca" placeholder="Parça bilgisi" required>
    </div>
    <div class="form-group">
    <label for="yariMamulNot">📝 Not</label>
    <textarea id="yariMamulNot" rows="3" placeholder="Not yazın..."></textarea>
    </div>
    <div class="form-group">
    <label for="yariMamulEkleyen">👤 Verileri Ekleyen</label>
    <select id="yariMamulEkleyen" required>
    <option value="">Kişi seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    </div>
    <button type="submit" class="btn">💾 Yarı Mamül Kaydını Kaydet</button>
    </form>
    <div id="yariMamulAlert"></div>

    <div id="yariMamulListesi">
    <h3>📋 Yarı Mamül Stok Listesi</h3>
    <div id="yariMamulKayitlari"></div>
    </div>
    </div>

    <!-- Günlük Performans Tab -->
    <div id="gunluk-performans" class="tab-content">
    <h2>⚡ Günlük Performans Takibi</h2>
    <form id="performansForm">
    <div class="form-grid">
    <div class="form-group">
    <label for="performansTarih">📅 Tarih</label>
    <input type="date" id="performansTarih" required>
    </div>
    <div class="form-group">
    <label for="performansCalisan">👤 Çalışan Adı</label>
    <select id="performansCalisan" required>
    <option value="">Çalışan seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label for="performansEkleyen">👤 Verileri Ekleyen</label>
    <select id="performansEkleyen" required>
    <option value="">Kişi seçin</option>
    <option value="Esat">Esat</option>
    <option value="Ahmet">Ahmet</option>
    <option value="Emre">Emre</option>
    <option value="Gökay">Gökay</option>
    <option value="Berke">Berke</option>
    <option value="Melisa">Melisa</option>
    <option value="Evrim">Evrim</option>
    <option value="Koray">Koray</option>
    </select>
    </div>
    </div>

    <div class="hata-container">
    <h3>🏭 İşlem Performansları</h3>
    <div class="form-grid">
    <div class="form-group">
    <h4>📦 Kutu Hazırlığı</h4>
    <input type="text" id="kutuHazirlikUrun" placeholder="Ürün adı">
    <input type="number" id="kutuHazirlikAdet" placeholder="Adet" min="0">
    <input type="number" id="kutuHazirlikSure" placeholder="Süre (dk)" min="0">
    </div>
    <div class="form-group">
    <h4>📋 Koli Hazırlama</h4>
    <input type="text" id="koliHazirlamaUrun" placeholder="Ürün adı">
    <input type="number" id="koliHazirlamaAdet" placeholder="Adet" min="0">
    <input type="number" id="koliHazirlamaSure" placeholder="Süre (dk)" min="0">
    </div>
    <div class="form-group">
    <h4>🔧 İzolasyon</h4>
    <input type="text" id="izolasyonUrunPerf" placeholder="Ürün adı">
    <input type="number" id="izolasyonAdetPerf" placeholder="Adet" min="0">
    <input type="number" id="izolasyonSure" placeholder="Süre (dk)" min="0">
    </div>
    <div class="form-group">
    <h4>🔍 Kalite Kontrol</h4>
    <input type="text" id="kaliteKontrolUrun" placeholder="Ürün adı">
    <input type="number" id="kaliteKontrolAdet" placeholder="Adet" min="0">
    <input type="number" id="kaliteKontrolSure" placeholder="Süre (dk)" min="0">
    </div>
    <div class="form-group">
    <h4>🛍️ Poşetleme</h4>
    <input type="text" id="posetlemeUrunPerf" placeholder="Ürün adı">
    <input type="number" id="posetlemeAdetPerf" placeholder="Adet" min="0">
    <input type="number" id="posetlemeSure" placeholder="Süre (dk)" min="0">
    </div>
    <div class="form-group">
    <h4>📦 Ürün Kutulama</h4>
    <input type="text" id="urunKutulamaUrun" placeholder="Ürün adı">
    <input type="number" id="urunKutulamaAdet" placeholder="Adet" min="0">
    <input type="number" id="urunKutulamaSure" placeholder="Süre (dk)" min="0">
    </div>
    <div class="form-group">
    <h4>🔩 Ek Parça</h4>
    <input type="text" id="ekParcaUrunPerf" placeholder="Ürün adı">
    <input type="number" id="ekParcaAdetPerf" placeholder="Adet" min="0">
    <input type="number" id="ekParcaSure" placeholder="Süre (dk)" min="0">
    </div>
    </div>
    </div>

    <button type="submit" class="btn">💾 Performans Kaydını Kaydet</button>
    </form>
    <div id="performansAlert"></div>

    <!-- Son Performans Kayıtları -->
    <div id="performansKayitlariContainer">
    <h3>📊 Son Performans Kayıtları</h3>
    <div id="performansKayitlariListesi"></div>
    </div>
    </div>

    <!-- İstatistikler Tab -->
    <div id="istatistikler" class="tab-content">
    <h2>📈 İstatistikler</h2>
    <div class="stats-grid">
    <div class="stat-card">
    <h3 id="toplamKaliteKayit">0</h3>
    <p>Toplam Kalite Kontrol</p>
    </div>
    <div class="stat-card">
    <h3 id="toplamSiparisKayit">0</h3>
    <p>Toplam Sipariş</p>
    </div>
    <div class="stat-card">
    <h3 id="toplamPerformansKayit">0</h3>
    <p>Toplam Performans</p>
    </div>
    <div class="stat-card">
    <h3 id="tamamlananSiparis">0</h3>
    <p>Tamamlanan Sipariş</p>
    </div>
    <div class="stat-card">
    <h3 id="toplamHataAdet">0</h3>
    <p>Toplam Hatalı Ürün</p>
    </div>
    <div class="stat-card">
    <h3 id="basariOrani">0%</h3>
    <p>Başarı Oranı</p>
    </div>
    </div>

    <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
    <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">📊 Hata İstatistikleri</h4>
    <div id="hataIstatistikleri"></div>
    </div>

    <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
    <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">⚡ Performans İstatistikleri</h4>
    <div id="performansIstatistikleri"></div>
    </div>

    <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
    <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">👥 Çalışan Bazlı İstatistikler</h4>
    <div id="calisanIstatistikleri"></div>
    </div>
    </div>

    <!-- Veri Görüntüle Tab -->
    <div id="veri-goruntule" class="tab-content">
    <h2>📊 Veri Görüntüle</h2>
    <div class="form-grid" style="margin-bottom: 20px;">
    <div class="form-group">
    <label for="veriTuru">🔍 Veri Türü</label>
    <select id="veriTuru" onchange="loadVeriTablosu()">
    <option value="kalite">Kalite Kontrol Verileri</option>
    <option value="siparis">Sipariş Hazırlık Verileri</option>
    <option value="performans">Performans Verileri</option>
    <option value="stok">Stok Verileri</option>
    <option value="temizlemeYonetim">Temizleme Yönetimi Verileri</option>
    <option value="sevkiyatYonetim">Sevkiyat Yönetimi Verileri</option>
    <option value="yariMamul">Yarı Mamül Stok Verileri</option>
    <option value="gorevler">Güncel İşler</option>
    <option value="urunSiparisler">Ürün Siparişleri</option>
    </select>
    </div>
    <div class="form-group">
    <label for="tarihFiltre">📅 Tarih Filtresi</label>
    <select id="tarihFiltre" onchange="loadVeriTablosu()">
    <option value="hepsi">Tüm Tarihler</option>
    <option value="bugun">Bugün</option>
    <option value="bu-hafta">Bu Hafta</option>
    <option value="bu-ay">Bu Ay</option>
    </select>
    </div>
    </div>
    <div id="veriTablosuContainer"></div>
    <div style="margin-top: 20px; text-align: center;">
    <button class="btn" onclick="exportCurrentData()">📥 Görüntülenen Verileri Excel'e Aktar</button>
    </div>
    </div>

    <!-- Raporlar Tab -->
    <div id="raporlar" class="tab-content">
    <h2>📋 Raporlar</h2>
    <div class="stats-grid">
    <div class="stat-card">
    <h3 id="toplamKayit">0</h3>
    <p>Toplam Kalite Kontrol Kaydı</p>
    </div>
    <div class="stat-card">
    <h3 id="toplamSiparis">0</h3>
    <p>Sipariş Hazırlık Kaydı</p>
    </div>
    <div class="stat-card">
    <h3 id="toplamPerformans">0</h3>
    <p>Performans Kaydı</p>
    </div>
    <div class="stat-card">
    <h3 id="stokSayisi">0</h3>
    <p>Stok Kalemi</p>
    </div>
    </div>

    <div style="margin-top: 30px;">
    <button class="btn" onclick="exportToExcel('kalite')">📥 Kalite Verilerini Excel'e Aktar</button>
    <button class="btn btn-success" onclick="exportToExcel('performans')">📥 Performans Verilerini Excel'e Aktar</button>
    <button class="btn" onclick="exportToExcel('siparis')">📥 Sipariş Verilerini Excel'e Aktar</button>
    <button class="btn btn-danger" onclick="exportToExcel('hepsi')">📥 Tüm Verileri Excel'e Aktar</button>
    </div>
    </div>

    <!-- Ayarlar Tab -->
    <div id="ayarlar" class="tab-content">
    <h2>⚙️ Sistem Ayarları</h2>
    <div class="form-grid">
    <div class="form-group">
    <label>💾 Veri Yedekleme</label>
    <button class="btn" onclick="exportAllData()">Tüm Verileri Yedekle (JSON)</button>
    </div>
    <div class="form-group">
    <label>📤 Veri Geri Yükleme</label>
    <input type="file" id="importFile" accept=".json" onchange="importData()">
    </div>
    <div class="form-group">
    <label>🗑️ Veri Temizleme</label>
    <button class="btn btn-danger" onclick="clearAllData()">Tüm Verileri Temizle</button>
    </div>
    </div>
    </div>

    <!-- Modal for Editing -->
    <div id="editModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
    <div style="background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto;">
    <span style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;" onclick="document.getElementById('editModal').style.display='none'">&times;</span>
    <h3>✏️ Düzenle</h3>
    <div id="editFormContainer"></div>
    </div>
    </div>
    </div>

    <script>
    // Global değişkenler
    let kaliteKayitlari = JSON.parse(localStorage.getItem('kaliteKayitlari') || '[]');
    let siparisHazirlikKayitlari = JSON.parse(localStorage.getItem('siparisHazirlikKayitlari') || '[]');
    let performansKayitlari = JSON.parse(localStorage.getItem('performansKayitlari') || '[]');
    let stokKayitlari = JSON.parse(localStorage.getItem('stokKayitlari') || '[]');
    let temizlemeYonetimKayitlari = JSON.parse(localStorage.getItem('temizlemeYonetimKayitlari') || '[]');
    let sevkiyatYonetimKayitlari = JSON.parse(localStorage.getItem('sevkiyatYonetimKayitlari') || '[]');
    let yariMamulKayitlari = JSON.parse(localStorage.getItem('yariMamulKayitlari') || '[]');
    let gorevKayitlari = JSON.parse(localStorage.getItem('gorevKayitlari') || '[]');
    let urunSiparisKayitlari = JSON.parse(localStorage.getItem('urunSiparisKayitlari') || '[]');
    let tamamlananlariGoster = true;
    let currentTemizlemeFiltre = 'hepsi';

    // Sayfa yüklendiğinde
    document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const nowString = now.toISOString().slice(0, 16);
    const today = now.toISOString().slice(0, 10);
    
    document.getElementById('tarih').value = nowString;
    document.getElementById('hazirlikTarih').value = today;
    document.getElementById('performansTarih').value = today;
    document.getElementById('tmzTarih').value = today;

    loadStats();
    loadStokListesi();
    loadKaliteKayitlari();
    loadSiparislerListesi();
    loadPerformansKayitlari();
    loadIstatistikler();
    loadVeriTablosu();
    tumStoklariOzetGoster();
    loadTemizlemeYonetimKayitlari();
    loadSevkiyatYonetimKayitlari();
    loadYariMamulKayitlari();
    loadGorevlerListesi();
    loadUrunSiparislerListesi();

    // Form listeners
    document.getElementById('kaliteForm').addEventListener('submit', kaliteFormSubmit);
    document.getElementById('siparisEkleForm').addEventListener('submit', siparisEkle);
    document.getElementById('performansForm').addEventListener('submit', performansEkle);
    document.getElementById('stokForm').addEventListener('submit', stokEkleGuncelle);
    document.getElementById('temizlemeYonetimForm').addEventListener('submit', temizlemeYonetimEkle);
    document.getElementById('sevkiyatYonetimForm').addEventListener('submit', sevkiyatYonetimEkle);
    document.getElementById('yariMamulForm').addEventListener('submit', yariMamulEkle);
    document.getElementById('gorevEkleForm').addEventListener('submit', gorevEkle);
    document.getElementById('urunSiparisForm').addEventListener('submit', urunSiparisEkle);

    // Diğer hata checkbox'ı için listener
    document.getElementById('hataDiger').addEventListener('change', function() {
    const digerDetay = document.getElementById('digerHataDetay');
    digerDetay.style.display = this.checked ? 'block' : 'none';
    });
    });

    // Tab değiştirme fonksiyonu
    function showTab(tabName) {
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabs.forEach(tab => tab.classList.remove('active'));
    tabContents.forEach(content => content.classList.remove('active'));
    
    event.target.classList.add('active');
    document.getElementById(tabName).classList.add('active');
    }

    // Alert gösterme fonksiyonu
    function showAlert(elementId, message, type) {
    const alertDiv = document.getElementById(elementId);
    alertDiv.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
    setTimeout(() => { alertDiv.innerHTML = ''; }, 3000);
    }

    // ==== GÜNCEL İŞLER FONKSİYONLARI ====
    function gorevEkle(e) {
    e.preventDefault();
    
    const gorevData = {
    id: Date.now(),
    baslik: document.getElementById('gorevBaslik').value.trim(),
    aciliyet: document.getElementById('gorevAciliyet').value,
    atanan: document.getElementById('gorevAtanan').value,
    aciklama: document.getElementById('gorevAciklama').value.trim(),
    tamamlandi: false,
    notlar: [],
    olusturmaTarihi: new Date().toISOString(),
    sira: gorevKayitlari.length
    };

    gorevKayitlari.push(gorevData);
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    
    document.getElementById('gorevEkleForm').reset();
    loadGorevlerListesi();
    showAlert('gorevAlert', 'Görev başarıyla eklendi!', 'success');
    }

    function loadGorevlerListesi() {
    const container = document.getElementById('gorevlerListesi');
    if (!container) return;

    let filtrelenmisGorevler = gorevKayitlari;
    if (!tamamlananlariGoster) {
    filtrelenmisGorevler = gorevKayitlari.filter(g => !g.tamamlandi);
    }

    if (filtrelenmisGorevler.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz görev bulunmuyor.</p>';
    return;
    }

    let html = '<div style="margin-top: 20px;">';
    filtrelenmisGorevler.forEach(gorev => {
    const aciliyetClass = gorev.aciliyet === 'acil' ? 'acil' : gorev.aciliyet === 'normal' ? 'normal' : 'dusuk';
    const aciliyetText = gorev.aciliyet === 'acil' ? '🔴 Acil' : gorev.aciliyet === 'normal' ? '🔵 Normal' : '⚪ Düşük';
    
    html += `
    <div class="gorev-item ${gorev.tamamlandi ? 'tamamlandi' : ''}" draggable="true" ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="drop(event)" data-id="${gorev.id}">
    <div class="gorev-header">
    <div style="display: flex; align-items: center; gap: 10px;">
    <input type="checkbox" ${gorev.tamamlandi ? 'checked' : ''} onchange="toggleGorevTamamlandi(${gorev.id})" style="transform: scale(1.3);">
    <div class="gorev-baslik">${gorev.baslik}</div>
    </div>
    <div style="display: flex; gap: 10px; align-items: center;">
    <span class="aciliyet-badge ${aciliyetClass}">${aciliyetText}</span>
    ${gorev.atanan ? `<span style="background: #3498db; color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px;">👤 ${gorev.atanan}</span>` : ''}
    <button class="btn-edit" onclick="gorevDuzenle(${gorev.id})" style="padding: 5px 10px;">✏️</button>
    <button class="btn-delete" onclick="gorevSil(${gorev.id})" style="padding: 5px 10px;">🗑️</button>
    </div>
    </div>
    ${gorev.aciklama ? `<div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 6px; font-size: 14px;">${gorev.aciklama}</div>` : ''}
    
    <div style="margin-top: 10px; border-top: 1px solid #ddd; padding-top: 10px;">
    <div style="display: flex; gap: 5px; margin-bottom: 5px;">
    <input type="text" id="not-input-${gorev.id}" placeholder="Not ekle..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
    <button class="btn" onclick="gorevNotEkle(${gorev.id})" style="padding: 8px 15px; font-size: 13px;">➕ Not</button>
    </div>
    ${gorev.notlar && gorev.notlar.length > 0 ? `
    <div class="gorev-notlar">
    ${gorev.notlar.map((not, index) => `
    <div class="gorev-not-item">
    <div style="display: flex; justify-content: space-between; align-items: start;">
    <div style="flex: 1;">
    <strong style="font-size: 12px; color: #3498db;">${not.ekleyen} - ${new Date(not.tarih).toLocaleString('tr-TR')}</strong>
    <div>${not.metin}</div>
    </div>
    <button onclick="gorevNotSil(${gorev.id}, ${index})" style="background: none; border: none; color: #e74c3c; cursor: pointer; font-size: 16px;">❌</button>
    </div>
    </div>
    `).join('')}
    </div>
    ` : ''}
    </div>
    </div>
    `;
    });
    html += '</div>';
    container.innerHTML = html;
    }

    function toggleGorevTamamlandi(id) {
    const gorev = gorevKayitlari.find(g => g.id === id);
    if (gorev) {
    gorev.tamamlandi = !gorev.tamamlandi;
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    loadGorevlerListesi();
    }
    }

    function gorevNotEkle(id) {
    const input = document.getElementById(`not-input-${id}`);
    const notMetin = input.value.trim();
    if (!notMetin) return;

    const gorev = gorevKayitlari.find(g => g.id === id);
    if (gorev) {
    if (!gorev.notlar) gorev.notlar = [];
    gorev.notlar.push({
    metin: notMetin,
    ekleyen: 'Kullanıcı',
    tarih: new Date().toISOString()
    });
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    input.value = '';
    loadGorevlerListesi();
    }
    }

    function gorevNotSil(gorevId, notIndex) {
    const gorev = gorevKayitlari.find(g => g.id === gorevId);
    if (gorev && gorev.notlar) {
    gorev.notlar.splice(notIndex, 1);
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    loadGorevlerListesi();
    }
    }

    function gorevSil(id) {
    if (confirm('Bu görevi silmek istediğinizden emin misiniz?')) {
    gorevKayitlari = gorevKayitlari.filter(g => g.id !== id);
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    loadGorevlerListesi();
    showAlert('gorevAlert', 'Görev silindi!', 'success');
    }
    }

    function gorevDuzenle(id) {
    const gorev = gorevKayitlari.find(g => g.id === id);
    if (!gorev) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editGorevForm">
    <div class="form-grid">
    <div class="form-group">
    <label>📝 Görev Başlığı</label>
    <input type="text" id="editGorevBaslik" value="${gorev.baslik}" required>
    </div>
    <div class="form-group">
    <label>⚠️ Aciliyet</label>
    <select id="editGorevAciliyet" required>
    <option value="acil" ${gorev.aciliyet === 'acil' ? 'selected' : ''}>🔴 Acil</option>
    <option value="normal" ${gorev.aciliyet === 'normal' ? 'selected' : ''}>🔵 Normal</option>
    <option value="dusuk" ${gorev.aciliyet === 'dusuk' ? 'selected' : ''}>⚪ Düşük</option>
    </select>
    </div>
    <div class="form-group">
    <label>👤 Atanan Kişi</label>
    <select id="editGorevAtanan">
    <option value="">Herkes</option>
    <option value="Esat" ${gorev.atanan === 'Esat' ? 'selected' : ''}>Esat</option>
    <option value="Ahmet" ${gorev.atanan === 'Ahmet' ? 'selected' : ''}>Ahmet</option>
    <option value="Emre" ${gorev.atanan === 'Emre' ? 'selected' : ''}>Emre</option>
    <option value="Gökay" ${gorev.atanan === 'Gökay' ? 'selected' : ''}>Gökay</option>
    <option value="Berke" ${gorev.atanan === 'Berke' ? 'selected' : ''}>Berke</option>
    <option value="Melisa" ${gorev.atanan === 'Melisa' ? 'selected' : ''}>Melisa</option>
    <option value="Evrim" ${gorev.atanan === 'Evrim' ? 'selected' : ''}>Evrim</option>
    <option value="Koray" ${gorev.atanan === 'Koray' ? 'selected' : ''}>Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label>📄 Açıklama</label>
    <textarea id="editGorevAciklama" rows="3">${gorev.aciklama || ''}</textarea>
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editGorevForm').addEventListener('submit', function(e) {
    e.preventDefault();
    gorev.baslik = document.getElementById('editGorevBaslik').value.trim();
    gorev.aciliyet = document.getElementById('editGorevAciliyet').value;
    gorev.atanan = document.getElementById('editGorevAtanan').value;
    gorev.aciklama = document.getElementById('editGorevAciklama').value.trim();
    
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    loadGorevlerListesi();
    modal.style.display = 'none';
    showAlert('gorevAlert', 'Görev başarıyla güncellendi!', 'success');
    });
    }

    function siralaGorevler(tip) {
    if (tip === 'aciliyet') {
    const aciliyetSirasi = { 'acil': 1, 'normal': 2, 'dusuk': 3 };
    gorevKayitlari.sort((a, b) => aciliyetSirasi[a.aciliyet] - aciliyetSirasi[b.aciliyet]);
    } else if (tip === 'tarih') {
    gorevKayitlari.sort((a, b) => new Date(b.olusturmaTarihi) - new Date(a.olusturmaTarihi));
    }
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    loadGorevlerListesi();
    }

    function tamamlananGizle() {
    tamamlananlariGoster = !tamamlananlariGoster;
    loadGorevlerListesi();
    }

    // Drag and Drop için fonksiyonlar
    function dragStart(e) {
    e.dataTransfer.setData('text/plain', e.target.dataset.id);
    e.target.style.opacity = '0.5';
    }

    function dragOver(e) {
    e.preventDefault();
    }

    function drop(e) {
    e.preventDefault();
    const draggedId = parseInt(e.dataTransfer.getData('text/plain'));
    const targetElement = e.target.closest('.gorev-item');
    if (!targetElement) return;
    
    const targetId = parseInt(targetElement.dataset.id);
    if (draggedId === targetId) return;

    const draggedIndex = gorevKayitlari.findIndex(g => g.id === draggedId);
    const targetIndex = gorevKayitlari.findIndex(g => g.id === targetId);
    
    const [draggedItem] = gorevKayitlari.splice(draggedIndex, 1);
    gorevKayitlari.splice(targetIndex, 0, draggedItem);

    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    loadGorevlerListesi();
    
    document.querySelectorAll('.gorev-item').forEach(item => item.style.opacity = '1');
    }

    // ==== ÜRÜN SİPARİŞLERİ FONKSİYONLARI ====
    function urunSiparisEkle(e) {
    e.preventDefault();
    
    const siparisData = {
    id: Date.now(),
    urunAdi: document.getElementById('siparisUrunAdi').value.trim(),
    adetMiktar: document.getElementById('siparisAdetMiktar').value.trim(),
    olcu: document.getElementById('siparisOlcu').value.trim(),
    aciklama: document.getElementById('siparisAciklama').value.trim(),
    talepEden: document.getElementById('siparisTalipEden').value,
    durum: 'bekleniyor',
    olusturmaTarihi: new Date().toISOString(),
    gelenAdet: '',
    gelenNotlar: ''
    };

    urunSiparisKayitlari.push(siparisData);
    localStorage.setItem('urunSiparisKayitlari', JSON.stringify(urunSiparisKayitlari));
    
    document.getElementById('urunSiparisForm').reset();
    loadUrunSiparislerListesi();
    showAlert('siparisAlert', 'Sipariş başarıyla eklendi!', 'success');
    }

    function loadUrunSiparislerListesi(filtre = 'hepsi') {
    const container = document.getElementById('urunSiparislerListesi');
    if (!container) return;

    let filtrelenmissiparisler = urunSiparisKayitlari;
    if (filtre !== 'hepsi') {
    filtrelenmissiparisler = urunSiparisKayitlari.filter(s => s.durum === filtre);
    }

    if (filtrelenmissiparisler.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz sipariş bulunmuyor.</p>';
    return;
    }

    let html = '<div style="margin-top: 20px;">';
    filtrelenmissiparisler.slice().reverse().forEach(siparis => {
    const durumText = siparis.durum === 'bekleniyor' ? 'Bekleniyor' :
    siparis.durum === 'geldi' ? 'Geldi' : 'İptal';
    
    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>📦 ${siparis.urunAdi}</strong></div>
    <div style="display: flex; gap: 10px; align-items: center;">
    <span class="durum-badge ${siparis.durum}">${durumText}</span>
    <button class="btn-edit" onclick="urunSiparisDuzenle(${siparis.id})">✏️</button>
    <button class="btn-delete" onclick="urunSiparisSil(${siparis.id})">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    <div><strong>📊 Adet/Miktar:</strong> ${siparis.adetMiktar}</div>
    ${siparis.olcu ? `<div><strong>📏 Ölçü:</strong> ${siparis.olcu}</div>` : ''}
    <div><strong>👤 Talep Eden:</strong> ${siparis.talepEden}</div>
    <div><strong>📅 Tarih:</strong> ${new Date(siparis.olusturmaTarihi).toLocaleString('tr-TR')}</div>
    ${siparis.aciklama ? `<div style="grid-column: 1/-1;"><strong>📝 Açıklama:</strong> ${siparis.aciklama}</div>` : ''}
    ${siparis.gelenAdet ? `<div><strong>✅ Gelen Adet:</strong> ${siparis.gelenAdet}</div>` : ''}
    ${siparis.gelenNotlar ? `<div style="grid-column: 1/-1;"><strong>📌 Notlar:</strong> ${siparis.gelenNotlar}</div>` : ''}
    </div>
    ${siparis.durum === 'bekleniyor' ? `
    <div style="margin-top: 15px; display: flex; gap: 10px;">
    <button class="btn btn-success" onclick="siparisGeldi(${siparis.id})">✅ Geldi Olarak İşaretle</button>
    <button class="btn btn-danger" onclick="siparisIptal(${siparis.id})">❌ İptal Et</button>
    </div>
    ` : ''}
    </div>
    `;
    });
    html += '</div>';
    container.innerHTML = html;
    }

    function siparisGeldi(id) {
    const siparis = urunSiparisKayitlari.find(s => s.id === id);
    if (!siparis) return;

    const gelenAdet = prompt('Gelen adet/miktarı girin:', siparis.adetMiktar);
    if (gelenAdet === null) return;

    const notlar = prompt('Not eklemek ister misiniz?', '');

    siparis.durum = 'geldi';
    siparis.gelenAdet = gelenAdet;
    siparis.gelenNotlar = notlar || '';
    siparis.gelisTarihi = new Date().toISOString();

    localStorage.setItem('urunSiparisKayitlari', JSON.stringify(urunSiparisKayitlari));
    loadUrunSiparislerListesi();
    showAlert('siparisAlert', 'Sipariş "Geldi" olarak işaretlendi!', 'success');
    }

    function siparisIptal(id) {
    const siparis = urunSiparisKayitlari.find(s => s.id === id);
    if (siparis && confirm('Bu siparişi iptal etmek istediğinizden emin misiniz?')) {
    siparis.durum = 'iptal';
    localStorage.setItem('urunSiparisKayitlari', JSON.stringify(urunSiparisKayitlari));
    loadUrunSiparislerListesi();
    showAlert('siparisAlert', 'Sipariş iptal edildi!', 'success');
    }
    }

    function urunSiparisDuzenle(id) {
    const siparis = urunSiparisKayitlari.find(s => s.id === id);
    if (!siparis) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');

    container.innerHTML = `
    <form id="editUrunSiparisForm">
    <div class="form-grid">
    <div class="form-group">
    <label>📦 Ürün Adı</label>
    <input type="text" id="editSiparisUrunAdi" value="${siparis.urunAdi}" required>
    </div>
    <div class="form-group">
    <label>📊 Adet/Miktar</label>
    <input type="text" id="editSiparisAdetMiktar" value="${siparis.adetMiktar}" required>
    </div>
    <div class="form-group">
    <label>📏 Ölçü</label>
    <input type="text" id="editSiparisOlcu" value="${siparis.olcu || ''}">
    </div>
    <div class="form-group">
    <label>📝 Açıklama</label>
    <textarea id="editSiparisAciklama" rows="3">${siparis.aciklama || ''}</textarea>
    </div>
    <div class="form-group">
    <label>📊 Durum</label>
    <select id="editSiparisDurum">
    <option value="bekleniyor" ${siparis.durum === 'bekleniyor' ? 'selected' : ''}>Bekleniyor</option>
    <option value="geldi" ${siparis.durum === 'geldi' ? 'selected' : ''}>Geldi</option>
    <option value="iptal" ${siparis.durum === 'iptal' ? 'selected' : ''}>İptal</option>
    </select>
    </div>
    ${siparis.durum === 'geldi' ? `
    <div class="form-group">
    <label>✅ Gelen Adet</label>
    <input type="text" id="editSiparisGelenAdet" value="${siparis.gelenAdet || ''}">
    </div>
    <div class="form-group">
    <label>📌 Notlar</label>
    <textarea id="editSiparisGelenNotlar" rows="2">${siparis.gelenNotlar || ''}</textarea>
    </div>
    ` : ''}
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editUrunSiparisForm').addEventListener('submit', function(e) {
    e.preventDefault();
    siparis.urunAdi = document.getElementById('editSiparisUrunAdi').value.trim();
    siparis.adetMiktar = document.getElementById('editSiparisAdetMiktar').value.trim();
    siparis.olcu = document.getElementById('editSiparisOlcu').value.trim();
    siparis.aciklama = document.getElementById('editSiparisAciklama').value.trim();
    siparis.durum = document.getElementById('editSiparisDurum').value;
    
    if (siparis.durum === 'geldi') {
    const gelenAdetEl = document.getElementById('editSiparisGelenAdet');
    const gelenNotlarEl = document.getElementById('editSiparisGelenNotlar');
    if (gelenAdetEl) siparis.gelenAdet = gelenAdetEl.value.trim();
    if (gelenNotlarEl) siparis.gelenNotlar = gelenNotlarEl.value.trim();
    }
    
    localStorage.setItem('urunSiparisKayitlari', JSON.stringify(urunSiparisKayitlari));
    loadUrunSiparislerListesi();
    modal.style.display = 'none';
    showAlert('siparisAlert', 'Sipariş başarıyla güncellendi!', 'success');
    });
    }

    function urunSiparisSil(id) {
    if (confirm('Bu siparişi silmek istediğinizden emin misiniz?')) {
    urunSiparisKayitlari = urunSiparisKayitlari.filter(s => s.id !== id);
    localStorage.setItem('urunSiparisKayitlari', JSON.stringify(urunSiparisKayitlari));
    loadUrunSiparislerListesi();
    showAlert('siparisAlert', 'Sipariş silindi!', 'success');
    }
    }

    function filtreSiparisler(durum) {
    loadUrunSiparislerListesi(durum);
    }

    // ==== TEMİZLEME YÖNETİMİ FONKSİYONLARI (BİRLEŞTİRİLMİŞ) ====
    function toggleTemizlemeFields() {
    const durum = document.getElementById('tmzDurum').value;
    const gonderilenSection = document.getElementById('gonderilenSection');
    const donenSection = document.getElementById('donenSection');

    if (durum === 'gidecek' || durum === 'gonderildi') {
    gonderilenSection.style.display = 'block';
    donenSection.style.display = 'none';
    } else if (durum === 'gerigeldi') {
    gonderilenSection.style.display = 'block';
    donenSection.style.display = 'block';
    } else {
    gonderilenSection.style.display = 'none';
    donenSection.style.display = 'none';
    }
    }

    function temizlemeYonetimEkle(e) {
    e.preventDefault();
    
    const formData = {
    id: Date.now(),
    durum: document.getElementById('tmzDurum').value,
    urunKodu: document.getElementById('tmzUrunKodu').value.trim(),
    tarih: document.getElementById('tmzTarih').value,
    ekleyen: document.getElementById('tmzEkleyen').value,
    
    // Gönderilen ürünler
    adetA: parseFloat(document.getElementById('tmzAdetA').value) || 0,
    adetB: parseFloat(document.getElementById('tmzAdetB').value) || 0,
    agirlikBrutA: parseFloat(document.getElementById('tmzAgirlikBrutA').value) || 0,
    agirlikBrutB: parseFloat(document.getElementById('tmzAgirlikBrutB').value) || 0,
    agirlikNetA: parseFloat(document.getElementById('tmzAgirlikNetA').value) || 0,
    agirlikNetB: parseFloat(document.getElementById('tmzAgirlikNetB').value) || 0,
    kasaSayisiA: parseFloat(document.getElementById('tmzKasaSayisiA').value) || 0,
    kasaSayisiB: parseFloat(document.getElementById('tmzKasaSayisiB').value) || 0,
    ozelKasaA: parseFloat(document.getElementById('tmzOzelKasaA').value) || 0,
    ozelKasaB: parseFloat(document.getElementById('tmzOzelKasaB').value) || 0,
    
    // Dönen ürünler
    donenAdetA: parseFloat(document.getElementById('tmzDonenAdetA').value) || 0,
    donenAdetB: parseFloat(document.getElementById('tmzDonenAdetB').value) || 0,
    donenBrutA: parseFloat(document.getElementById('tmzDonenBrutA').value) || 0,
    donenBrutB: parseFloat(document.getElementById('tmzDonenBrutB').value) || 0,
    donenNetA: parseFloat(document.getElementById('tmzDonenNetA').value) || 0,
    donenNetB: parseFloat(document.getElementById('tmzDonenNetB').value) || 0,
    
    // Ek durumlar
    depodaKalan: parseFloat(document.getElementById('tmzDepodaKalan').value) || 0,
    temizlemedeKalan: parseFloat(document.getElementById('tmzTemizlemedeKalan').value) || 0,
    fabrikadaKalanA: parseFloat(document.getElementById('tmzFabrikadaKalanA').value) || 0,
    fabrikadaKalanB: parseFloat(document.getElementById('tmzFabrikadaKalanB').value) || 0,
    
    // Hesaplamalar
    birimAgirlikOncesi: parseFloat(document.getElementById('tmzBirimAgirlikOncesi').value) || 0,
    birimAgirlikSonrasi: parseFloat(document.getElementById('tmzBirimAgirlikSonrasi').value) || 0,
    temizlemeKaybi: parseFloat(document.getElementById('tmzTemizlemeKaybi').value) || 0,
    toplamMevcutAdet: parseFloat(document.getElementById('tmzToplamMevcutAdet').value) || 0,
    fark: parseFloat(document.getElementById('tmzFark').value) || 0,
    
    olusturmaTarihi: new Date().toISOString()
    };

    temizlemeYonetimKayitlari.push(formData);
    localStorage.setItem('temizlemeYonetimKayitlari', JSON.stringify(temizlemeYonetimKayitlari));
    
    document.getElementById('temizlemeYonetimForm').reset();
    loadTemizlemeYonetimKayitlari();
    showAlert('temizlemeYonetimAlert', 'Temizleme kaydı başarıyla eklendi!', 'success');
    }

    function loadTemizlemeYonetimKayitlari(filtre = 'hepsi') {
    const container = document.getElementById('temizlemeYonetimKayitlari');
    if (!container) return;

    let filtrelenmisKayitlar = temizlemeYonetimKayitlari;
    if (filtre !== 'hepsi') {
    filtrelenmisKayitlar = temizlemeYonetimKayitlari.filter(k => k.durum === filtre);
    }

    if (filtrelenmisKayitlar.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz temizleme kaydı bulunmuyor.</p>';
    return;
    }

    let html = '';
    filtrelenmisKayitlar.slice().reverse().forEach(kayit => {
    const durumText = kayit.durum === 'gidecek' ? 'Gidecek' : kayit.durum === 'gonderildi' ? 'Gönderildi' : 'Geri Geldi';
    const durumClass = kayit.durum;

    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>📦 ${kayit.urunKodu}</strong> - <span class="durum-badge ${durumClass}">${durumText}</span></div>
    <div>
    <button class="btn-edit" onclick="temizlemeYonetimEdit(${kayit.id})">✏️</button>
    <button class="btn-delete" onclick="temizlemeYonetimSil(${kayit.id})" style="margin-left: 5px;">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    <div><strong>📅 Tarih:</strong> ${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</div>
    <div><strong>👤 Ekleyen:</strong> ${kayit.ekleyen}</div>
    ${kayit.adetA > 0 ? `<div style="background: #ffe5e5; padding: 5px; border-radius: 4px;"><strong>📦 Adet A:</strong> ${kayit.adetA}</div>` : ''}
    ${kayit.adetB > 0 ? `<div style="background: #fff4e5; padding: 5px; border-radius: 4px;"><strong>📦 Adet B:</strong> ${kayit.adetB}</div>` : ''}
    ${kayit.agirlikBrutA > 0 ? `<div><strong>⚖️ Ağırlık Brüt A:</strong> ${kayit.agirlikBrutA} kg</div>` : ''}
    ${kayit.agirlikBrutB > 0 ? `<div><strong>⚖️ Ağırlık Brüt B:</strong> ${kayit.agirlikBrutB} kg</div>` : ''}
    ${kayit.agirlikNetA > 0 ? `<div><strong>⚖️ Ağırlık Net A:</strong> ${kayit.agirlikNetA} kg</div>` : ''}
    ${kayit.agirlikNetB > 0 ? `<div><strong>⚖️ Ağırlık Net B:</strong> ${kayit.agirlikNetB} kg</div>` : ''}
    ${kayit.kasaSayisiA > 0 ? `<div><strong>📦 Kasa Sayısı A:</strong> ${kayit.kasaSayisiA}</div>` : ''}
    ${kayit.kasaSayisiB > 0 ? `<div><strong>📦 Kasa Sayısı B:</strong> ${kayit.kasaSayisiB}</div>` : ''}
    ${kayit.ozelKasaA > 0 ? `<div><strong>📦 Özel Kasa A:</strong> ${kayit.ozelKasaA}</div>` : ''}
    ${kayit.ozelKasaB > 0 ? `<div><strong>📦 Özel Kasa B:</strong> ${kayit.ozelKasaB}</div>` : ''}
    ${kayit.donenAdetA > 0 ? `<div style="background: #ffe5e5; padding: 5px; border-radius: 4px;"><strong>↩️ Dönen Adet A:</strong> ${kayit.donenAdetA}</div>` : ''}
    ${kayit.donenAdetB > 0 ? `<div style="background: #fff4e5; padding: 5px; border-radius: 4px;"><strong>↩️ Dönen Adet B:</strong> ${kayit.donenAdetB}</div>` : ''}
    ${kayit.donenBrutA > 0 ? `<div><strong>⚖️ Dönen Brüt A:</strong> ${kayit.donenBrutA} kg</div>` : ''}
    ${kayit.donenBrutB > 0 ? `<div><strong>⚖️ Dönen Brüt B:</strong> ${kayit.donenBrutB} kg</div>` : ''}
    ${kayit.donenNetA > 0 ? `<div><strong>⚖️ Dönen Net A:</strong> ${kayit.donenNetA} kg</div>` : ''}
    ${kayit.donenNetB > 0 ? `<div><strong>⚖️ Dönen Net B:</strong> ${kayit.donenNetB} kg</div>` : ''}
    ${kayit.depodaKalan > 0 ? `<div><strong>🏬 Depoda Kalan:</strong> ${kayit.depodaKalan}</div>` : ''}
    ${kayit.temizlemedeKalan > 0 ? `<div><strong>🧽 Temizlemede Kalan:</strong> ${kayit.temizlemedeKalan}</div>` : ''}
    ${kayit.fabrikadaKalanA > 0 ? `<div><strong>🏭 Fabrikada Kalan A:</strong> ${kayit.fabrikadaKalanA}</div>` : ''}
    ${kayit.fabrikadaKalanB > 0 ? `<div><strong>🏭 Fabrikada Kalan B:</strong> ${kayit.fabrikadaKalanB}</div>` : ''}
    ${kayit.birimAgirlikOncesi > 0 ? `<div><strong>⚖️ Birim Ağırlık (Öncesi):</strong> ${kayit.birimAgirlikOncesi} kg</div>` : ''}
    ${kayit.birimAgirlikSonrasi > 0 ? `<div><strong>⚖️ Birim Ağırlık (Sonrası):</strong> ${kayit.birimAgirlikSonrasi} kg</div>` : ''}
    ${kayit.temizlemeKaybi > 0 ? `<div><strong>📉 Temizleme Kaybı:</strong> ${kayit.temizlemeKaybi} kg</div>` : ''}
    ${kayit.toplamMevcutAdet > 0 ? `<div><strong>📦 Toplam Mevcut:</strong> ${kayit.toplamMevcutAdet}</div>` : ''}
    ${kayit.fark !== 0 ? `<div><strong>📊 Fark:</strong> ${kayit.fark}</div>` : ''}
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function filtreTemizlemeKayitlari(filtre) {
    currentTemizlemeFiltre = filtre;
    loadTemizlemeYonetimKayitlari(filtre);
    }

    function temizleTemizlemeFormu() {
    document.getElementById('temizlemeYonetimForm').reset();
    toggleTemizlemeFields();
    }

    function temizlemeYonetimSil(id) {
    if (confirm('Bu kaydı silmek istediğinizden emin misiniz?')) {
    temizlemeYonetimKayitlari = temizlemeYonetimKayitlari.filter(k => k.id !== id);
    localStorage.setItem('temizlemeYonetimKayitlari', JSON.stringify(temizlemeYonetimKayitlari));
    loadTemizlemeYonetimKayitlari(currentTemizlemeFiltre);
    showAlert('temizlemeYonetimAlert', 'Kayıt silindi!', 'success');
    }
    }

    function temizlemeYonetimEdit(id) {
    const kayit = temizlemeYonetimKayitlari.find(k => k.id === id);
    if (!kayit) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editTemizlemeYonetimForm" style="max-height: 500px; overflow-y: auto;">
    <div class="form-grid">
    <div class="form-group">
    <label>📊 Durum</label>
    <select id="editTmzDurum" required>
    <option value="gidecek" ${kayit.durum === 'gidecek' ? 'selected' : ''}>Gidecek</option>
    <option value="gonderildi" ${kayit.durum === 'gonderildi' ? 'selected' : ''}>Gönderildi</option>
    <option value="gerigeldi" ${kayit.durum === 'gerigeldi' ? 'selected' : ''}>Geri Geldi</option>
    </select>
    </div>
    <div class="form-group">
    <label>📦 Ürün Kodu</label>
    <input type="text" id="editTmzUrunKodu" value="${kayit.urunKodu}" required>
    </div>
    <div class="form-group">
    <label>📅 Tarih</label>
    <input type="date" id="editTmzTarih" value="${kayit.tarih}" required>
    </div>
    <div class="form-group">
    <label>📦 Adet A</label>
    <input type="number" id="editTmzAdetA" value="${kayit.adetA}" step="1">
    </div>
    <div class="form-group">
    <label>📦 Adet B</label>
    <input type="number" id="editTmzAdetB" value="${kayit.adetB}" step="1">
    </div>
    <div class="form-group">
    <label>⚖️ Ağırlık Brüt A</label>
    <input type="number" id="editTmzAgirlikBrutA" value="${kayit.agirlikBrutA}" step="0.01">
    </div>
    <div class="form-group">
    <label>⚖️ Ağırlık Brüt B</label>
    <input type="number" id="editTmzAgirlikBrutB" value="${kayit.agirlikBrutB}" step="0.01">
    </div>
    <div class="form-group">
    <label>⚖️ Ağırlık Net A</label>
    <input type="number" id="editTmzAgirlikNetA" value="${kayit.agirlikNetA}" step="0.01">
    </div>
    <div class="form-group">
    <label>⚖️ Ağırlık Net B</label>
    <input type="number" id="editTmzAgirlikNetB" value="${kayit.agirlikNetB}" step="0.01">
    </div>
    <div class="form-group">
    <label>↩️ Dönen Adet A</label>
    <input type="number" id="editTmzDonenAdetA" value="${kayit.donenAdetA}" step="1">
    </div>
    <div class="form-group">
    <label>↩️ Dönen Adet B</label>
    <input type="number" id="editTmzDonenAdetB" value="${kayit.donenAdetB}" step="1">
    </div>
    <div class="form-group">
    <label>🏬 Depoda Kalan</label>
    <input type="number" id="editTmzDepodaKalan" value="${kayit.depodaKalan}" step="1">
    </div>
    <div class="form-group">
    <label>🧽 Temizlemede Kalan</label>
    <input type="number" id="editTmzTemizlemedeKalan" value="${kayit.temizlemedeKalan}" step="1">
    </div>
    <div class="form-group">
    <label>🏭 Fabrikada Kalan A</label>
    <input type="number" id="editTmzFabrikadaKalanA" value="${kayit.fabrikadaKalanA}" step="1">
    </div>
    <div class="form-group">
    <label>🏭 Fabrikada Kalan B</label>
    <input type="number" id="editTmzFabrikadaKalanB" value="${kayit.fabrikadaKalanB}" step="1">
    </div>
    <div class="form-group">
    <label>⚖️ Birim Ağırlık (Öncesi)</label>
    <input type="number" id="editTmzBirimAgirlikOncesi" value="${kayit.birimAgirlikOncesi}" step="0.001">
    </div>
    <div class="form-group">
    <label>⚖️ Birim Ağırlık (Sonrası)</label>
    <input type="number" id="editTmzBirimAgirlikSonrasi" value="${kayit.birimAgirlikSonrasi}" step="0.001">
    </div>
    <div class="form-group">
    <label>📉 Temizleme Kaybı</label>
    <input type="number" id="editTmzTemizlemeKaybi" value="${kayit.temizlemeKaybi}" step="0.01">
    </div>
    <div class="form-group">
    <label>📦 Toplam Mevcut Adet</label>
    <input type="number" id="editTmzToplamMevcutAdet" value="${kayit.toplamMevcutAdet}" step="1">
    </div>
    <div class="form-group">
    <label>📊 Fark</label>
    <input type="number" id="editTmzFark" value="${kayit.fark}" step="0.01">
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editTemizlemeYonetimForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    kayit.durum = document.getElementById('editTmzDurum').value;
    kayit.urunKodu = document.getElementById('editTmzUrunKodu').value.trim();
    kayit.tarih = document.getElementById('editTmzTarih').value;
    kayit.adetA = parseFloat(document.getElementById('editTmzAdetA').value) || 0;
    kayit.adetB = parseFloat(document.getElementById('editTmzAdetB').value) || 0;
    kayit.agirlikBrutA = parseFloat(document.getElementById('editTmzAgirlikBrutA').value) || 0;
    kayit.agirlikBrutB = parseFloat(document.getElementById('editTmzAgirlikBrutB').value) || 0;
    kayit.agirlikNetA = parseFloat(document.getElementById('editTmzAgirlikNetA').value) || 0;
    kayit.agirlikNetB = parseFloat(document.getElementById('editTmzAgirlikNetB').value) || 0;
    kayit.donenAdetA = parseFloat(document.getElementById('editTmzDonenAdetA').value) || 0;
    kayit.donenAdetB = parseFloat(document.getElementById('editTmzDonenAdetB').value) || 0;
    kayit.depodaKalan = parseFloat(document.getElementById('editTmzDepodaKalan').value) || 0;
    kayit.temizlemedeKalan = parseFloat(document.getElementById('editTmzTemizlemedeKalan').value) || 0;
    kayit.fabrikadaKalanA = parseFloat(document.getElementById('editTmzFabrikadaKalanA').value) || 0;
    kayit.fabrikadaKalanB = parseFloat(document.getElementById('editTmzFabrikadaKalanB').value) || 0;
    kayit.birimAgirlikOncesi = parseFloat(document.getElementById('editTmzBirimAgirlikOncesi').value) || 0;
    kayit.birimAgirlikSonrasi = parseFloat(document.getElementById('editTmzBirimAgirlikSonrasi').value) || 0;
    kayit.temizlemeKaybi = parseFloat(document.getElementById('editTmzTemizlemeKaybi').value) || 0;
    kayit.toplamMevcutAdet = parseFloat(document.getElementById('editTmzToplamMevcutAdet').value) || 0;
    kayit.fark = parseFloat(document.getElementById('editTmzFark').value) || 0;
    
    localStorage.setItem('temizlemeYonetimKayitlari', JSON.stringify(temizlemeYonetimKayitlari));
    loadTemizlemeYonetimKayitlari(currentTemizlemeFiltre);
    modal.style.display = 'none';
    showAlert('temizlemeYonetimAlert', 'Kayıt başarıyla güncellendi!', 'success');
    });
    }

    // ==== SEVKİYAT YÖNETİMİ FONKSİYONLARI (BİRLEŞTİRİLMİŞ) ====
    function sevkiyatYonetimEkle(e) {
    e.preventDefault();
    
    const formData = {
    id: Date.now(),
    siparisNo: document.getElementById('sevkSiparisNo').value.trim(),
    urunTuru: document.getElementById('sevkUrunTuru').value.trim(),
    urunNo: document.getElementById('sevkUrunNo').value.trim(),
    sevkeHazirAdet: parseInt(document.getElementById('sevkHazirAdet').value) || 0,
    koliAdet: parseInt(document.getElementById('sevkKoliAdet').value) || 0,
    teslimTarih: document.getElementById('sevkTeslimTarih').value || '',
    teslimAdet: parseInt(document.getElementById('sevkTeslimAdet').value) || 0,
    fabrikadaKalan: parseInt(document.getElementById('sevkFabrikadaKalan').value) || 0,
    teslimAlan: document.getElementById('sevkTeslimAlan').value.trim() || '',
    depoIrsaliye: document.getElementById('sevkDepoIrsaliye').value.trim() || '',
    ekleyen: document.getElementById('sevkEkleyen').value,
    olusturmaTarihi: new Date().toISOString()
    };

    sevkiyatYonetimKayitlari.push(formData);
    localStorage.setItem('sevkiyatYonetimKayitlari', JSON.stringify(sevkiyatYonetimKayitlari));
    
    document.getElementById('sevkiyatYonetimForm').reset();
    loadSevkiyatYonetimKayitlari();
    showAlert('sevkiyatYonetimAlert', 'Sevkiyat kaydı başarıyla eklendi!', 'success');
    }

    function loadSevkiyatYonetimKayitlari() {
    const container = document.getElementById('sevkiyatYonetimKayitlari');
    if (!container) return;

    if (sevkiyatYonetimKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz sevkiyat kaydı bulunmuyor.</p>';
    return;
    }

    let html = '';
    sevkiyatYonetimKayitlari.slice().reverse().forEach(kayit => {
    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>🔢 ${kayit.siparisNo}</strong> - ${kayit.urunTuru}</div>
    <div>
    <button class="btn-edit" onclick="sevkiyatYonetimEdit(${kayit.id})">✏️</button>
    <button class="btn-delete" onclick="sevkiyatYonetimSil(${kayit.id})" style="margin-left: 5px;">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    <div><strong>📦 Ürün No:</strong> ${kayit.urunNo}</div>
    <div><strong>📊 Sevke Hazır Adet:</strong> ${kayit.sevkeHazirAdet}</div>
    <div><strong>📦 Koli Adeti:</strong> ${kayit.koliAdet}</div>
    ${kayit.teslimTarih ? `<div><strong>📅 Teslim Tarihi:</strong> ${new Date(kayit.teslimTarih).toLocaleDateString('tr-TR')}</div>` : ''}
    ${kayit.teslimAdet > 0 ? `<div><strong>📊 Teslim Edilen Adet:</strong> ${kayit.teslimAdet}</div>` : ''}
    ${kayit.fabrikadaKalan > 0 ? `<div><strong>🏭 Fabrikada Kalan:</strong> ${kayit.fabrikadaKalan}</div>` : ''}
    ${kayit.teslimAlan ? `<div><strong>👤 Teslim Alan:</strong> ${kayit.teslimAlan}</div>` : ''}
    ${kayit.depoIrsaliye ? `<div><strong>📋 İrsaliye:</strong> ${kayit.depoIrsaliye}</div>` : ''}
    <div><strong>👤 Ekleyen:</strong> ${kayit.ekleyen}</div>
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function temizleSevkiyatFormu() {
    document.getElementById('sevkiyatYonetimForm').reset();
    }

    function sevkiyatYonetimSil(id) {
    if (confirm('Bu kaydı silmek istediğinizden emin misiniz?')) {
    sevkiyatYonetimKayitlari = sevkiyatYonetimKayitlari.filter(k => k.id !== id);
    localStorage.setItem('sevkiyatYonetimKayitlari', JSON.stringify(sevkiyatYonetimKayitlari));
    loadSevkiyatYonetimKayitlari();
    showAlert('sevkiyatYonetimAlert', 'Kayıt silindi!', 'success');
    }
    }

    function sevkiyatYonetimEdit(id) {
    const kayit = sevkiyatYonetimKayitlari.find(k => k.id === id);
    if (!kayit) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editSevkiyatYonetimForm">
    <div class="form-grid">
    <div class="form-group">
    <label>🔢 Sipariş No</label>
    <input type="text" id="editSevkSiparisNo" value="${kayit.siparisNo}" required>
    </div>
    <div class="form-group">
    <label>📦 Ürün Türü</label>
    <input type="text" id="editSevkUrunTuru" value="${kayit.urunTuru}" required>
    </div>
    <div class="form-group">
    <label>📦 Ürün No</label>
    <input type="text" id="editSevkUrunNo" value="${kayit.urunNo}" required>
    </div>
    <div class="form-group">
    <label>📊 Sevke Hazır Adet</label>
    <input type="number" id="editSevkHazirAdet" value="${kayit.sevkeHazirAdet}" min="0" required>
    </div>
    <div class="form-group">
    <label>📦 Koli Adeti</label>
    <input type="number" id="editSevkKoliAdet" value="${kayit.koliAdet}" min="0" required>
    </div>
    <div class="form-group">
    <label>📅 Teslim Tarihi</label>
    <input type="date" id="editSevkTeslimTarih" value="${kayit.teslimTarih}">
    </div>
    <div class="form-group">
    <label>📊 Teslim Edilen Adet</label>
    <input type="number" id="editSevkTeslimAdet" value="${kayit.teslimAdet}" min="0">
    </div>
    <div class="form-group">
    <label>🏭 Fabrikada Kalan</label>
    <input type="number" id="editSevkFabrikadaKalan" value="${kayit.fabrikadaKalan}" min="0">
    </div>
    <div class="form-group">
    <label>👤 Teslim Alan</label>
    <input type="text" id="editSevkTeslimAlan" value="${kayit.teslimAlan}">
    </div>
    <div class="form-group">
    <label>📋 Depo Giriş İrsaliyesi</label>
    <input type="text" id="editSevkDepoIrsaliye" value="${kayit.depoIrsaliye}">
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editSevkiyatYonetimForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    kayit.siparisNo = document.getElementById('editSevkSiparisNo').value.trim();
    kayit.urunTuru = document.getElementById('editSevkUrunTuru').value.trim();
    kayit.urunNo = document.getElementById('editSevkUrunNo').value.trim();
    kayit.sevkeHazirAdet = parseInt(document.getElementById('editSevkHazirAdet').value) || 0;
    kayit.koliAdet = parseInt(document.getElementById('editSevkKoliAdet').value) || 0;
    kayit.teslimTarih = document.getElementById('editSevkTeslimTarih').value || '';
    kayit.teslimAdet = parseInt(document.getElementById('editSevkTeslimAdet').value) || 0;
    kayit.fabrikadaKalan = parseInt(document.getElementById('editSevkFabrikadaKalan').value) || 0;
    kayit.teslimAlan = document.getElementById('editSevkTeslimAlan').value.trim() || '';
    kayit.depoIrsaliye = document.getElementById('editSevkDepoIrsaliye').value.trim() || '';
    
    localStorage.setItem('sevkiyatYonetimKayitlari', JSON.stringify(sevkiyatYonetimKayitlari));
    loadSevkiyatYonetimKayitlari();
    modal.style.display = 'none';
    showAlert('sevkiyatYonetimAlert', 'Kayıt başarıyla güncellendi!', 'success');
    });
    }

    // ==== YARI MAMÜL FONKSİYONLARI ====
    function yariMamulEkle(e) {
    e.preventDefault();
    
    const formData = {
    id: Date.now(),
    urunAdi: document.getElementById('yariMamulUrunAdi').value.trim(),
    adet: parseInt(document.getElementById('yariMamulAdet').value) || 0,
    hangiParca: document.getElementById('yariMamulHangiParca').value.trim(),
    not: document.getElementById('yariMamulNot').value.trim(),
    ekleyen: document.getElementById('yariMamulEkleyen').value,
    tarih: new Date().toISOString()
    };

    yariMamulKayitlari.push(formData);
    localStorage.setItem('yariMamulKayitlari', JSON.stringify(yariMamulKayitlari));
    
    document.getElementById('yariMamulForm').reset();
    loadYariMamulKayitlari();
    showAlert('yariMamulAlert', 'Yarı mamül kaydı başarıyla eklendi!', 'success');
    }

    function loadYariMamulKayitlari() {
    const container = document.getElementById('yariMamulKayitlari');
    if (!container) return;

    if (yariMamulKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz yarı mamül kaydı bulunmuyor.</p>';
    return;
    }

    let html = '';
    yariMamulKayitlari.slice().reverse().forEach(kayit => {
    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>📦 ${kayit.urunAdi}</strong></div>
    <div>
    <button class="btn-edit" onclick="yariMamulEdit(${kayit.id})">✏️</button>
    <button class="btn-delete" onclick="yariMamulSil(${kayit.id})" style="margin-left: 5px;">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    <div><strong>📊 Adet:</strong> ${kayit.adet}</div>
    <div><strong>🔧 Hangi Parça:</strong> ${kayit.hangiParca}</div>
    <div><strong>👤 Ekleyen:</strong> ${kayit.ekleyen}</div>
    <div><strong>📅 Tarih:</strong> ${new Date(kayit.tarih).toLocaleString('tr-TR')}</div>
    ${kayit.not ? `<div style="grid-column: 1/-1;"><strong>📝 Not:</strong> ${kayit.not}</div>` : ''}
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function yariMamulSil(id) {
    if (confirm('Bu kaydı silmek istediğinizden emin misiniz?')) {
    yariMamulKayitlari = yariMamulKayitlari.filter(k => k.id !== id);
    localStorage.setItem('yariMamulKayitlari', JSON.stringify(yariMamulKayitlari));
    loadYariMamulKayitlari();
    showAlert('yariMamulAlert', 'Kayıt silindi!', 'success');
    }
    }

    function yariMamulEdit(id) {
    const kayit = yariMamulKayitlari.find(k => k.id === id);
    if (!kayit) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editYariMamulForm">
    <div class="form-grid">
    <div class="form-group">
    <label>📦 Ürün Adı</label>
    <input type="text" id="editYariMamulUrunAdi" value="${kayit.urunAdi}" required>
    </div>
    <div class="form-group">
    <label>📊 Adet</label>
    <input type="number" id="editYariMamulAdet" value="${kayit.adet}" min="0" required>
    </div>
    <div class="form-group">
    <label>🔧 Hangi Parça</label>
    <input type="text" id="editYariMamulHangiParca" value="${kayit.hangiParca}" required>
    </div>
    <div class="form-group">
    <label>📝 Not</label>
    <textarea id="editYariMamulNot" rows="3">${kayit.not || ''}</textarea>
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editYariMamulForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    kayit.urunAdi = document.getElementById('editYariMamulUrunAdi').value.trim();
    kayit.adet = parseInt(document.getElementById('editYariMamulAdet').value) || 0;
    kayit.hangiParca = document.getElementById('editYariMamulHangiParca').value.trim();
    kayit.not = document.getElementById('editYariMamulNot').value.trim();
    
    localStorage.setItem('yariMamulKayitlari', JSON.stringify(yariMamulKayitlari));
    loadYariMamulKayitlari();
    modal.style.display = 'none';
    showAlert('yariMamulAlert', 'Kayıt başarıyla güncellendi!', 'success');
    });
    }

    // ==== KALİTE KONTROL FONKSİYONLARI ====
    function kaliteFormSubmit(e) {
    e.preventDefault();
    
    const hatalar = [];
    const hataCheckboxes = document.querySelectorAll('input[name="hatalar"]:checked');
    
    hataCheckboxes.forEach(cb => {
    const parent = cb.closest('.hata-item');
    const hataAdetInputs = parent.querySelectorAll('.hata-adet');
    const iskarta = parseInt(hataAdetInputs[0].value) || 0;
    const geriGiden = parseInt(hataAdetInputs[1].value) || 0;
    
    if (iskarta > 0 || geriGiden > 0) {
    let hataText = cb.value;
    if (cb.id === 'hataDiger') {
    const digerAciklama = document.getElementById('digerHataAciklama').value.trim();
    if (digerAciklama) hataText += `: ${digerAciklama}`;
    }
    hatalar.push({ tur: hataText, iskarta, geriGiden });
    }
    });

    const kayit = {
    id: Date.now(),
    tarih: document.getElementById('tarih').value,
    operator: document.getElementById('operator').value,
    urunKodu: document.getElementById('urunKodu').value,
    toplamAdet: parseInt(document.getElementById('toplamAdet').value),
    siparisNo: document.getElementById('siparisNo').value,
    hatalar: hatalar
    };

    kaliteKayitlari.push(kayit);
    localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
    
    document.getElementById('kaliteForm').reset();
    const now = new Date();
    document.getElementById('tarih').value = now.toISOString().slice(0, 16);
    
    loadKaliteKayitlari();
    loadStats();
    showAlert('kaliteAlert', 'Kalite kontrol kaydı başarıyla eklendi!', 'success');
    }

    function loadKaliteKayitlari() {
    const container = document.getElementById('kaliteKayitlariListesi');
    if (!container) return;

    if (kaliteKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz kalite kontrol kaydı bulunmuyor.</p>';
    return;
    }

    let html = '';
    kaliteKayitlari.slice().reverse().forEach(kayit => {
    const toplamIskarta = kayit.hatalar.reduce((sum, h) => sum + h.iskarta, 0);
    const toplamGeriGiden = kayit.hatalar.reduce((sum, h) => sum + h.geriGiden, 0);
    
    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>📦 ${kayit.urunKodu}</strong> - 🔢 ${kayit.siparisNo}</div>
    <div>
    <button class="btn-edit" onclick="kaliteEdit(${kayit.id})">✏️</button>
    <button class="btn-delete" onclick="kaliteSil(${kayit.id})" style="margin-left: 5px;">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    <div><strong>📅 Tarih:</strong> ${new Date(kayit.tarih).toLocaleString('tr-TR')}</div>
    <div><strong>👤 Operatör:</strong> ${kayit.operator}</div>
    <div><strong>📊 Toplam Adet:</strong> ${kayit.toplamAdet}</div>
    <div><strong>🗑️ Toplam İskarta:</strong> ${toplamIskarta}</div>
    <div><strong>↩️ Toplam Geri Giden:</strong> ${toplamGeriGiden}</div>
    <div style="grid-column: 1/-1;">
    <strong>🚫 Hatalar:</strong>
    ${kayit.hatalar.length > 0 ? kayit.hatalar.map(h => 
    `<div style="margin: 5px 0; padding: 5px; background: #f8f9fa; border-radius: 4px;">
    ${h.tur}: İskarta ${h.iskarta}, Geri Giden ${h.geriGiden}
    </div>`
    ).join('') : 'Hata yok'}
    </div>
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function kaliteSil(id) {
    if (confirm('Bu kaydı silmek istediğinizden emin misiniz?')) {
    kaliteKayitlari = kaliteKayitlari.filter(k => k.id !== id);
    localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
    loadKaliteKayitlari();
    loadStats();
    showAlert('kaliteAlert', 'Kayıt silindi!', 'success');
    }
    }

    function kaliteEdit(id) {
    const kayit = kaliteKayitlari.find(k => k.id === id);
    if (!kayit) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editKaliteForm">
    <div class="form-grid">
    <div class="form-group">
    <label>📅 Tarih/Saat</label>
    <input type="datetime-local" id="editTarih" value="${kayit.tarih.slice(0, 16)}" required>
    </div>
    <div class="form-group">
    <label>👤 Operatör</label>
    <select id="editOperator" required>
    <option value="Esat" ${kayit.operator === 'Esat' ? 'selected' : ''}>Esat</option>
    <option value="Ahmet" ${kayit.operator === 'Ahmet' ? 'selected' : ''}>Ahmet</option>
    <option value="Emre" ${kayit.operator === 'Emre' ? 'selected' : ''}>Emre</option>
    <option value="Gökay" ${kayit.operator === 'Gökay' ? 'selected' : ''}>Gökay</option>
    <option value="Berke" ${kayit.operator === 'Berke' ? 'selected' : ''}>Berke</option>
    <option value="Melisa" ${kayit.operator === 'Melisa' ? 'selected' : ''}>Melisa</option>
    <option value="Evrim" ${kayit.operator === 'Evrim' ? 'selected' : ''}>Evrim</option>
    <option value="Koray" ${kayit.operator === 'Koray' ? 'selected' : ''}>Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label>📦 Ürün Kodu</label>
    <input type="text" id="editUrunKodu" value="${kayit.urunKodu}" required>
    </div>
    <div class="form-group">
    <label>📊 Toplam Adet</label>
    <input type="number" id="editToplamAdet" value="${kayit.toplamAdet}" min="1" required>
    </div>
    <div class="form-group">
    <label>🔢 Sipariş No</label>
    <input type="text" id="editSiparisNo" value="${kayit.siparisNo}" required>
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editKaliteForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    kayit.tarih = document.getElementById('editTarih').value;
    kayit.operator = document.getElementById('editOperator').value;
    kayit.urunKodu = document.getElementById('editUrunKodu').value;
    kayit.toplamAdet = parseInt(document.getElementById('editToplamAdet').value);
    kayit.siparisNo = document.getElementById('editSiparisNo').value;
    
    localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
    loadKaliteKayitlari();
    loadStats();
    modal.style.display = 'none';
    showAlert('kaliteAlert', 'Kayıt başarıyla güncellendi!', 'success');
    });
    }

    // ==== SİPARİŞ HAZIRLIK FONKSİYONLARI ====
    function siparisEkle(e) {
    e.preventDefault();
    
    const siparis = {
    id: Date.now(),
    tarih: document.getElementById('hazirlikTarih').value,
    operator: document.getElementById('hazirlikOperator').value,
    siparisNo: document.getElementById('hazirlikSiparisNo').value,
    urunKodu: document.getElementById('urunKoduSiparis').value,
    siparisAdet: parseInt(document.getElementById('siparisAdet').value),
    hazirA: 0,
    hazirB: 0,
    notlar: document.getElementById('siparisNotlar').value.trim(),
    olusturmaTarihi: new Date().toISOString()
    };

    siparisHazirlikKayitlari.push(siparis);
    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
    
    document.getElementById('siparisEkleForm').reset();
    const today = new Date().toISOString().slice(0, 10);
    document.getElementById('hazirlikTarih').value = today;
    
    loadSiparislerListesi();
    loadStats();
    showAlert('siparisEkleAlert', 'Sipariş başarıyla eklendi!', 'success');
    }

    function loadSiparislerListesi() {
    const container = document.getElementById('siparislerListesi');
    if (!container) return;

    if (siparisHazirlikKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz sipariş bulunmuyor.</p>';
    return;
    }

    let html = '';
    siparisHazirlikKayitlari.slice().reverse().forEach(siparis => {
    const toplamHazir = siparis.hazirA + siparis.hazirB;
    const kalan = siparis.siparisAdet - toplamHazir;
    const tamamlanmaDurumu = kalan <= 0 ? '✅' : '⏳';
    
    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>${tamamlanmaDurumu} 🔢 ${siparis.siparisNo}</strong> - 📦 ${siparis.urunKodu}</div>
    <div>
    <button class="btn-edit" onclick="siparisEdit(${siparis.id})">✏️</button>
    <button class="btn-delete" onclick="siparisSil(${siparis.id})" style="margin-left: 5px;">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    <div><strong>📅 Tarih:</strong> ${new Date(siparis.tarih).toLocaleDateString('tr-TR')}</div>
    <div><strong>👤 Operatör:</strong> ${siparis.operator}</div>
    <div><strong>📊 Sipariş Adedi:</strong> ${siparis.siparisAdet}</div>
    <div><strong>✅ Hazır A:</strong> ${siparis.hazirA}</div>
    <div><strong>✅ Hazır B:</strong> ${siparis.hazirB}</div>
    <div><strong>📊 Kalan:</strong> ${kalan >= 0 ? kalan : 0}</div>
    ${siparis.notlar ? `<div style="grid-column: 1/-1;"><strong>📝 Notlar:</strong> ${siparis.notlar}</div>` : ''}
    </div>
    <div style="margin-top: 10px; display: flex; gap: 10px; justify-content: center;">
    <button class="btn" onclick="artirSiparis(${siparis.id}, 'A')">A +1</button>
    <button class="btn btn-success" onclick="artirSiparis(${siparis.id}, 'B')">B +1</button>
    <button class="btn btn-danger" onclick="azaltSiparis(${siparis.id}, 'A')">A -1</button>
    <button class="btn btn-danger" onclick="azaltSiparis(${siparis.id}, 'B')">B -1</button>
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function artirSiparis(id, tip) {
    const siparis = siparisHazirlikKayitlari.find(s => s.id === id);
    if (siparis) {
    if (tip === 'A') siparis.hazirA++;
    else siparis.hazirB++;
    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
    loadSiparislerListesi();
    }
    }

    function azaltSiparis(id, tip) {
    const siparis = siparisHazirlikKayitlari.find(s => s.id === id);
    if (siparis) {
    if (tip === 'A' && siparis.hazirA > 0) siparis.hazirA--;
    else if (tip === 'B' && siparis.hazirB > 0) siparis.hazirB--;
    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
    loadSiparislerListesi();
    }
    }

    function siparisSil(id) {
    if (confirm('Bu siparişi silmek istediğinizden emin misiniz?')) {
    siparisHazirlikKayitlari = siparisHazirlikKayitlari.filter(s => s.id !== id);
    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
    loadSiparislerListesi();
    loadStats();
    showAlert('siparisEkleAlert', 'Sipariş silindi!', 'success');
    }
    }

    function siparisEdit(id) {
    const siparis = siparisHazirlikKayitlari.find(s => s.id === id);
    if (!siparis) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editSiparisForm">
    <div class="form-grid">
    <div class="form-group">
    <label>📅 Tarih</label>
    <input type="date" id="editHazirlikTarih" value="${siparis.tarih}" required>
    </div>
    <div class="form-group">
    <label>👤 Operatör</label>
    <select id="editHazirlikOperator" required>
    <option value="Esat" ${siparis.operator === 'Esat' ? 'selected' : ''}>Esat</option>
    <option value="Ahmet" ${siparis.operator === 'Ahmet' ? 'selected' : ''}>Ahmet</option>
    <option value="Emre" ${siparis.operator === 'Emre' ? 'selected' : ''}>Emre</option>
    <option value="Gökay" ${siparis.operator === 'Gökay' ? 'selected' : ''}>Gökay</option>
    <option value="Berke" ${siparis.operator === 'Berke' ? 'selected' : ''}>Berke</option>
    <option value="Melisa" ${siparis.operator === 'Melisa' ? 'selected' : ''}>Melisa</option>
    <option value="Evrim" ${siparis.operator === 'Evrim' ? 'selected' : ''}>Evrim</option>
    <option value="Koray" ${siparis.operator === 'Koray' ? 'selected' : ''}>Koray</option>
    </select>
    </div>
    <div class="form-group">
    <label>🔢 Sipariş No</label>
    <input type="text" id="editHazirlikSiparisNo" value="${siparis.siparisNo}" required>
    </div>
    <div class="form-group">
    <label>📦 Ürün Kodu</label>
    <input type="text" id="editUrunKoduSiparis" value="${siparis.urunKodu}" required>
    </div>
    <div class="form-group">
    <label>📊 Sipariş Adedi</label>
    <input type="number" id="editSiparisAdet" value="${siparis.siparisAdet}" min="1" required>
    </div>
    <div class="form-group">
    <label>✅ Hazır A</label>
    <input type="number" id="editHazirA" value="${siparis.hazirA}" min="0">
    </div>
    <div class="form-group">
    <label>✅ Hazır B</label>
    <input type="number" id="editHazirB" value="${siparis.hazirB}" min="0">
    </div>
    <div class="form-group">
    <label>📝 Notlar</label>
    <textarea id="editSiparisNotlar" rows="3">${siparis.notlar || ''}</textarea>
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editSiparisForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    siparis.tarih = document.getElementById('editHazirlikTarih').value;
    siparis.operator = document.getElementById('editHazirlikOperator').value;
    siparis.siparisNo = document.getElementById('editHazirlikSiparisNo').value;
    siparis.urunKodu = document.getElementById('editUrunKoduSiparis').value;
    siparis.siparisAdet = parseInt(document.getElementById('editSiparisAdet').value);
    siparis.hazirA = parseInt(document.getElementById('editHazirA').value) || 0;
    siparis.hazirB = parseInt(document.getElementById('editHazirB').value) || 0;
    siparis.notlar = document.getElementById('editSiparisNotlar').value.trim();
    
    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
    loadSiparislerListesi();
    loadStats();
    modal.style.display = 'none';
    showAlert('siparisEkleAlert', 'Sipariş başarıyla güncellendi!', 'success');
    });
    }

    // ==== PERFORMANS FONKSİYONLARI ====
    function performansEkle(e) {
    e.preventDefault();
    
    const performans = {
    id: Date.now(),
    tarih: document.getElementById('performansTarih').value,
    calisan: document.getElementById('performansCalisan').value,
    ekleyen: document.getElementById('performansEkleyen').value,
    kutuHazirlik: {
    urun: document.getElementById('kutuHazirlikUrun').value.trim(),
    adet: parseInt(document.getElementById('kutuHazirlikAdet').value) || 0,
    sure: parseInt(document.getElementById('kutuHazirlikSure').value) || 0
    },
    koliHazirlama: {
    urun: document.getElementById('koliHazirlamaUrun').value.trim(),
    adet: parseInt(document.getElementById('koliHazirlamaAdet').value) || 0,
    sure: parseInt(document.getElementById('koliHazirlamaSure').value) || 0
    },
    izolasyon: {
    urun: document.getElementById('izolasyonUrunPerf').value.trim(),
    adet: parseInt(document.getElementById('izolasyonAdetPerf').value) || 0,
    sure: parseInt(document.getElementById('izolasyonSure').value) || 0
    },
    kaliteKontrol: {
    urun: document.getElementById('kaliteKontrolUrun').value.trim(),
    adet: parseInt(document.getElementById('kaliteKontrolAdet').value) || 0,
    sure: parseInt(document.getElementById('kaliteKontrolSure').value) || 0
    },
    posetleme: {
    urun: document.getElementById('posetlemeUrunPerf').value.trim(),
    adet: parseInt(document.getElementById('posetlemeAdetPerf').value) || 0,
    sure: parseInt(document.getElementById('posetlemeSure').value) || 0
    },
    urunKutulama: {
    urun: document.getElementById('urunKutulamaUrun').value.trim(),
    adet: parseInt(document.getElementById('urunKutulamaAdet').value) || 0,
    sure: parseInt(document.getElementById('urunKutulamaSure').value) || 0
    },
    ekParca: {
    urun: document.getElementById('ekParcaUrunPerf').value.trim(),
    adet: parseInt(document.getElementById('ekParcaAdetPerf').value) || 0,
    sure: parseInt(document.getElementById('ekParcaSure').value) || 0
    },
    olusturmaTarihi: new Date().toISOString()
    };

    performansKayitlari.push(performans);
    localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
    
    document.getElementById('performansForm').reset();
    const today = new Date().toISOString().slice(0, 10);
    document.getElementById('performansTarih').value = today;
    
    loadPerformansKayitlari();
    loadStats();
    showAlert('performansAlert', 'Performans kaydı başarıyla eklendi!', 'success');
    }

    function loadPerformansKayitlari() {
    const container = document.getElementById('performansKayitlariListesi');
    if (!container) return;

    if (performansKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz performans kaydı bulunmuyor.</p>';
    return;
    }

    let html = '';
    performansKayitlari.slice().reverse().forEach(kayit => {
    html += `
    <div class="kayit-item">
    <div class="kayit-header">
    <div><strong>👤 ${kayit.calisan}</strong> - ${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</div>
    <div>
    <button class="btn-edit" onclick="performansEdit(${kayit.id})">✏️</button>
    <button class="btn-delete" onclick="performansSil(${kayit.id})" style="margin-left: 5px;">🗑️</button>
    </div>
    </div>
    <div class="kayit-details">
    ${kayit.kutuHazirlik.adet > 0 ? `<div><strong>📦 Kutu Hazırlık:</strong> ${kayit.kutuHazirlik.urun} - ${kayit.kutuHazirlik.adet} adet (${kayit.kutuHazirlik.sure} dk)</div>` : ''}
    ${kayit.koliHazirlama.adet > 0 ? `<div><strong>📋 Koli Hazırlama:</strong> ${kayit.koliHazirlama.urun} - ${kayit.koliHazirlama.adet} adet (${kayit.koliHazirlama.sure} dk)</div>` : ''}
    ${kayit.izolasyon.adet > 0 ? `<div><strong>🔧 İzolasyon:</strong> ${kayit.izolasyon.urun} - ${kayit.izolasyon.adet} adet (${kayit.izolasyon.sure} dk)</div>` : ''}
    ${kayit.kaliteKontrol.adet > 0 ? `<div><strong>🔍 Kalite Kontrol:</strong> ${kayit.kaliteKontrol.urun} - ${kayit.kaliteKontrol.adet} adet (${kayit.kaliteKontrol.sure} dk)</div>` : ''}
    ${kayit.posetleme.adet > 0 ? `<div><strong>🛍️ Poşetleme:</strong> ${kayit.posetleme.urun} - ${kayit.posetleme.adet} adet (${kayit.posetleme.sure} dk)</div>` : ''}
    ${kayit.urunKutulama.adet > 0 ? `<div><strong>📦 Ürün Kutulama:</strong> ${kayit.urunKutulama.urun} - ${kayit.urunKutulama.adet} adet (${kayit.urunKutulama.sure} dk)</div>` : ''}
    ${kayit.ekParca.adet > 0 ? `<div><strong>🔩 Ek Parça:</strong> ${kayit.ekParca.urun} - ${kayit.ekParca.adet} adet (${kayit.ekParca.sure} dk)</div>` : ''}
    <div><strong>👤 Ekleyen:</strong> ${kayit.ekleyen}</div>
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function performansSil(id) {
    if (confirm('Bu kaydı silmek istediğinizden emin misiniz?')) {
    performansKayitlari = performansKayitlari.filter(p => p.id !== id);
    localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
    loadPerformansKayitlari();
    loadStats();
    showAlert('performansAlert', 'Kayıt silindi!', 'success');
    }
    }

    function performansEdit(id) {
    const kayit = performansKayitlari.find(p => p.id === id);
    if (!kayit) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editPerformansForm" style="max-height: 500px; overflow-y: auto;">
    <div class="form-grid">
    <div class="form-group">
    <label>📅 Tarih</label>
    <input type="date" id="editPerformansTarih" value="${kayit.tarih}" required>
    </div>
    <div class="form-group">
    <label>👤 Çalışan</label>
    <select id="editPerformansCalisan" required>
    <option value="Esat" ${kayit.calisan === 'Esat' ? 'selected' : ''}>Esat</option>
    <option value="Ahmet" ${kayit.calisan === 'Ahmet' ? 'selected' : ''}>Ahmet</option>
    <option value="Emre" ${kayit.calisan === 'Emre' ? 'selected' : ''}>Emre</option>
    <option value="Gökay" ${kayit.calisan === 'Gökay' ? 'selected' : ''}>Gökay</option>
    <option value="Berke" ${kayit.calisan === 'Berke' ? 'selected' : ''}>Berke</option>
    <option value="Melisa" ${kayit.calisan === 'Melisa' ? 'selected' : ''}>Melisa</option>
    <option value="Evrim" ${kayit.calisan === 'Evrim' ? 'selected' : ''}>Evrim</option>
    <option value="Koray" ${kayit.calisan === 'Koray' ? 'selected' : ''}>Koray</option>
    </select>
    </div>
    </div>
    <h4 style="margin-top: 15px;">Kutu Hazırlık</h4>
    <div class="alt-form-grid">
    <input type="text" id="editKutuHazirlikUrun" placeholder="Ürün adı" value="${kayit.kutuHazirlik.urun}">
    <input type="number" id="editKutuHazirlikAdet" placeholder="Adet" value="${kayit.kutuHazirlik.adet}" min="0">
    <input type="number" id="editKutuHazirlikSure" placeholder="Süre (dk)" value="${kayit.kutuHazirlik.sure}" min="0">
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editPerformansForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    kayit.tarih = document.getElementById('editPerformansTarih').value;
    kayit.calisan = document.getElementById('editPerformansCalisan').value;
    kayit.kutuHazirlik.urun = document.getElementById('editKutuHazirlikUrun').value.trim();
    kayit.kutuHazirlik.adet = parseInt(document.getElementById('editKutuHazirlikAdet').value) || 0;
    kayit.kutuHazirlik.sure = parseInt(document.getElementById('editKutuHazirlikSure').value) || 0;
    
    localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
    loadPerformansKayitlari();
    loadStats();
    modal.style.display = 'none';
    showAlert('performansAlert', 'Kayıt başarıyla güncellendi!', 'success');
    });
    }

    // ==== STOK YÖNETİMİ FONKSİYONLARI ====
    function stokEkleGuncelle(e) {
    e.preventDefault();
    
    const stok = {
    id: Date.now(),
    malzemeTuru: document.getElementById('stokMalzemeTuru').value,
    urunAdi: document.getElementById('stokUrunAdi').value.trim(),
    olculeri: document.getElementById('stokOlculeri').value.trim(),
    mevcut: parseInt(document.getElementById('stokMevcut').value) || 0,
    ekleyen: document.getElementById('stokEkleyen').value,
    tarih: new Date().toISOString()
    };

    stokKayitlari.push(stok);
    localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
    
    document.getElementById('stokForm').reset();
    loadStokListesi();
    tumStoklariOzetGoster();
    showAlert('stokAlert', 'Stok kaydı başarıyla eklendi!', 'success');
    }

    function loadStokListesi() {
    const container = document.getElementById('stokListesi');
    if (!container) return;

    if (stokKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz stok kaydı bulunmuyor.</p>';
    return;
    }

    let html = '';
    stokKayitlari.slice().reverse().forEach(stok => {
    html += `
    <div class="stok-kayit-item">
    <div class="stok-header">
    <h4>📦 ${stok.urunAdi}</h4>
    <div class="stok-actions">
    <button class="btn-edit" onclick="stokEdit(${stok.id})">✏️</button>
    <button class="btn-delete" onclick="stokSil(${stok.id})">🗑️</button>
    </div>
    </div>
    <div class="stok-bilgi">
    <div class="stok-bilgi-item"><span>🔧 Tür:</span> <strong>${stok.malzemeTuru}</strong></div>
    ${stok.olculeri ? `<div class="stok-bilgi-item"><span>📏 Ölçü:</span> <strong>${stok.olculeri}</strong></div>` : ''}
    <div class="stok-bilgi-item"><span>📊 Mevcut:</span> <strong style="color: ${stok.mevcut < 0 ? '#e74c3c' : '#27ae60'};">${stok.mevcut}</strong></div>
    <div class="stok-bilgi-item"><span>👤 Ekleyen:</span> <strong>${stok.ekleyen}</strong></div>
    <div class="stok-bilgi-item"><span>📅 Tarih:</span> <strong>${new Date(stok.tarih).toLocaleString('tr-TR')}</strong></div>
    </div>
    </div>
    `;
    });
    container.innerHTML = html;
    }

    function tumStoklariOzetGoster() {
    const container = document.getElementById('stokOzeti');
    if (!container) return;

    if (stokKayitlari.length === 0) {
    container.innerHTML = '<p style="text-align: center; color: #666;">Stok kaydı bulunmuyor.</p>';
    return;
    }

    const stokOzet = {};
    stokKayitlari.forEach(stok => {
    const key = `${stok.malzemeTuru}-${stok.urunAdi}`;
    if (!stokOzet[key]) {
    stokOzet[key] = {
    malzemeTuru: stok.malzemeTuru,
    urunAdi: stok.urunAdi,
    toplam: 0
    };
    }
    stokOzet[key].toplam += stok.mevcut;
    });

    let html = '<div class="stats-grid">';
    Object.values(stokOzet).forEach(item => {
    html += `
    <div class="stat-card" style="background: linear-gradient(135deg, ${item.toplam < 0 ? '#e74c3c, #c0392b' : '#27ae60, #2ecc71'});">
    <h3>${item.toplam}</h3>
    <p>${item.urunAdi}</p>
    <small>${item.malzemeTuru}</small>
    </div>
    `;
    });
    html += '</div>';
    container.innerHTML = html;
    }

    function temizleStokFormu() {
    document.getElementById('stokForm').reset();
    }

    function tumStoklariYukle() {
    loadStokListesi();
    tumStoklariOzetGoster();
    showAlert('stokAlert', 'Stoklar yenilendi!', 'success');
    }

    function tumStoklariSifirla() {
    if (confirm('Tüm stokları silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!')) {
    stokKayitlari = [];
    localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
    loadStokListesi();
    tumStoklariOzetGoster();
    showAlert('stokAlert', 'Tüm stoklar silindi!', 'success');
    }
    }

    function stokSil(id) {
    if (confirm('Bu stok kaydını silmek istediğinizden emin misiniz?')) {
    stokKayitlari = stokKayitlari.filter(s => s.id !== id);
    localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
    loadStokListesi();
    tumStoklariOzetGoster();
    showAlert('stokAlert', 'Stok kaydı silindi!', 'success');
    }
    }

    function stokEdit(id) {
    const stok = stokKayitlari.find(s => s.id === id);
    if (!stok) return;

    const modal = document.getElementById('editModal');
    const container = document.getElementById('editFormContainer');
    
    container.innerHTML = `
    <form id="editStokForm">
    <div class="form-grid">
    <div class="form-group">
    <label>🔧 Malzeme Türü</label>
    <select id="editStokMalzemeTuru" required>
    <option value="izolasyon" ${stok.malzemeTuru === 'izolasyon' ? 'selected' : ''}>İzolasyon</option>
    <option value="koli" ${stok.malzemeTuru === 'koli' ? 'selected' : ''}>Koli</option>
    <option value="kutu" ${stok.malzemeTuru === 'kutu' ? 'selected' : ''}>Kutu</option>
    <option value="poset" ${stok.malzemeTuru === 'poset' ? 'selected' : ''}>Poşet</option>
    <option value="tapa" ${stok.malzemeTuru === 'tapa' ? 'selected' : ''}>Tapa</option>
    <option value="etiket" ${stok.malzemeTuru === 'etiket' ? 'selected' : ''}>Etiket</option>
    </select>
    </div>
    <div class="form-group">
    <label>📦 Ürün Adı</label>
    <input type="text" id="editStokUrunAdi" value="${stok.urunAdi}" required>
    </div>
    <div class="form-group">
    <label>📏 Ölçüler</label>
    <input type="text" id="editStokOlculeri" value="${stok.olculeri}">
    </div>
    <div class="form-group">
    <label>📊 Mevcut Adet</label>
    <input type="number" id="editStokMevcut" value="${stok.mevcut}" required>
    </div>
    </div>
    <div style="margin-top: 20px; text-align: center;">
    <button type="submit" class="btn">💾 Güncelle</button>
    <button type="button" class="btn btn-danger" onclick="document.getElementById('editModal').style.display='none'" style="margin-left: 10px;">❌ İptal</button>
    </div>
    </form>
    `;
    
    modal.style.display = 'block';
    
    document.getElementById('editStokForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    stok.malzemeTuru = document.getElementById('editStokMalzemeTuru').value;
    stok.urunAdi = document.getElementById('editStokUrunAdi').value.trim();
    stok.olculeri = document.getElementById('editStokOlculeri').value.trim();
    stok.mevcut = parseInt(document.getElementById('editStokMevcut').value) || 0;
    
    localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
    loadStokListesi();
    tumStoklariOzetGoster();
    modal.style.display = 'none';
    showAlert('stokAlert', 'Stok kaydı başarıyla güncellendi!', 'success');
    });
    }

    // ==== İSTATİSTİKLER VE VERİ GÖRÜNTÜLEMESİ ====
    function loadStats() {
    document.getElementById('toplamKaliteKayit').textContent = kaliteKayitlari.length;
    document.getElementById('toplamSiparisKayit').textContent = siparisHazirlikKayitlari.length;
    document.getElementById('toplamPerformansKayit').textContent = performansKayitlari.length;
    
    const tamamlananlar = siparisHazirlikKayitlari.filter(s => {
    const toplamHazir = s.hazirA + s.hazirB;
    return toplamHazir >= s.siparisAdet;
    }).length;
    document.getElementById('tamamlananSiparis').textContent = tamamlananlar;

    const toplamHata = kaliteKayitlari.reduce((sum, k) => {
    return sum + k.hatalar.reduce((hSum, h) => hSum + h.iskarta + h.geriGiden, 0);
    }, 0);
    document.getElementById('toplamHataAdet').textContent = toplamHata;

    const toplamUrun = kaliteKayitlari.reduce((sum, k) => sum + k.toplamAdet, 0);
    const basariOrani = toplamUrun > 0 ? (((toplamUrun - toplamHata) / toplamUrun) * 100).toFixed(1) : 0;
    document.getElementById('basariOrani').textContent = basariOrani + '%';

    document.getElementById('toplamKayit').textContent = kaliteKayitlari.length;
    document.getElementById('toplamSiparis').textContent = siparisHazirlikKayitlari.length;
    document.getElementById('toplamPerformans').textContent = performansKayitlari.length;
    document.getElementById('stokSayisi').textContent = stokKayitlari.length;
    }

    function loadIstatistikler() {
    // Hata istatistikleri
    const hataStats = {};
    kaliteKayitlari.forEach(kayit => {
    kayit.hatalar.forEach(hata => {
    if (!hataStats[hata.tur]) {
    hataStats[hata.tur] = { iskarta: 0, geriGiden: 0 };
    }
    hataStats[hata.tur].iskarta += hata.iskarta;
    hataStats[hata.tur].geriGiden += hata.geriGiden;
    });
    });

    let hataHtml = '<div class="stats-grid">';
    Object.keys(hataStats).forEach(tur => {
    const stats = hataStats[tur];
    hataHtml += `
    <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
    <h3>${stats.iskarta + stats.geriGiden}</h3>
    <p>${tur}</p>
    <small>İskarta: ${stats.iskarta}, Geri: ${stats.geriGiden}</small>
    </div>
    `;
    });
    hataHtml += '</div>';
    document.getElementById('hataIstatistikleri').innerHTML = hataHtml;

    // Performans istatistikleri
    const perfStats = {
    kutuHazirlik: { toplamAdet: 0, toplamSure: 0 },
    koliHazirlama: { toplamAdet: 0, toplamSure: 0 },
    izolasyon: { toplamAdet: 0, toplamSure: 0 },
    kaliteKontrol: { toplamAdet: 0, toplamSure: 0 },
    posetleme: { toplamAdet: 0, toplamSure: 0 },
    urunKutulama: { toplamAdet: 0, toplamSure: 0 },
    ekParca: { toplamAdet: 0, toplamSure: 0 }
    };

    performansKayitlari.forEach(perf => {
    perfStats.kutuHazirlik.toplamAdet += perf.kutuHazirlik.adet;
    perfStats.kutuHazirlik.toplamSure += perf.kutuHazirlik.sure;
    perfStats.koliHazirlama.toplamAdet += perf.koliHazirlama.adet;
    perfStats.koliHazirlama.toplamSure += perf.koliHazirlama.sure;
    perfStats.izolasyon.toplamAdet += perf.izolasyon.adet;
    perfStats.izolasyon.toplamSure += perf.izolasyon.sure;
    perfStats.kaliteKontrol.toplamAdet += perf.kaliteKontrol.adet;
    perfStats.kaliteKontrol.toplamSure += perf.kaliteKontrol.sure;
    perfStats.posetleme.toplamAdet += perf.posetleme.adet;
    perfStats.posetleme.toplamSure += perf.posetleme.sure;
    perfStats.urunKutulama.toplamAdet += perf.urunKutulama.adet;
    perfStats.urunKutulama.toplamSure += perf.urunKutulama.sure;
    perfStats.ekParca.toplamAdet += perf.ekParca.adet;
    perfStats.ekParca.toplamSure += perf.ekParca.sure;
    });

    let perfHtml = '<div class="stats-grid">';
    Object.keys(perfStats).forEach(islem => {
    const stats = perfStats[islem];
    const ortalama = stats.toplamAdet > 0 ? (stats.toplamAdet / (stats.toplamSure / 60)).toFixed(1) : 0;
    perfHtml += `
    <div class="stat-card">
    <h3>${stats.toplamAdet}</h3>
    <p>${islem.replace(/([A-Z])/g, ' $1').trim()}</p>
    <small>${ortalama} adet/saat</small>
    </div>
    `;
    });
    perfHtml += '</div>';
    document.getElementById('performansIstatistikleri').innerHTML = perfHtml;

    // Çalışan bazlı istatistikler
    const calisanStats = {};
    performansKayitlari.forEach(perf => {
    if (!calisanStats[perf.calisan]) {
    calisanStats[perf.calisan] = { toplamAdet: 0, toplamSure: 0 };
    }
    calisanStats[perf.calisan].toplamAdet += 
    perf.kutuHazirlik.adet + perf.koliHazirlama.adet + 
    perf.izolasyon.adet + perf.kaliteKontrol.adet + 
    perf.posetleme.adet + perf.urunKutulama.adet + perf.ekParca.adet;
    calisanStats[perf.calisan].toplamSure += 
    perf.kutuHazirlik.sure + perf.koliHazirlama.sure + 
    perf.izolasyon.sure + perf.kaliteKontrol.sure + 
    perf.posetleme.sure + perf.urunKutulama.sure + perf.ekParca.sure;
    });

    let calisanHtml = '<div class="stats-grid">';
    Object.keys(calisanStats).forEach(calisan => {
    const stats = calisanStats[calisan];
    const verimlilik = stats.toplamSure > 0 ? (stats.toplamAdet / (stats.toplamSure / 60)).toFixed(1) : 0;
    calisanHtml += `
    <div class="stat-card" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
    <h3>${stats.toplamAdet}</h3>
    <p>👤 ${calisan}</p>
    <small>${verimlilik} adet/saat | ${stats.toplamSure} dk</small>
    </div>
    `;
    });
    calisanHtml += '</div>';
    document.getElementById('calisanIstatistikleri').innerHTML = calisanHtml;
    }

    function loadVeriTablosu() {
    const veriTuru = document.getElementById('veriTuru').value;
    const tarihFiltre = document.getElementById('tarihFiltre').value;
    const container = document.getElementById('veriTablosuContainer');

    let veriler = [];
    let basliklar = [];

    switch(veriTuru) {
    case 'kalite':
    veriler = kaliteKayitlari;
    basliklar = ['Tarih', 'Operatör', 'Ürün Kodu', 'Toplam Adet', 'Sipariş No', 'Hatalar'];
    break;
    case 'siparis':
    veriler = siparisHazirlikKayitlari;
    basliklar = ['Tarih', 'Operatör', 'Sipariş No', 'Ürün Kodu', 'Sipariş Adedi', 'Hazır A', 'Hazır B', 'Notlar'];
    break;
    case 'performans':
    veriler = performansKayitlari;
    basliklar = ['Tarih', 'Çalışan', 'İşlemler'];
    break;
    case 'stok':
    veriler = stokKayitlari;
    basliklar = ['Malzeme Türü', 'Ürün Adı', 'Ölçüler', 'Mevcut', 'Ekleyen', 'Tarih'];
    break;
    case 'temizlemeYonetim':
    veriler = temizlemeYonetimKayitlari;
    basliklar = ['Durum', 'Ürün Kodu', 'Tarih', 'Adet A', 'Adet B', 'Ekleyen'];
    break;
    case 'sevkiyatYonetim':
    veriler = sevkiyatYonetimKayitlari;
    basliklar = ['Sipariş No', 'Ürün Türü', 'Ürün No', 'Sevke Hazır', 'Koli Adeti', 'Teslim Adet', 'Ekleyen'];
    break;
    case 'yariMamul':
    veriler = yariMamulKayitlari;
    basliklar = ['Ürün Adı', 'Adet', 'Hangi Parça', 'Not', 'Ekleyen'];
    break;
    case 'gorevler':
    veriler = gorevKayitlari;
    basliklar = ['Başlık', 'Aciliyet', 'Atanan', 'Durum', 'Açıklama'];
    break;
    case 'urunSiparisler':
    veriler = urunSiparisKayitlari;
    basliklar = ['Ürün Adı', 'Adet/Miktar', 'Durum', 'Talep Eden', 'Tarih'];
    break;
    }

    // Tarih filtresi
    if (tarihFiltre !== 'hepsi' && veriler.length > 0) {
    const bugun = new Date();
    bugun.setHours(0, 0, 0, 0);

    veriler = veriler.filter(veri => {
    const veriTarihi = new Date(veri.tarih || veri.olusturmaTarihi);
    veriTarihi.setHours(0, 0, 0, 0);

    switch(tarihFiltre) {
    case 'bugun':
    return veriTarihi.getTime() === bugun.getTime();
    case 'bu-hafta':
    const haftaOnce = new Date(bugun);
    haftaOnce.setDate(haftaOnce.getDate() - 7);
    return veriTarihi >= haftaOnce;
    case 'bu-ay':
    const ayOnce = new Date(bugun);
    ayOnce.setMonth(ayOnce.getMonth() - 1);
    return veriTarihi >= ayOnce;
    default:
    return true;
    }
    });
    }

    if (veriler.length === 0) {
    container.innerHTML = '<p style="text-align: center; padding: 20px;">Görüntülenecek veri bulunmuyor.</p>';
    return;
    }

    let html = '<table style="width: 100%; border-collapse: collapse; margin-top: 20px;">';
    html += '<thead><tr>';
    basliklar.forEach(baslik => {
    html += `<th style="background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; text-align: left; border: 1px solid #ddd;">${baslik}</th>`;
    });
    html += '</tr></thead><tbody>';

    veriler.slice().reverse().forEach((veri, index) => {
    html += `<tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">`;
    
    switch(veriTuru) {
    case 'kalite':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.tarih).toLocaleString('tr-TR')}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.operator}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunKodu}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.toplamAdet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.siparisNo}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.hatalar.length} hata</td>
    `;
    break;
    case 'siparis':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.tarih).toLocaleDateString('tr-TR')}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.operator}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.siparisNo}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunKodu}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.siparisAdet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.hazirA}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.hazirB}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.notlar || '-'}</td>
    `;
    break;
    case 'performans':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.tarih).toLocaleDateString('tr-TR')}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.calisan}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">Detaylı işlemler</td>
    `;
    break;
    case 'stok':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.malzemeTuru}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunAdi}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.olculeri || '-'}</td>
    <td style="padding: 10px; border: 1px solid #ddd; color: ${veri.mevcut < 0 ? '#e74c3c' : '#27ae60'}; font-weight: bold;">${veri.mevcut}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.ekleyen}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.tarih).toLocaleString('tr-TR')}</td>
    `;
    break;
    case 'temizlemeYonetim':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.durum}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunKodu}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.tarih).toLocaleDateString('tr-TR')}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.adetA}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.adetB}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.ekleyen}</td>
    `;
    break;
    case 'sevkiyatYonetim':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.siparisNo}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunTuru}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunNo}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.sevkeHazirAdet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.koliAdet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.teslimAdet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.ekleyen}</td>
    `;
    break;
    case 'yariMamul':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunAdi}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.adet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.hangiParca}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.not || '-'}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.ekleyen}</td>
    `;
    break;
    case 'gorevler':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.baslik}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.aciliyet}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.atanan || 'Herkes'}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.tamamlandi ? '✅ Tamamlandı' : '⏳ Devam Ediyor'}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.aciklama || '-'}</td>
    `;
    break;
    case 'urunSiparisler':
    html += `
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunAdi}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.adetMiktar}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.durum}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${veri.talepEden}</td>
    <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.olusturmaTarihi).toLocaleString('tr-TR')}</td>
    `;
    break;
    }
    
    html += '</tr>';
    });

    html += '</tbody></table>';
    container.innerHTML = html;
    }

    // ==== EXPORT FONKSİYONLARI ====
    function exportToExcel(tip) {
    let data = [];
    let filename = '';

    switch(tip) {
    case 'kalite':
    data = kaliteKayitlari;
    filename = 'kalite_verileri.json';
    break;
    case 'performans':
    data = performansKayitlari;
    filename = 'performans_verileri.json';
    break;
    case 'siparis':
    data = siparisHazirlikKayitlari;
    filename = 'siparis_verileri.json';
    break;
    case 'hepsi':
    data = {
    kalite: kaliteKayitlari,
    siparisHazirlik: siparisHazirlikKayitlari,
    performans: performansKayitlari,
    stok: stokKayitlari,
    temizlemeYonetim: temizlemeYonetimKayitlari,
    sevkiyatYonetim: sevkiyatYonetimKayitlari,
    yariMamul: yariMamulKayitlari,
    gorevler: gorevKayitlari,
    urunSiparisler: urunSiparisKayitlari
    };
    filename = 'tum_veriler.json';
    break;
    }

    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    URL.revokeObjectURL(url);
    }

    function exportCurrentData() {
    loadVeriTablosu();
    const veriTuru = document.getElementById('veriTuru').value;
    exportToExcel(veriTuru === 'kalite' ? 'kalite' : veriTuru === 'performans' ? 'performans' : veriTuru === 'siparis' ? 'siparis' : 'hepsi');
    }

    function exportAllData() {
    exportToExcel('hepsi');
    }

    function importData() {
    const file = document.getElementById('importFile').files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
    try {
    const data = JSON.parse(e.target.result);
    
    if (data.kalite) kaliteKayitlari = data.kalite;
    if (data.siparisHazirlik) siparisHazirlikKayitlari = data.siparisHazirlik;
    if (data.performans) performansKayitlari = data.performans;
    if (data.stok) stokKayitlari = data.stok;
    if (data.temizlemeYonetim) temizlemeYonetimKayitlari = data.temizlemeYonetim;
    if (data.sevkiyatYonetim) sevkiyatYonetimKayitlari = data.sevkiyatYonetim;
    if (data.yariMamul) yariMamulKayitlari = data.yariMamul;
    if (data.gorevler) gorevKayitlari = data.gorevler;
    if (data.urunSiparisler) urunSiparisKayitlari = data.urunSiparisler;

    localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
    localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
    localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
    localStorage.setItem('temizlemeYonetimKayitlari', JSON.stringify(temizlemeYonetimKayitlari));
    localStorage.setItem('sevkiyatYonetimKayitlari', JSON.stringify(sevkiyatYonetimKayitlari));
    localStorage.setItem('yariMamulKayitlari', JSON.stringify(yariMamulKayitlari));
    localStorage.setItem('gorevKayitlari', JSON.stringify(gorevKayitlari));
    localStorage.setItem('urunSiparisKayitlari', JSON.stringify(urunSiparisKayitlari));

    location.reload();
    alert('Veriler başarıyla geri yüklendi!');
    } catch (error) {
    alert('Veri geri yükleme hatası! Dosya geçerli değil.');
    }
    };
    reader.readAsText(file);
    }

    function clearAllData() {
    if (confirm('TÜM VERİLERİ SİLMEK İSTEDİĞİNİZDEN EMİN MİSİNİZ? Bu işlem geri alınamaz!')) {
    if (confirm('SON UYARI: Tüm veriler silinecek!')) {
    localStorage.clear();
    location.reload();
    }
    }
    }
    </script>
</body>
</html>
