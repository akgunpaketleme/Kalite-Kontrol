<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKG Kalite Kontrol ve Paketleme Takip Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        /* Firebase bağlantı durumu için CSS */
        .firebase-status {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        .firebase-connected {
            background: #27ae60;
            color: white;
        }
        .firebase-disconnected {
            background: #e74c3c;
            color: white;
        }
        .firebase-syncing {
            background: #f39c12;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
            justify-content: center;
        }
        .tab {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        .tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        .tab.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }
        .tab-content {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .tab-content.active {
            display: block;
        }
        .tab-content h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2em;
            text-align: center;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            border-radius: 10px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 1.1em;
        }
        .form-group input, .form-group select, .form-group textarea {
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }
        .btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            margin: 5px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }
        .btn-success {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .hata-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
        }
        .hata-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 12px;
            border-radius: 8px;
        }
        .hata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
        }
        .hata-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }
        .hata-item:hover {
            border-color: #3498db;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.1);
        }
        .hata-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
        }
        .hata-item label {
            flex-grow: 1;
            font-weight: 600;
            color: #2c3e50;
        }
        .hata-adet-container {
            display: flex;
            gap: 8px;
        }
        .hata-adet {
            width: 70px;
            padding: 8px;
            text-align: center;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-weight: bold;
        }
        .hata-adet:first-child {
            border-color: #e74c3c;
            color: #e74c3c;
        }
        .hata-adet:last-child {
            border-color: #f39c12;
            color: #f39c12;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
        }
        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .stat-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .alert {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 600;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .kayit-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .kayit-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        .kayit-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            color: #2c3e50;
        }
        .stok-kayit-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .stok-kayit-item:hover {
            border-color: #3498db;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.2);
        }
        .stok-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        .stok-header h4 {
            color: #2c3e50;
            font-size: 1.3em;
        }
        .stok-bilgi {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .stok-bilgi-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        .stok-kontrol {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 8px;
        }
        .stok-btn-small {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .stok-btn-small.minus {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .stok-btn-small:hover {
            transform: scale(1.1);
        }
        .stok-adet-display {
            background: white;
            padding: 8px 15px;
            border: 2px solid #3498db;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.2em;
            color: #2c3e50;
            min-width: 60px;
            text-align: center;
        }
        .stok-adet-input {
            width: 80px;
            padding: 8px;
            text-align: center;
            border: 2px solid #f39c12;
            border-radius: 6px;
            font-weight: bold;
        }
        .stok-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .btn-edit {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        .btn-delete {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        .btn-edit:hover, .btn-delete:hover {
            transform: translateY(-2px);
        }
        .kaydedilmis-stoklar {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border: 2px solid #e9ecef;
        }
        .kaydedilmis-stoklar h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 12px;
            border-radius: 8px;
        }
        .siparis-checkbox-container {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 2px solid #e9ecef;
        }
        .siparis-checkboxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        .checkbox-item:hover {
            background-color: #e9ecef;
        }
        .checkbox-item input[type="checkbox"] {
            transform: scale(1.1);
        }
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            .hata-grid {
                grid-template-columns: 1fr;
            }
            .tabs {
                flex-direction: column;
            }
            .tab {
                width: 100%;
                margin-bottom: 5px;
            }
            .stok-bilgi {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Firebase bağlantı durumu göstergesi -->
    <div id="firebaseStatus" class="firebase-status firebase-disconnected">
        🔴 Bağlantı kuruluyor...
    </div>

    <div class="container">
        <div class="header">
            <h1>🏭 AKG Kalite Kontrol ve Paketleme Takip Sistemi</h1>
            <div style="font-size: 14px; margin-top: 10px; opacity: 0.8;">
                <span id="lastSyncInfo">Son senkronizasyon: Henüz yapılmadı</span>
            </div>
        </div>
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('kalite-kontrol')">🔍 Kalite Kontrol</button>
            <button class="tab" onclick="showTab('siparis-hazirlik')">📋 Sipariş Hazırlığı</button>
            <button class="tab" onclick="showTab('stok')">📦 Stok Yönetimi</button>
            <button class="tab" onclick="showTab('temizleme')">🧽 Temizlemeye Gidecek Ürünler</button>
            <button class="tab" onclick="showTab('sevke-hazir')">📤 Sevke Hazır Ürünler</button>
            <button class="tab" onclick="showTab('sevk-edilen')">🚚 Sevk Edilen Ürünler</button>
            <button class="tab" onclick="showTab('yari-mamul')">🔧 Yarı Mamül Stok</button>
            <button class="tab" onclick="showTab('gunluk-performans')">⚡ Günlük Performans</button>
            <button class="tab" onclick="showTab('istatistikler')">📈 İstatistikler</button>
            <button class="tab" onclick="showTab('veri-goruntule')">📊 Veri Görüntüle</button>
            <button class="tab" onclick="showTab('raporlar')">📋 Raporlar</button>
            <button class="tab" onclick="showTab('ayarlar')">⚙️ Ayarlar</button>
        </div>
        <!-- Kalite Kontrol Tab -->
        <div id="kalite-kontrol" class="tab-content active">
            <h2>🔍 Kalite Kontrol Formu</h2>
            <form id="kaliteForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="tarih">📅 Tarih/Saat</label>
                        <input type="datetime-local" id="tarih" required>
                    </div>
                    <div class="form-group">
                        <label for="operator">👤 Operatörün Adı</label>
                        <select id="operator" required>
                            <option value="">Operatör seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="urunKodu">📦 Ürün Kodu</label>
                        <input type="text" id="urunKodu" placeholder="Ürün kodunu girin" required>
                    </div>
                    <div class="form-group">
                        <label for="toplamAdet">📊 Toplam Adet</label>
                        <input type="number" id="toplamAdet" min="1" placeholder="Toplam ürün adedi" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisNo">🏷️ Sipariş Numarası</label>
                        <input type="text" id="siparisNo" placeholder="Sipariş numarasını girin" required>
                    </div>
                </div>
                <div class="hata-container">
                    <h3>🚫 Hata Türleri ve Adetleri</h3>
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 15px; gap: 8px; font-size: 12px; color: #666; font-weight: bold;">
                        <span style="color: #e74c3c; width: 70px; text-align: center;">İskarta</span>
                        <span style="color: #f39c12; width: 70px; text-align: center;">Geri Giden</span>
                    </div>
                    <div class="hata-grid">
                        <div class="hata-item">
                            <input type="checkbox" id="hata1" name="hatalar" value="Ağız yamukluğu">
                            <label for="hata1">Ağız yamukluğu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata2" name="hatalar" value="Yetersiz kaynak">
                            <label for="hata2">Yetersiz kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata3" name="hatalar" value="Fazla kaynak">
                            <label for="hata3">Fazla kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata4" name="hatalar" value="Bakır erimesi">
                            <label for="hata4">Bakır erimesi</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata5" name="hatalar" value="Dışa kaynak akması">
                            <label for="hata5">Dışa kaynak akması</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata6" name="hatalar" value="Vuruk">
                            <label for="hata6">Vuruk</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata7" name="hatalar" value="Boğum uzunluğu farklılığı">
                            <label for="hata7">Boğum uzunluğu farklılığı</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata8" name="hatalar" value="Boğum yamukluğu">
                            <label for="hata8">Boğum yamukluğu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata9" name="hatalar" value="Çizik ürün">
                            <label for="hata9">Çizik ürün</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata10" name="hatalar" value="Temizlenememiş ürün">
                            <label for="hata10">Temizlenememiş ürün</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata11" name="hatalar" value="Bilyeli ürün">
                            <label for="hata11">Bilyeli ürün</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hataDiger" name="hatalar" value="Diğer">
                            <label for="hataDiger">Diğer</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                    </div>
                    <div id="digerHataDetay" style="display: none; margin-top: 15px;">
                        <label for="digerHataAciklama" style="display: block; margin-bottom: 5px; font-weight: bold;">Diğer Hata Açıklaması:</label>
                        <input type="text" id="digerHataAciklama" placeholder="Hata detayını yazın..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px;">
                    </div>
                </div>
                <button type="submit" class="btn">💾 Kalite Kontrol Kaydını Kaydet</button>
            </form>
            <div id="kaliteAlert"></div>
            <!-- Kalite Kontrol Kayıtları Tablosu -->
            <div id="kaliteKayitlari">
                <h3>📋 Kalite Kontrol Kayıtları</h3>
                <div id="kaliteKayitlariListesi"></div>
            </div>
        </div>
        <!-- Sipariş Hazırlığı Tab -->
        <div id="siparis-hazirlik" class="tab-content">
            <h2>📋 Sipariş Hazırlığı</h2>
            <!-- Sipariş Ekleme Formu -->
            <form id="siparisEkleForm">
                <h3>➕ Yeni Sipariş Ekle</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hazirlikTarih">📅 Tarih</label>
                        <input type="date" id="hazirlikTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikOperator">👤 Operatör</label>
                        <select id="hazirlikOperator" required>
                            <option value="">Operatör seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikSiparisNo">🏷️ Sipariş No</label>
                        <input type="text" id="hazirlikSiparisNo" placeholder="Sipariş numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKoduSiparis">📦 Ürün Kodu</label>
                        <input type="text" id="urunKoduSiparis" placeholder="Ürün kodu" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisAdet">📊 Sipariş Adedi</label>
                        <input type="number" id="siparisAdet" min="1" placeholder="Toplam adet" required>
                    </div>
                </div>
                <button type="submit" class="btn">➕ Sipariş Ekle</button>
            </form>
            <div id="siparisEkleAlert"></div>
            <!-- Siparişler Listesi -->
            <div id="siparislerContainer">
                <h3>📋 Mevcut Siparişler</h3>
                <div id="siparislerListesi"></div>
            </div>
        </div>
        <!-- Stok Yönetimi Tab -->
        <div id="stok" class="tab-content">
            <h2>📦 Stok Yönetimi</h2>
            <!-- Stok Ekleme Formu -->
            <form id="stokForm">
                <h3>➕ Stok Ekle/Güncelle</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="stokMalzemeTuru">🔧 Malzeme Türü</label>
                        <select id="stokMalzemeTuru" required>
                            <option value="">Malzeme türünü seçin</option>
                            <option value="izolasyon">İzolasyon</option>
                            <option value="koli">Koli</option>
                            <option value="kutu">Kutu</option>
                            <option value="poset">Poşet</option>
                            <option value="tapa">Tapa</option>
                            <option value="etiket">Etiket</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="stokUrunAdi">📦 Ürün Adı</label>
                        <input type="text" id="stokUrunAdi" placeholder="Ürün adını yazın" required>
                    </div>
                    <div class="form-group">
                        <label for="stokOlculeri">📏 Ölçüler (İsteğe Bağlı)</label>
                        <input type="text" id="stokOlculeri" placeholder="Örn: 25x15x10 cm">
                    </div>
                    <div class="form-group">
                        <label for="stokMevcut">📊 Mevcut Adet</label>
                        <input type="number" id="stokMevcut" min="0" placeholder="Mevcut adet" required>
                    </div>
                    <div class="form-group">
                        <label for="stokEkleyen">👤 Verileri Ekleyen</label>
                        <select id="stokEkleyen" required>
                            <option value="">Kişi seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" class="btn">💾 Stok Kaydet</button>
                    <button type="button" class="btn btn-success" onclick="temizleStokFormu()">🧹 Formu Temizle</button>
                </div>
            </form>
            <div id="stokAlert"></div>
            <!-- Stok Yönetim Butonları -->
            <div style="text-align: center; margin: 25px 0;">
                <button class="btn btn-success" onclick="tumStoklariYukle()">🔄 Stokları Yenile</button>
                <button class="btn btn-danger" onclick="tumStoklariSifirla()">🗑️ Tüm Stokları Sil</button>
            </div>
            <!-- Tüm Stoklar Özeti -->
            <div class="kaydedilmis-stoklar">
                <h3>📦 Tüm Stoklar Özeti</h3>
                <div id="stokOzeti"></div>
            </div>
            <!-- Stoklar Listesi -->
            <div id="stokListesiContainer">
                <h3>📋 Kayıtlı Stoklar</h3>
                <div id="stokListesi"></div>
            </div>
        </div>
        <!-- Temizlemeye Gidecek Ürünler Tab -->
        <div id="temizleme" class="tab-content">
            <h2>🧽 Temizlemeye Gidecek Ürünler</h2>
            <form id="temizlemeForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="temizlemeSiparisNo">🏷️ Sipariş No</label>
                        <input type="text" id="temizlemeSiparisNo" placeholder="Sipariş numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="temizlemeUrunKodu">📦 Ürün Kodu</label>
                        <input type="text" id="temizlemeUrunKodu" placeholder="Ürün kodu" required>
                    </div>
                    <div class="form-group">
                        <label for="temizlemeSiparisAdet">📊 Sipariş Adeti</label>
                        <input type="number" id="temizlemeSiparisAdet" min="0" placeholder="Sipariş adeti" required>
                    </div>
                    <div class="form-group">
                        <label for="temizlemeGelenAdet">📦 Gelen Ürün Adeti</label>
                        <input type="number" id="temizlemeGelenAdet" min="0" placeholder="Gelen ürün adeti" required>
                    </div>
                    <div class="form-group">
                        <label for="temizlemeAdetKg">⚖️ Adet KG</label>
                        <input type="number" id="temizlemeAdetKg" step="0.01" min="0" placeholder="Adet kg" required>
                    </div>
                    <div class="form-group">
                        <label for="temizlemeToplamKg">⚖️ Toplam KG</label>
                        <input type="number" id="temizlemeToplamKg" step="0.01" min="0" placeholder="Toplam kg" required>
                    </div>
                    <div class="form-group">
                        <label for="temizlemeEkleyen">👤 Verileri Ekleyen</label>
                        <select id="temizlemeEkleyen" required>
                            <option value="">Kişi seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn">💾 Temizleme Kaydını Kaydet</button>
            </form>
            <div id="temizlemeAlert"></div>
            <div id="temizlemeListesi">
                <h3>📋 Temizlemeye Gidecek Ürünler Listesi</h3>
                <div id="temizlemeKayitlari"></div>
            </div>
        </div>
        <!-- Sevke Hazır Ürünler Tab -->
        <div id="sevke-hazir" class="tab-content">
            <h2>📤 Sevke Hazır Ürünler</h2>
            <form id="sevkeHazirForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="sevkeSiparisNo">🏷️ Sipariş No</label>
                        <input type="text" id="sevkeSiparisNo" placeholder="Sipariş numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkeUrunNo">📦 Ürün No</label>
                        <input type="text" id="sevkeUrunNo" placeholder="Ürün numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkeHazirAdet">📊 Sevke Hazır Ürün Adeti</label>
                        <input type="number" id="sevkeHazirAdet" min="0" placeholder="Sevke hazır adet" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkeKoliAdet">📦 Koli Adeti</label>
                        <input type="number" id="sevkeKoliAdet" min="0" placeholder="Koli adeti" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkeHazirEkleyen">👤 Verileri Ekleyen</label>
                        <select id="sevkeHazirEkleyen" required>
                            <option value="">Kişi seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn">💾 Sevke Hazır Kaydını Kaydet</button>
            </form>
            <div id="sevkeHazirAlert"></div>
            <div id="sevkeHazirListesi">
                <h3>📋 Sevke Hazır Ürünler Listesi</h3>
                <div id="sevkeHazirKayitlari"></div>
            </div>
        </div>
        <!-- Sevk Edilen Ürünler Tab -->
        <div id="sevk-edilen" class="tab-content">
            <h2>🚚 Sevk Edilen Ürün Listesi</h2>
            <form id="sevkEdilenForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="sevkSiparisNo">🏷️ Sipariş No</label>
                        <input type="text" id="sevkSiparisNo" placeholder="Sipariş numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkUrunTuru">📦 Ürün Türü</label>
                        <input type="text" id="sevkUrunTuru" placeholder="Ürün türü" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkUrunNo">📦 Ürün No</label>
                        <input type="text" id="sevkUrunNo" placeholder="Ürün numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkTeslimTarih">📅 Teslim Edilen Tarih</label>
                        <input type="date" id="sevkTeslimTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkTeslimAdet">📊 Teslim Edilen Adet</label>
                        <input type="number" id="sevkTeslimAdet" min="0" placeholder="Teslim edilen adet" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkTeslimAlan">👤 Teslim Alan</label>
                        <input type="text" id="sevkTeslimAlan" placeholder="Teslim alan kişi" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkDepoIrsaliye">📋 Depo Giriş İrsaliyesi</label>
                        <input type="text" id="sevkDepoIrsaliye" placeholder="İrsaliye numarası" required>
                    </div>
                    <div class="form-group">
                        <label for="sevkEdilenEkleyen">👤 Verileri Ekleyen</label>
                        <select id="sevkEdilenEkleyen" required>
                            <option value="">Kişi seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn">💾 Sevk Kaydını Kaydet</button>
            </form>
            <div id="sevkEdilenAlert"></div>
            <div id="sevkEdilenListesi">
                <h3>📋 Sevk Edilen Ürünler Listesi</h3>
                <div id="sevkEdilenKayitlari"></div>
            </div>
        </div>
        <!-- Yarı Mamül Stok Tab -->
        <div id="yari-mamul" class="tab-content">
            <h2>🔧 Yarı Mamül Stok</h2>
            <form id="yariMamulForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="yariMamulUrunAdi">📦 Ürün Adı</label>
                        <input type="text" id="yariMamulUrunAdi" placeholder="Ürün adını yazın" required>
                    </div>
                    <div class="form-group">
                        <label for="yariMamulAdet">📊 Adeti</label>
                        <input type="number" id="yariMamulAdet" min="0" placeholder="Adet" required>
                    </div>
                    <div class="form-group">
                        <label for="yariMamulHangiParca">🔧 Hangi Parça</label>
                        <input type="text" id="yariMamulHangiParca" placeholder="Parça bilgisi" required>
                    </div>
                    <div class="form-group">
                        <label for="yariMamulNot">📝 Not</label>
                        <textarea id="yariMamulNot" rows="3" placeholder="Not yazın..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="yariMamulEkleyen">👤 Verileri Ekleyen</label>
                        <select id="yariMamulEkleyen" required>
                            <option value="">Kişi seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn">💾 Yarı Mamül Kaydını Kaydet</button>
            </form>
            <div id="yariMamulAlert"></div>
            <div id="yariMamulListesi">
                <h3>📋 Yarı Mamül Stok Listesi</h3>
                <div id="yariMamulKayitlari"></div>
            </div>
        </div>
        <!-- Günlük Performans Tab -->
        <div id="gunluk-performans" class="tab-content">
            <h2>⚡ Günlük Performans Takibi</h2>
            <form id="performansForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="performansTarih">📅 Tarih</label>
                        <input type="date" id="performansTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="performansCalisan">👤 Çalışan Adı</label>
                        <select id="performansCalisan" required>
                            <option value="">Çalışan seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="performansEkleyen">👤 Verileri Ekleyen</label>
                        <select id="performansEkleyen" required>
                            <option value="">Kişi seçin</option>
                            <option value="Esat">Esat</option>
                            <option value="Ahmet">Ahmet</option>
                            <option value="Emre">Emre</option>
                            <option value="Gökay">Gökay</option>
                            <option value="Berke">Berke</option>
                            <option value="Melisa">Melisa</option>
                            <option value="Evrim">Evrim</option>
                        </select>
                    </div>
                </div>
                <div class="hata-container">
                    <h3>🏭 İşlem Performansları</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <h4>📦 Kutu Hazırlığı</h4>
                            <input type="text" id="kutuHazirlikUrun" placeholder="Ürün adı">
                            <input type="number" id="kutuHazirlikAdet" placeholder="Adet" min="0">
                            <input type="number" id="kutuHazirlikSure" placeholder="Süre (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>📋 Koli Hazırlama</h4>
                            <input type="text" id="koliHazirlamaUrun" placeholder="Ürün adı">
                            <input type="number" id="koliHazirlamaAdet" placeholder="Adet" min="0">
                            <input type="number" id="koliHazirlamaSure" placeholder="Süre (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>🔧 İzolasyon</h4>
                            <input type="text" id="izolasyonUrunPerf" placeholder="Ürün adı">
                            <input type="number" id="izolasyonAdetPerf" placeholder="Adet" min="0">
                            <input type="number" id="izolasyonSure" placeholder="Süre (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>🔍 Kalite Kontrol</h4>
                            <input type="text" id="kaliteKontrolUrun" placeholder="Ürün adı">
                            <input type="number" id="kaliteKontrolAdet" placeholder="Adet" min="0">
                            <input type="number" id="kaliteKontrolSure" placeholder="Süre (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>🛍️ Poşetleme</h4>
                            <input type="text" id="posetlemeUrunPerf" placeholder="Ürün adı">
                            <input type="number" id="posetlemeAdetPerf" placeholder="Adet" min="0">
                            <input type="number" id="posetlemeSure" placeholder="Süre (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>📦 Ürün Kutulama</h4>
                            <input type="text" id="urunKutulamaUrun" placeholder="Ürün adı">
                            <input type="number" id="urunKutulamaAdet" placeholder="Adet" min="0">
                            <input type="number" id="urunKutulamaSure" placeholder="Süre (dk)" min="0">
                        </div>
                        <div class="form-group">
                            <h4>🔩 Ek Parça</h4>
                            <input type="text" id="ekParcaUrunPerf" placeholder="Ürün adı">
                            <input type="number" id="ekParcaAdetPerf" placeholder="Adet" min="0">
                            <input type="number" id="ekParcaSure" placeholder="Süre (dk)" min="0">
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn">💾 Performans Kaydını Kaydet</button>
            </form>
            <div id="performansAlert"></div>
            <!-- Son Performans Kayıtları -->
            <div id="performansKayitlariContainer">
                <h3>📊 Son Performans Kayıtları</h3>
                <div id="performansKayitlariListesi"></div>
            </div>
        </div>
        <!-- İstatistikler Tab -->
        <div id="istatistikler" class="tab-content">
            <h2>📈 İstatistikler</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKaliteKayit">0</h3>
                    <p>Toplam Kalite Kontrol</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparisKayit">0</h3>
                    <p>Toplam Sipariş</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformansKayit">0</h3>
                    <p>Toplam Performans</p>
                </div>
                <div class="stat-card">
                    <h3 id="tamamlananSiparis">0</h3>
                    <p>Tamamlanan Sipariş</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamHataAdet">0</h3>
                    <p>Toplam Hatalı Ürün</p>
                </div>
                <div class="stat-card">
                    <h3 id="basariOrani">0%</h3>
                    <p>Başarı Oranı</p>
                </div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">📊 Hata İstatistikleri</h4>
                <div id="hataIstatistikleri"></div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">⏱️ Performans İstatistikleri</h4>
                <div id="performansIstatistikleri"></div>
            </div>
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">👥 Çalışan Bazlı İstatistikler</h4>
                <div id="calisanIstatistikleri"></div>
            </div>
        </div>
        <!-- Veri Görüntüle Tab -->
        <div id="veri-goruntule" class="tab-content">
            <h2>📊 Veri Görüntüle</h2>
            <div class="form-grid" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label for="veriTuru">🔍 Veri Türü</label>
                    <select id="veriTuru" onchange="loadVeriTablosu()">
                        <option value="kalite">Kalite Kontrol Verileri</option>
                        <option value="siparis">Sipariş Hazırlık Verileri</option>
                        <option value="performans">Performans Verileri</option>
                        <option value="stok">Stok Verileri</option>
                        <option value="temizleme">Temizleme Verileri</option>
                        <option value="sevkeHazir">Sevke Hazır Verileri</option>
                        <option value="sevkEdilen">Sevk Edilen Verileri</option>
                        <option value="yariMamul">Yarı Mamül Stok Verileri</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tarihFiltre">📅 Tarih Filtresi</label>
                    <select id="tarihFiltre" onchange="loadVeriTablosu()">
                        <option value="hepsi">Tüm Tarihler</option>
                        <option value="bugun">Bugün</option>
                        <option value="bu-hafta">Bu Hafta</option>
                        <option value="bu-ay">Bu Ay</option>
                    </select>
                </div>
            </div>
            <div id="veriTablosuContainer"></div>
            <div style="margin-top: 20px; text-align: center;">
                <button class="btn" onclick="exportCurrentData()">📥 Görüntülenen Verileri Excel'e Aktar</button>
            </div>
        </div
                    </div>
        <!-- Raporlar Tab -->
        <div id="raporlar" class="tab-content">
            <h2>📋 Raporlar</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKayit">0</h3>
                    <p>Toplam Kalite Kontrol Kaydı</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparis">0</h3>
                    <p>Sipariş Hazırlık Kaydı</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformans">0</h3>
                    <p>Performans Kaydı</p>
                </div>
                <div class="stat-card">
                    <h3 id="stokSayisi">0</h3>
                    <p>Stok Kalemi</p>
                </div>
            </div>
            <div style="margin-top: 30px;">
                <button class="btn" onclick="exportToExcel('kalite')">📥 Kalite Verilerini Excel'e Aktar</button>
                <button class="btn btn-success" onclick="exportToExcel('performans')">📥 Performans Verilerini Excel'e Aktar</button>
                <button class="btn" onclick="exportToExcel('siparis')">📥 Sipariş Verilerini Excel'e Aktar</button>
                <button class="btn btn-danger" onclick="exportToExcel('hepsi')">📥 Tüm Verileri Excel'e Aktar</button>
            </div>
        </div>
        <!-- Ayarlar Tab -->
        <div id="ayarlar" class="tab-content">
            <h2>⚙️ Sistem Ayarları</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>💾 Veri Yedekleme</label>
                    <button class="btn" onclick="exportAllData()">Tüm Verileri Yedekle (JSON)</button>
                </div>
                <div class="form-group">
                    <label>📤 Veri Geri Yükleme</label>
                    <input type="file" id="importFile" accept=".json" onchange="importData()">
                </div>
                <div class="form-group">
                    <label>🗑️ Veri Temizleme</label>
                    <button class="btn btn-danger" onclick="clearAllData()">Tüm Verileri Temizle</button>
                </div>
            </div>
        </div>
        <!-- Modal for Editing -->
        <div id="editModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
            <div style="background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto;">
                <span style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;" onclick="document.getElementById('editModal').style.display='none'">&times;</span>
                <h3>✏️ Düzenle</h3>
                <div id="editFormContainer"></div>
            </div>
        </div>
    </div>

    <!-- Firebase entegrasyonu -->
    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDJYEEnWdlfzCVFg-w_IIWE5QbNFzN9hqA",
            authDomain: "akgkalitekontrol.firebaseapp.com",
            databaseURL: "https://akgkalitekontrol-default-rtdb.firebaseio.com",
            projectId: "akgkalitekontrol",
            storageBucket: "akgkalitekontrol.firebasestorage.app",
            messagingSenderId: "315960243910",
            appId: "1:315960243910:web:bb97b559d7d6648e5fc9c7",
            measurementId: "G-BX4HH38KHE"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const analytics = getAnalytics(app);

        // Firebase veritabanı referansları
        const dbRefs = {
            kaliteKayitlari: ref(database, 'kaliteKayitlari'),
            siparisHazirlikKayitlari: ref(database, 'siparisHazirlikKayitlari'),
            performansKayitlari: ref(database, 'performansKayitlari'),
            stokKayitlari: ref(database, 'stokKayitlari'),
            temizlemeKayitlari: ref(database, 'temizlemeKayitlari'),
            sevkeHazirKayitlari: ref(database, 'sevkeHazirKayitlari'),
            sevkEdilenKayitlari: ref(database, 'sevkEdilenKayitlari'),
            yariMamulKayitlari: ref(database, 'yariMamulKayitlari')
        };

        // Global değişkenler
        window.kaliteKayitlari = [];
        window.siparisHazirlikKayitlari = [];
        window.performansKayitlari = [];
        window.stokKayitlari = [];
        window.temizlemeKayitlari = [];
        window.sevkeHazirKayitlari = [];
        window.sevkEdilenKayitlari = [];
        window.yariMamulKayitlari = [];

        // Firebase bağlantı durumu
        let isFirebaseConnected = false;

        // Firebase bağlantı durumunu güncelle
        function updateFirebaseStatus(status, message) {
            const statusEl = document.getElementById('firebaseStatus');
            const lastSyncEl = document.getElementById('lastSyncInfo');
            
            statusEl.className = `firebase-status firebase-${status}`;
            
            switch(status) {
                case 'connected':
                    statusEl.textContent = '🟢 Bağlı - Veriler senkronize';
                    isFirebaseConnected = true;
                    break;
                case 'disconnected':
                    statusEl.textContent = '🔴 Bağlantı yok';
                    isFirebaseConnected = false;
                    break;
                case 'syncing':
                    statusEl.textContent = '🟡 Senkronize ediliyor...';
                    break;
                case 'error':
                    statusEl.textContent = '❌ Bağlantı hatası';
                    isFirebaseConnected = false;
                    break;
            }

            if (message && lastSyncEl) {
                lastSyncEl.textContent = `Son senkronizasyon: ${message}`;
            }
        }

        // Firebase'e veri kaydetme
        async function saveToFirebase(dataType, data) {
            if (!isFirebaseConnected) {
                console.warn('Firebase bağlantısı yok, sadece localStorage\'a kaydediliyor');
                return false;
            }

            updateFirebaseStatus('syncing');
            
            try {
                // Veriyi Firebase'e kaydet
                await set(dbRefs[dataType], data.reduce((obj, item) => {
                    obj[item.id] = item;
                    return obj;
                }, {}));

                updateFirebaseStatus('connected', new Date().toLocaleString('tr-TR'));
                return true;
                
            } catch (error) {
                console.error('Firebase\'e kaydetme hatası:', error);
                updateFirebaseStatus('error');
                return false;
            }
        }

        // Hem localStorage hem de Firebase'e kaydetme
        window.saveData = async function(dataType, data) {
            // Her zaman localStorage'a kaydet (hızlı erişim için)
            localStorage.setItem(dataType, JSON.stringify(data));
            
            // Firebase'e de kaydetmeye çalış
            await saveToFirebase(dataType, data);
        };

        // Real-time dinleyicileri kurma
        function setupRealtimeListeners() {
            Object.keys(dbRefs).forEach(dataType => {
                onValue(dbRefs[dataType], (snapshot) => {
                    const data = snapshot.val();
                    const dataArray = data ? Object.values(data) : [];
                    
                    // Global değişkenleri güncelle
                    switch(dataType) {
                        case 'kaliteKayitlari':
                            if (JSON.stringify(window.kaliteKayitlari) !== JSON.stringify(dataArray)) {
                                window.kaliteKayitlari = dataArray;
                                localStorage.setItem('kaliteKayitlari', JSON.stringify(window.kaliteKayitlari));
                                loadKaliteKayitlari();
                                loadStats();
                            }
                            break;
                        case 'siparisHazirlikKayitlari':
                            if (JSON.stringify(window.siparisHazirlikKayitlari) !== JSON.stringify(dataArray)) {
                                window.siparisHazirlikKayitlari = dataArray;
                                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(window.siparisHazirlikKayitlari));
                                loadSiparislerListesi();
                                loadStats();
                            }
                            break;
                        case 'performansKayitlari':
                            if (JSON.stringify(window.performansKayitlari) !== JSON.stringify(dataArray)) {
                                window.performansKayitlari = dataArray;
                                localStorage.setItem('performansKayitlari', JSON.stringify(window.performansKayitlari));
                                loadPerformansKayitlari();
                                loadStats();
                            }
                            break;
                        case 'stokKayitlari':
                            if (JSON.stringify(window.stokKayitlari) !== JSON.stringify(dataArray)) {
                                window.stokKayitlari = dataArray;
                                localStorage.setItem('stokKayitlari', JSON.stringify(window.stokKayitlari));
                                loadStokListesi();
                                tumStoklariOzetGoster();
                            }
                            break;
                        case 'temizlemeKayitlari':
                            if (JSON.stringify(window.temizlemeKayitlari) !== JSON.stringify(dataArray)) {
                                window.temizlemeKayitlari = dataArray;
                                localStorage.setItem('temizlemeKayitlari', JSON.stringify(window.temizlemeKayitlari));
                                loadTemizlemeKayitlari();
                            }
                            break;
                        case 'sevkeHazirKayitlari':
                            if (JSON.stringify(window.sevkeHazirKayitlari) !== JSON.stringify(dataArray)) {
                                window.sevkeHazirKayitlari = dataArray;
                                localStorage.setItem('sevkeHazirKayitlari', JSON.stringify(window.sevkeHazirKayitlari));
                                loadSevkeHazirKayitlari();
                            }
                            break;
                        case 'sevkEdilenKayitlari':
                            if (JSON.stringify(window.sevkEdilenKayitlari) !== JSON.stringify(dataArray)) {
                                window.sevkEdilenKayitlari = dataArray;
                                localStorage.setItem('sevkEdilenKayitlari', JSON.stringify(window.sevkEdilenKayitlari));
                                loadSevkEdilenKayitlari();
                            }
                            break;
                        case 'yariMamulKayitlari':
                            if (JSON.stringify(window.yariMamulKayitlari) !== JSON.stringify(dataArray)) {
                                window.yariMamulKayitlari = dataArray;
                                localStorage.setItem('yariMamulKayitlari', JSON.stringify(window.yariMamulKayitlari));
                                loadYariMamulKayitlari();
                            }
                            break;
                    }
                    
                    updateFirebaseStatus('connected', new Date().toLocaleString('tr-TR'));
                }, (error) => {
                    console.error('Firebase dinleme hatası:', error);
                    updateFirebaseStatus('error');
                });
            });
        }

        // Firebase'den veri yükleme
        async function loadFromFirebase() {
            updateFirebaseStatus('syncing');
            
            try {
                // Tüm verileri Firebase'den yükle
                const promises = Object.keys(dbRefs).map(async (key) => {
                    const snapshot = await get(dbRefs[key]);
                    const data = snapshot.val();
                    return { key, data: data ? Object.values(data) : [] };
                });

                const results = await Promise.all(promises);
                
                // Global değişkenleri güncelle
                results.forEach(({ key, data }) => {
                    switch(key) {
                        case 'kaliteKayitlari':
                            window.kaliteKayitlari = data;
                            break;
                        case 'siparisHazirlikKayitlari':
                            window.siparisHazirlikKayitlari = data;
                            break;
                        case 'performansKayitlari':
                            window.performansKayitlari = data;
                            break;
                        case 'stokKayitlari':
                            window.stokKayitlari = data;
                            break;
                        case 'temizlemeKayitlari':
                            window.temizlemeKayitlari = data;
                            break;
                        case 'sevkeHazirKayitlari':
                            window.sevkeHazirKayitlari = data;
                            break;
                        case 'sevkEdilenKayitlari':
                            window.sevkEdilenKayitlari = data;
                            break;
                        case 'yariMamulKayitlari':
                            window.yariMamulKayitlari = data;
                            break;
                    }
                });

                updateFirebaseStatus('connected', new Date().toLocaleString('tr-TR'));
                
            } catch (error) {
                console.error('Firebase\'den veri yükleme hatası:', error);
                updateFirebaseStatus('error');
                
                // Hata durumunda localStorage'dan yükle
                loadFromLocalStorage();
            }
        }

        // LocalStorage'dan yükleme (fallback)
        function loadFromLocalStorage() {
            window.kaliteKayitlari = JSON.parse(localStorage.getItem('kaliteKayitlari') || '[]');
            window.siparisHazirlikKayitlari = JSON.parse(localStorage.getItem('siparisHazirlikKayitlari') || '[]');
            window.performansKayitlari = JSON.parse(localStorage.getItem('performansKayitlari') || '[]');
            window.stokKayitlari = JSON.parse(localStorage.getItem('stokKayitlari') || '[]');
            window.temizlemeKayitlari = JSON.parse(localStorage.getItem('temizlemeKayitlari') || '[]');
            window.sevkeHazirKayitlari = JSON.parse(localStorage.getItem('sevkeHazirKayitlari') || '[]');
            window.sevkEdilenKayitlari = JSON.parse(localStorage.getItem('sevkEdilenKayitlari') || '[]');
            window.yariMamulKayitlari = JSON.parse(localStorage.getItem('yariMamulKayitlari') || '[]');
        }

        // Başlatma
        document.addEventListener('DOMContentLoaded', async function() {
            // Önce localStorage'dan yükle (hızlı başlangıç için)
            loadFromLocalStorage();
            
            // Başlangıç tarihleri ayarla
            const now = new Date();
            const nowString = now.toISOString().slice(0, 16);
            const today = now.toISOString().slice(0, 10);
            
            document.getElementById('tarih').value = nowString;
            document.getElementById('hazirlikTarih').value = today;
            document.getElementById('performansTarih').value = today;
            document.getElementById('sevkTeslimTarih').value = today;
            
            // UI'ı başlat
            refreshAllUI();
            
            // Firebase'den verileri yükle
            await loadFromFirebase();
            
            // Real-time dinleyicileri kur
            setupRealtimeListeners();
            
            console.log('🏭 Firebase entegrasyonu tamamlandı!');
        });

        // UI'ı yenileme
        function refreshAllUI() {
            loadKaliteKayitlari();
            loadSiparislerListesi();
            loadPerformansKayitlari();
            loadStokListesi();
            loadTemizlemeKayitlari();
            loadSevkeHazirKayitlari();
            loadSevkEdilenKayitlari();
            loadYariMamulKayitlari();
            loadStats();
            loadIstatistikler();
            loadVeriTablosu();
            tumStoklariOzetGoster();
        }

    </script>

    <script>
        // Alert gösterme fonksiyonu
        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (!container) return;
            const alertClass = type === 'success' ? 'alert-success' : 'alert-error';
            container.innerHTML = `<div class="alert ${alertClass}">${message}</div>`;
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        // Tab değiştirme
        function showTab(tabName) {
            // Tüm tab content'leri gizle
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            // Tüm tab butonlarının active class'ını kaldır
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            // Seçilen tab'i göster
            document.getElementById(tabName).classList.add('active');
            // Tıklanan tab butonuna active class ekle
            event.target.classList.add('active');
            
            // Tab değiştiğinde ilgili verileri yükle
            if (tabName === 'stok') {
                tumStoklariOzetGoster();
            } else if (tabName === 'istatistikler') {
                loadIstatistikler();
            } else if (tabName === 'veri-goruntule') {
                loadVeriTablosu();
            } else if (tabName === 'raporlar') {
                loadStats();
            }
        }

        // Kalite kontrol form submit
        document.getElementById('kaliteForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                tarih: document.getElementById('tarih').value,
                operator: document.getElementById('operator').value,
                urunKodu: document.getElementById('urunKodu').value.trim(),
                toplamAdet: parseInt(document.getElementById('toplamAdet').value),
                siparisNo: document.getElementById('siparisNo').value.trim(),
                hatalar: []
            };

            // Seçili hataları topla
            const hataCheckboxes = document.querySelectorAll('input[name="hatalar"]:checked');
            hataCheckboxes.forEach(checkbox => {
                const hataItem = checkbox.closest('.hata-item');
                const hataAdetInputs = hataItem.querySelectorAll('.hata-adet');
                const iskartaAdet = parseInt(hataAdetInputs[0].value) || 0;
                const geriGidenAdet = parseInt(hataAdetInputs[1].value) || 0;

                if (iskartaAdet > 0 || geriGidenAdet > 0) {
                    let hataTuru = checkbox.value;
                    // Diğer seçenegi için açıklama ekle
                    if (hataTuru === 'Diğer') {
                        const digerAciklama = document.getElementById('digerHataAciklama').value.trim();
                        if (digerAciklama) {
                            hataTuru = `Diğer: ${digerAciklama}`;
                        }
                    }
                    formData.hatalar.push({
                        tur: hataTuru,
                        iskartaAdet: iskartaAdet,
                        geriGidenAdet: geriGidenAdet
                    });
                }
            });

            if (formData.hatalar.length === 0) {
                showAlert('kaliteAlert', 'Lütfen en az bir hata türü seçin ve adetlerini girin!', 'error');
                return;
            }

            // Kaydet
            kaliteKayitlari.push(formData);
            await saveData('kaliteKayitlari', kaliteKayitlari);

            // Form temizle
            document.getElementById('kaliteForm').reset();
            const now = new Date().toISOString().slice(0, 16);
            document.getElementById('tarih').value = now;
            // Diğer hata detay alanını gizle
            document.getElementById('digerHataDetay').style.display = 'none';

            showAlert('kaliteAlert', 'Kalite kontrol kaydı başarıyla kaydedildi!', 'success');
        });

        // Sipariş ekleme form submit
        document.getElementById('siparisEkleForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                tarih: document.getElementById('hazirlikTarih').value,
                operator: document.getElementById('hazirlikOperator').value,
                siparisNo: document.getElementById('hazirlikSiparisNo').value.trim(),
                urunKodu: document.getElementById('urunKoduSiparis').value.trim(),
                siparisAdet: parseInt(document.getElementById('siparisAdet').value),
                durum: 'hazirlanıyor',
                olusturmaTarihi: new Date().toISOString(),
                checkboxDurum: {
                    koli: false,
                    kutu: false,
                    izolasyon: false,
                    etiket: false,
                    posetMevcut: false,
                    tapaMevcut: false
                }
            };

            siparisHazirlikKayitlari.push(formData);
            await saveData('siparisHazirlikKayitlari', siparisHazirlikKayitlari);

            // Form temizle
            document.getElementById('siparisEkleForm').reset();
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('hazirlikTarih').value = today;

            showAlert('siparisEkleAlert', 'Sipariş başarıyla eklendi!', 'success');
        });

        // Performans form submit
        document.getElementById('performansForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const performansData = {
                id: Date.now(),
                tarih: document.getElementById('performansTarih').value,
                calisan: document.getElementById('performansCalisan').value,
                ekleyen: document.getElementById('performansEkleyen').value,
                islemler: []
            };

            // İşlem verilerini topla
            const islemler = [
                { ad: 'Kutu Hazırlığı', urun: 'kutuHazirlikUrun', adet: 'kutuHazirlikAdet', sure: 'kutuHazirlikSure' },
                { ad: 'Koli Hazırlama', urun: 'koliHazirlamaUrun', adet: 'koliHazirlamaAdet', sure: 'koliHazirlamaSure' },
                { ad: 'İzolasyon', urun: 'izolasyonUrunPerf', adet: 'izolasyonAdetPerf', sure: 'izolasyonSure' },
                { ad: 'Kalite Kontrol', urun: 'kaliteKontrolUrun', adet: 'kaliteKontrolAdet', sure: 'kaliteKontrolSure' },
                { ad: 'Poşetleme', urun: 'posetlemeUrunPerf', adet: 'posetlemeAdetPerf', sure: 'posetlemeSure' },
                { ad: 'Ürün Kutulama', urun: 'urunKutulamaUrun', adet: 'urunKutulamaAdet', sure: 'urunKutulamaSure' },
                { ad: 'Ek Parça', urun: 'ekParcaUrunPerf', adet: 'ekParcaAdetPerf', sure: 'ekParcaSure' }
            ];

            islemler.forEach(islem => {
                const urun = document.getElementById(islem.urun).value.trim();
                const adet = parseInt(document.getElementById(islem.adet).value) || 0;
                const sure = parseInt(document.getElementById(islem.sure).value) || 0;

                if (urun && adet > 0 && sure > 0) {
                    performansData.islemler.push({
                        ad: islem.ad,
                        urun: urun,
                        adet: adet,
                        sure: sure,
                        hiz: Math.round((adet / sure) * 60 * 100) / 100 // adet/saat
                    });
                }
            });

            if (performansData.islemler.length === 0) {
                showAlert('performansAlert', 'Lütfen en az bir işlem performansı girin!', 'error');
                return;
            }

            performansKayitlari.push(performansData);
            await saveData('performansKayitlari', performansKayitlari);

            document.getElementById('performansForm').reset();
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('performansTarih').value = today;

            showAlert('performansAlert', 'Performans kaydı başarıyla kaydedildi!', 'success');
        });

        // Stok form submit
        document.getElementById('stokForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const malzemeTuru = document.getElementById('stokMalzemeTuru').value;
            const urunAdi = document.getElementById('stokUrunAdi').value.trim();
            const olculeri = document.getElementById('stokOlculeri').value.trim();
            const mevcutAdet = parseInt(document.getElementById('stokMevcut').value) || 0;
            const ekleyen = document.getElementById('stokEkleyen').value;

            if (!malzemeTuru || !urunAdi || !ekleyen) {
                showAlert('stokAlert', 'Lütfen malzeme türü, ürün adı ve ekleyen kişiyi giriniz!', 'error');
                return;
            }

            // Aynı ürün var mı kontrol et
            const existingIndex = stokKayitlari.findIndex(stok =>
                stok.malzemeTuru === malzemeTuru &&
                stok.urunAdi.toLowerCase() === urunAdi.toLowerCase() &&
                stok.olculeri === olculeri
            );

            const yeniStok = {
                id: existingIndex !== -1 ? stokKayitlari[existingIndex].id : Date.now(),
                malzemeTuru: malzemeTuru,
                urunAdi: urunAdi,
                olculeri: olculeri,
                mevcutAdet: mevcutAdet,
                ekleyen: ekleyen,
                sonGuncelleme: new Date().toISOString()
            };

            if (existingIndex !== -1) {
                stokKayitlari[existingIndex] = yeniStok;
                showAlert('stokAlert', 'Stok başarıyla güncellendi!', 'success');
            } else {
                stokKayitlari.push(yeniStok);
                showAlert('stokAlert', 'Stok başarıyla eklendi!', 'success');
            }

            await saveData('stokKayitlari', stokKayitlari);
            loadStokListesi();
            tumStoklariOzetGoster();
            temizleStokFormu();
        });

        // Temizleme form submit
        document.getElementById('temizlemeForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                siparisNo: document.getElementById('temizlemeSiparisNo').value.trim(),
                urunKodu: document.getElementById('temizlemeUrunKodu').value.trim(),
                siparisAdet: parseInt(document.getElementById('temizlemeSiparisAdet').value) || 0,
                gelenAdet: parseInt(document.getElementById('temizlemeGelenAdet').value) || 0,
                adetKg: parseFloat(document.getElementById('temizlemeAdetKg').value) || 0,
                toplamKg: parseFloat(document.getElementById('temizlemeToplamKg').value) || 0,
                ekleyen: document.getElementById('temizlemeEkleyen').value,
                tarih: new Date().toISOString()
            };

            temizlemeKayitlari.push(formData);
            await saveData('temizlemeKayitlari', temizlemeKayitlari);
            
            document.getElementById('temizlemeForm').reset();
            showAlert('temizlemeAlert', 'Temizleme kaydı başarıyla eklendi!', 'success');
        });

        // Sevke hazır form submit
        document.getElementById('sevkeHazirForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                siparisNo: document.getElementById('sevkeSiparisNo').value.trim(),
                urunNo: document.getElementById('sevkeUrunNo').value.trim(),
                sevkeHazirAdet: parseInt(document.getElementById('sevkeHazirAdet').value) || 0,
                koliAdet: parseInt(document.getElementById('sevkeKoliAdet').value) || 0,
                ekleyen: document.getElementById('sevkeHazirEkleyen').value,
                tarih: new Date().toISOString()
            };

            sevkeHazirKayitlari.push(formData);
            await saveData('sevkeHazirKayitlari', sevkeHazirKayitlari);
            
            document.getElementById('sevkeHazirForm').reset();
            showAlert('sevkeHazirAlert', 'Sevke hazır kaydı başarıyla eklendi!', 'success');
        });

        // Sevk edilen form submit
        document.getElementById('sevkEdilenForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                siparisNo: document.getElementById('sevkSiparisNo').value.trim(),
                urunTuru: document.getElementById('sevkUrunTuru').value.trim(),
                urunNo: document.getElementById('sevkUrunNo').value.trim(),
                teslimTarih: document.getElementById('sevkTeslimTarih').value,
                teslimAdet: parseInt(document.getElementById('sevkTeslimAdet').value) || 0,
                teslimAlan: document.getElementById('sevkTeslimAlan').value.trim(),
                depoIrsaliye: document.getElementById('sevkDepoIrsaliye').value.trim(),
                ekleyen: document.getElementById('sevkEdilenEkleyen').value,
                tarih: new Date().toISOString()
            };

            sevkEdilenKayitlari.push(formData);
            await saveData('sevkEdilenKayitlari', sevkEdilenKayitlari);
            
            document.getElementById('sevkEdilenForm').reset();
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('sevkTeslimTarih').value = today;

            showAlert('sevkEdilenAlert', 'Sevk edilen kaydı başarıyla eklendi!', 'success');
        });

        // Yarı mamül form submit
        document.getElementById('yariMamulForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = {
                id: Date.now(),
                urunAdi: document.getElementById('yariMamulUrunAdi').value.trim(),
                adet: parseInt(document.getElementById('yariMamulAdet').value) || 0,
                hangiParca: document.getElementById('yariMamulHangiParca').value.trim(),
                not: document.getElementById('yariMamulNot').value.trim(),
                ekleyen: document.getElementById('yariMamulEkleyen').value,
                tarih: new Date().toISOString()
            };

            yariMamulKayitlari.push(formData);
            await saveData('yariMamulKayitlari', yariMamulKayitlari);
            
            document.getElementById('yariMamulForm').reset();
            showAlert('yariMamulAlert', 'Yarı mamül kaydı başarıyla eklendi!', 'success');
        });

        // Diğer hata checkbox listener
        document.getElementById('hataDiger').addEventListener('change', function() {
            const digerDetay = document.getElementById('digerHataDetay');
            digerDetay.style.display = this.checked ? 'block' : 'none';
        });

        // Checkbox durumu güncelle
        async function updateCheckbox(siparisId, checkboxType, isChecked) {
            const siparis = siparisHazirlikKayitlari.find(s => s.id === siparisId);
            if (siparis) {
                if (!siparis.checkboxDurum) {
                    siparis.checkboxDurum = {};
                }
                siparis.checkboxDurum[checkboxType] = isChecked;
                await saveData('siparisHazirlikKayitlari', siparisHazirlikKayitlari);
            }
        }

        // Stok fonksiyonları
        function temizleStokFormu() {
            document.getElementById('stokForm').reset();
        }

        async function stokArttir(id) {
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok) {
                stok.mevcutAdet++;
                stok.sonGuncelleme = new Date().toISOString();
                await saveData('stokKayitlari', stokKayitlari);
                loadStokListesi();
                tumStoklariOzetGoster();
            }
        }

        async function stokAzalt(id) {
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok && stok.mevcutAdet > 0) {
                stok.mevcutAdet--;
                stok.sonGuncelleme = new Date().toISOString();
                await saveData('stokKayitlari', stokKayitlari);
                loadStokListesi();
                tumStoklariOzetGoster();
            }
        }

        async function stokGuncelle(id) {
            const input = document.getElementById(`adet-${id}`);
            const yeniAdet = parseInt(input.value);
            if (isNaN(yeniAdet) || yeniAdet < 0) {
                alert('Lütfen geçerli bir adet giriniz!');
                return;
            }
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok) {
                stok.mevcutAdet = yeniAdet;
                stok.sonGuncelleme = new Date().toISOString();
                await saveData('stokKayitlari', stokKayitlari);
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'Stok başarıyla güncellendi!', 'success');
            }
        }

        function stokDuzenle(id) {
            const stok = stokKayitlari.find(s => s.id === id);
            if (stok) {
                document.getElementById('stokMalzemeTuru').value = stok.malzemeTuru;
                document.getElementById('stokUrunAdi').value = stok.urunAdi;
                document.getElementById('stokOlculeri').value = stok.olculeri;
                document.getElementById('stokMevcut').value = stok.mevcutAdet;
                document.getElementById('stokEkleyen').value = stok.ekleyen;
                // Form'un en üstüne scroll
                document.getElementById('stokForm').scrollIntoView({ behavior: 'smooth' });
            }
        }

        async function stokSil(id) {
            if (confirm('Bu stok kaydını silmek istediğinizden emin misiniz?')) {
                window.stokKayitlari = window.stokKayitlari.filter(s => s.id !== id);
                await saveData('stokKayitlari', window.stokKayitlari);
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'Stok kaydı silindi!', 'success');
            }
        }

        function tumStoklariYukle() {
            loadStokListesi();
            tumStoklariOzetGoster();
            showAlert('stokAlert', 'Stoklar yenilendi!', 'success');
        }

        async function tumStoklariSifirla() {
            if (confirm('Tüm stok kayıtlarını silmek istediğinizden emin misiniz? Bu işlem geri alınamaz!')) {
                window.stokKayitlari = [];
                await saveData('stokKayitlari', window.stokKayitlari);
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'Tüm stok kayıtları silindi!', 'success');
            }
        }

        // Silme fonksiyonları
        async function kaliteKaydiSil(id) {
            if (confirm('Bu kalite kontrol kaydını silmek istediğinizden emin misiniz?')) {
                window.kaliteKayitlari = window.kaliteKayitlari.filter(k => k.id !== id);
                await saveData('kaliteKayitlari', window.kaliteKayitlari);
                loadKaliteKayitlari();
                loadStats();
                showAlert('kaliteAlert', 'Kalite kontrol kaydı silindi!', 'success');
            }
        }

        async function performansKaydiSil(id) {
            if (confirm('Bu performans kaydını silmek istediğinizden emin misiniz?')) {
                window.performansKayitlari = window.performansKayitlari.filter(k => k.id !== id);
                await saveData('performansKayitlari', window.performansKayitlari);
                loadPerformansKayitlari();
                loadStats();
                showAlert('performansAlert', 'Performans kaydı silindi!', 'success');
            }
        }

        async function siparisSil(id) {
            if (confirm('Bu siparişi silmek istediğinizden emin misiniz?')) {
                window.siparisHazirlikKayitlari = window.siparisHazirlikKayitlari.filter(s => s.id !== id);
                await saveData('siparisHazirlikKayitlari', window.siparisHazirlikKayitlari);
                loadSiparislerListesi();
                loadStats();
                showAlert('siparisEkleAlert', 'Sipariş silindi!', 'success');
            }
        }

        // Tüm mevcut load fonksiyonları buraya gelecek...
        // (loadKaliteKayitlari, loadSiparislerListesi, vs. - bunları mevcut kodunuzdan kopyalayın)
        
        // Kalite kayıtlarını tablo formatında yükle
        function loadKaliteKayitlari() {
            const container = document.getElementById('kaliteKayitlariListesi');
            if (!container) return;
            
            if (kaliteKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Henüz kalite kontrol kaydı bulunmuyor.</p>';
                return;
            }

            // Basit tablo gösterimi
            let html = '<div style="overflow-x: auto; background: white; border-radius: 8px; border: 2px solid #e9ecef; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">';
            html += '<table style="width: 100%; border-collapse: collapse; font-size: 14px;">';
            html += `
                <thead style="background: linear-gradient(135deg, #3498db, #2980b9); color: white;">
                    <tr>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center;">📅 Tarih</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center;">👤 Operatör</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center;">📦 Ürün</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center;">📊 Adet</th>
                        <th style="padding: 12px 8px; border: 1px solid #2980b9; text-align: center;">🚫 İşlem</th>
                    </tr>
                </thead>
                <tbody>
            `;

            kaliteKayitlari.slice().reverse().forEach((kayit, index) => {
                html += `<tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;">${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;">${kayit.operator}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;">${kayit.urunKodu}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;">${kayit.toplamAdet}</td>`;
                html += `<td style="padding: 10px 8px; border: 1px solid #dee2e6; text-align: center;"><button onclick="kaliteKaydiSil(${kayit.id})" style="background: #e74c3c; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">🗑️ Sil</button></td>`;
                html += '</tr>';
            });

            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        // Diğer load fonksiyonlarını da benzer şekilde basitleştirin...
        function loadSiparislerListesi() {
            // Basit sipariş listesi
            console.log('Siparişler yüklendi:', siparisHazirlikKayitlari.length);
        }

        function loadPerformansKayitlari() {
            // Basit performans listesi
            console.log('Performans kayıtları yüklendi:', performansKayitlari.length);
        }

        function loadStokListesi() {
            // Basit stok listesi
            console.log('Stok kayıtları yüklendi:', stokKayitlari.length);
        }

        function loadTemizlemeKayitlari() {
            console.log('Temizleme kayıtları yüklendi:', temizlemeKayitlari.length);
        }

        function loadSevkeHazirKayitlari() {
            console.log('Sevke hazır kayıtları yüklendi:', sevkeHazirKayitlari.length);
        }

        function loadSevkEdilenKayitlari() {
            console.log('Sevk edilen kayıtları yüklendi:', sevkEdilenKayitlari.length);
        }

        function loadYariMamulKayitlari() {
            console.log('Yarı mamül kayıtları yüklendi:', yariMamulKayitlari.length);
        }

        function tumStoklariOzetGoster() {
            console.log('Stok özeti güncellendi');
        }

        function loadStats() {
            // İstatistikleri güncelle
            if (document.getElementById('toplamKaliteKayit')) {
                document.getElementById('toplamKaliteKayit').textContent = kaliteKayitlari.length;
                document.getElementById('toplamSiparisKayit').textContent = siparisHazirlikKayitlari.length;
                document.getElementById('toplamPerformansKayit').textContent = performansKayitlari.length;
            }
        }

        function loadIstatistikler() {
            console.log('İstatistikler yüklendi');
        }

        function loadVeriTablosu() {
            console.log('Veri tablosu yüklendi');
        }

        // Export fonksiyonları (basitleştirilmiş)
        function exportToExcel(type) {
            alert(`${type} verileri Excel'e aktarılacak (Bu özellik henüz eklenmedi)`);
        }

        function exportAllData() {
            const allData = {
                kaliteKayitlari: kaliteKayitlari,
                siparisHazirlikKayitlari: siparisHazirlikKayitlari,
                performansKayitlari: performansKayitlari,
                stokKayitlari: stokKayitlari,
                temizlemeKayitlari: temizlemeKayitlari,
                sevkeHazirKayitlari: sevkeHazirKayitlari,
                sevkEdilenKayitlari: sevkEdilenKayitlari,
                yariMamulKayitlari: yariMamulKayitlari,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `uretim_sistemi_yedek_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            alert('Tüm veriler başarıyla yedeklendi!');
        }

        function importData() {
            alert('Veri geri yükleme özelliği henüz eklenmedi');
        }

        function clearAllData() {
            if (confirm('TÜM VERİLER SİLİNECEK! Bu işlem geri alınamaz. Devam etmek istediğinizden emin misiniz?')) {
                localStorage.clear();
                location.reload();
            }
        }

        console.log('🏭 Üretim Takip Sistemi Firebase ile başarıyla yüklendi!');

    </script>
</body>
</html>
