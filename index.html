<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKG Kalite Kontrol ve Ãœretim Takip Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .tabs {
            display: flex;
            background: #34495e;
            overflow-x: auto;
            padding: 0 20px;
        }
        
        .tab {
            padding: 12px 18px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 500;
            font-size: 0.9em;
        }
        
        .tab:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tab.active {
            color: #3498db;
            border-bottom-color: #3498db;
            background: rgba(52, 152, 219, 0.1);
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease-in;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95em;
        }
        
        .form-group input,
        .form-group select {
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .hata-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }
        
        .hata-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.2em;
            text-align: center;
        }
        
        .hata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
        }
        
        .hata-item {
            display: flex;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .hata-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
        }
        
        .hata-item label {
            flex: 1;
            margin: 0;
            cursor: pointer;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .hata-adet-container {
            display: flex;
            gap: 8px;
            margin-left: 10px;
        }
        
        .hata-adet {
            width: 70px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
        }
        
        .hata-adet:first-child {
            border-color: #e74c3c;
        }
        
        .hata-adet:last-child {
            border-color: #f39c12;
        }
        
        /* Stok YÃ¶netimi Stilleri */
        .stok-form-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .stok-form-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.3em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .stok-kayit-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .stok-kayit-item:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .stok-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stok-header h4 {
            color: #2c3e50;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stok-bilgi {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .stok-bilgi-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        .stok-bilgi-item strong {
            color: #2c3e50;
            font-size: 0.9em;
        }
        
        .stok-bilgi-item span {
            color: #666;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .stok-kontrol {
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .stok-adet-display {
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
            min-width: 60px;
            text-align: center;
            padding: 10px 15px;
            background: white;
            border: 2px solid #3498db;
            border-radius: 8px;
        }
        
        .stok-adet-input {
            width: 80px;
            padding: 8px;
            border: 2px solid #3498db;
            border-radius: 6px;
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .stok-btn-small {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 45px;
        }
        
        .stok-btn-small:hover {
            background: #2980b9;
            transform: scale(1.05);
        }
        
        .stok-btn-small.minus {
            background: #e74c3c;
        }
        
        .stok-btn-small.minus:hover {
            background: #c0392b;
        }
        
        .stok-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }
        
        .kaydedilmis-stoklar {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            margin-bottom: 20px;
        }
        
        .kaydedilmis-stoklar h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.2em;
        }
        
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #219a52);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .btn-edit {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            padding: 8px 15px;
            font-size: 12px;
            margin: 2px;
        }
        
        .btn-delete {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 8px 15px;
            font-size: 12px;
            margin: 2px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .kayit-item {
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .kayit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .kayit-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 0.9em;
            color: #666;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .stat-card p {
            opacity: 0.9;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .hata-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .tabs { padding: 0 10px; }
            .tab { padding: 10px 12px; font-size: 0.8em; }
            .container { margin: 5px; border-radius: 10px; }
            .tab-content { padding: 20px 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ­ AKG Kalite Kontrol ve Ãœretim Takip Sistemi</h1>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="showTab('kalite-kontrol')">ğŸ“ Kalite Kontrol</div>
            <div class="tab" onclick="showTab('siparis-hazirlik')">ğŸ“‹ SipariÅŸ HazÄ±rlÄ±ÄŸÄ±</div>
            <div class="tab" onclick="showTab('stok')">ğŸ“¦ Stok</div>
            <div class="tab" onclick="showTab('gunluk-performans')">â±ï¸ GÃ¼nlÃ¼k Performans</div>
            <div class="tab" onclick="showTab('istatistikler')">ğŸ“ˆ Ä°statistikler</div>
            <div class="tab" onclick="showTab('veri-goruntule')">ğŸ“Š Veri GÃ¶rÃ¼ntÃ¼le</div>
            <div class="tab" onclick="showTab('raporlar')">ğŸ“‹ Raporlar</div>
            <div class="tab" onclick="showTab('ayarlar')">âš™ï¸ Ayarlar</div>
        </div>
                <!-- Kalite Kontrol Tab -->
        <div id="kalite-kontrol" class="tab-content active">
            <h2>ğŸ” Kalite Kontrol Formu</h2>
            <form id="kaliteForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="tarih">ğŸ“… Tarih/Saat</label>
                        <input type="datetime-local" id="tarih" required>
                    </div>
                    <div class="form-group">
                        <label for="operator">ğŸ‘¤ OperatÃ¶rÃ¼n AdÄ±</label>
                        <input type="text" id="operator" placeholder="OperatÃ¶r adÄ±nÄ± yazÄ±n" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKodu">ğŸ“¦ ÃœrÃ¼n Kodu</label>
                        <input type="text" id="urunKodu" placeholder="ÃœrÃ¼n kodunu girin" required>
                    </div>
                    <div class="form-group">
                        <label for="toplamAdet">ğŸ“Š Toplam Adet</label>
                        <input type="number" id="toplamAdet" min="1" placeholder="Toplam Ã¼rÃ¼n adedi" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisNo">ğŸ·ï¸ SipariÅŸ NumarasÄ±</label>
                        <input type="text" id="siparisNo" placeholder="SipariÅŸ numarasÄ±nÄ± girin" required>
                    </div>
                </div>
                
                <div class="hata-container">
                    <h3>ğŸš« Hata TÃ¼rleri ve Adetleri</h3>
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 15px; gap: 8px; font-size: 12px; color: #666; font-weight: bold;">
                        <span style="color: #e74c3c; width: 70px; text-align: center;">Ä°skarta</span>
                        <span style="color: #f39c12; width: 70px; text-align: center;">Geri Giden</span>
                    </div>
                    <div class="hata-grid">
                        <div class="hata-item">
                            <input type="checkbox" id="hata1" name="hatalar" value="AÄŸÄ±z yamukluÄŸu">
                            <label for="hata1">AÄŸÄ±z yamukluÄŸu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata2" name="hatalar" value="Yetersiz kaynak">
                            <label for="hata2">Yetersiz kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata3" name="hatalar" value="Fazla kaynak">
                            <label for="hata3">Fazla kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata4" name="hatalar" value="BakÄ±r erimesi">
                            <label for="hata4">BakÄ±r erimesi</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata5" name="hatalar" value="DÄ±ÅŸa kaynak akmasÄ±">
                            <label for="hata5">DÄ±ÅŸa kaynak akmasÄ±</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata6" name="hatalar" value="Vuruk">
                            <label for="hata6">Vuruk</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata7" name="hatalar" value="BoÄŸum uzunluÄŸu farklÄ±lÄ±ÄŸÄ±">
                            <label for="hata7">BoÄŸum uzunluÄŸu farklÄ±lÄ±ÄŸÄ±</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata8" name="hatalar" value="BoÄŸum yamukluÄŸu">
                            <label for="hata8">BoÄŸum yamukluÄŸu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata9" name="hatalar" value="Ã‡izik Ã¼rÃ¼n">
                            <label for="hata9">Ã‡izik Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata10" name="hatalar" value="TemizlenememiÅŸ Ã¼rÃ¼n">
                            <label for="hata10">TemizlenememiÅŸ Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata11" name="hatalar" value="Bilyeli Ã¼rÃ¼n">
                            <label for="hata11">Bilyeli Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hataDiger" name="hatalar" value="DiÄŸer">
                            <label for="hataDiger">DiÄŸer</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                    </div>
                    <div id="digerHataDetay" style="display: none; margin-top: 15px;">
                        <label for="digerHataAciklama" style="display: block; margin-bottom: 5px; font-weight: bold;">DiÄŸer Hata AÃ§Ä±klamasÄ±:</label>
                        <input type="text" id="digerHataAciklama" placeholder="Hata detayÄ±nÄ± yazÄ±n..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px;">
                    </div>
                </div>
                
                <button type="submit" class="btn">ğŸ’¾ Kalite Kontrol KaydÄ±nÄ± Kaydet</button>
            </form>
            
            <div id="kaliteAlert"></div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div id="tumStoklar" class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti"></div>
            </div>
            
            <div id="kaliteKayitlar">
                <h3>ğŸ“‹ Son Kalite Kontrol KayÄ±tlarÄ±</h3>
                <div id="kaliteKayitlariListesi"></div>
            </div>
        </div>

        <!-- SipariÅŸ HazÄ±rlÄ±ÄŸÄ± Tab -->
        <div id="siparis-hazirlik" class="tab-content">
            <h2>ğŸ“‹ SipariÅŸ HazÄ±rlÄ±ÄŸÄ±</h2>
            
            <form id="siparisEkleForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hazirlikTarih">ğŸ“… Tarih</label>
                        <input type="date" id="hazirlikTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikOperator">ğŸ‘¤ HazÄ±rlayan</label>
                        <input type="text" id="hazirlikOperator" placeholder="HazÄ±rlayan kiÅŸinin adÄ±" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikSiparisNo">ğŸ·ï¸ SipariÅŸ No</label>
                        <input type="text" id="hazirlikSiparisNo" placeholder="SipariÅŸ numarasÄ±" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKoduSiparis">ğŸ“¦ ÃœrÃ¼n Kodu</label>
                        <input type="text" id="urunKoduSiparis" placeholder="ÃœrÃ¼n kodu (Ã¶rn: 1509)" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisAdet">ğŸ“Š SipariÅŸ Adedi</label>
                        <input type="number" id="siparisAdet" min="1" placeholder="SipariÅŸ adedi (Ã¶rn: 1000)" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-success">â• SipariÅŸ Ekle</button>
            </form>
            
            <div id="siparisEkleAlert"></div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti2"></div>
            </div>
            
            <hr style="margin: 30px 0; border: 1px solid #e9ecef;">
            
            <h3>ğŸ“‹ Mevcut SipariÅŸler</h3>
            <div id="siparislerListesi"></div>
        </div>

        <!-- Stok Tab - Yeni TasarÄ±m -->
        <div id="stok" class="tab-content">
            <h2>ğŸ“¦ Stok Takibi</h2>
            
            <!-- Stok Ekleme Formu -->
            <div class="stok-form-container">
                <h3>ğŸ“ Yeni Stok Ekle / GÃ¼ncelle</h3>
                <form id="stokForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="stokMalzemeTuru">ğŸ”§ Malzeme TÃ¼rÃ¼</label>
                            <select id="stokMalzemeTuru" required>
                                <option value="">Malzeme seÃ§in...</option>
                                <option value="izolasyon">ğŸ”§ Ä°zolasyon</option>
                                <option value="koli">ğŸ“¦ Koli</option>
                                <option value="kutu">ğŸ“¦ Kutu</option>
                                <option value="poset">ğŸ›ï¸ PoÅŸet</option>
                                <option value="tapa">ğŸ”´ Tapa</option>
                                <option value="etiket">ğŸ·ï¸ Etiket</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="stokUrunAdi">ğŸ“¦ ÃœrÃ¼n AdÄ±</label>
                            <input type="text" id="stokUrunAdi" placeholder="ÃœrÃ¼n adÄ±nÄ± yazÄ±n" required>
                        </div>
                        <div class="form-group">
                            <label for="stokOlculeri">ğŸ“ Ã–lÃ§Ã¼ler/Ã–zellikler</label>
                            <input type="text" id="stokOlculeri" placeholder="Ã–lÃ§Ã¼ler veya Ã¶zellikler (isteÄŸe baÄŸlÄ±)">
                        </div>
                        <div class="form-group">
                            <label for="stokMevcut">ğŸ“Š Mevcut Adet</label>
                            <input type="number" id="stokMevcut" min="0" placeholder="0" required>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button type="submit" class="btn btn-success">ğŸ’¾ Stok Kaydet</button>
                        <button type="button" class="btn" onclick="temizleStokFormu()">ğŸ—‘ï¸ Formu Temizle</button>
                    </div>
                </form>
            </div>

            <!-- KaydedilmiÅŸ Stoklar -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“‹ KaydedilmiÅŸ Stoklar</h3>
                <div id="stokListesi"></div>
            </div>

            <div style="margin-top: 30px; text-align: center;">
                <button class="btn btn-success" onclick="tumStoklariYukle()" style="margin: 5px;">ğŸ”„ StoklarÄ± Yenile</button>
                <button class="btn btn-danger" onclick="tumStoklariSifirla()" style="margin: 5px;">ğŸ—‘ï¸ TÃ¼m StoklarÄ± SÄ±fÄ±rla</button>
            </div>
            
            <div id="stokAlert"></div>
        </div>

        <!-- GÃ¼nlÃ¼k Performans Tab -->
        <div id="gunluk-performans" class="tab-content">
            <h2>â±ï¸ GÃ¼nlÃ¼k Ã‡alÄ±ÅŸan PerformansÄ±</h2>
            <form id="performansForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="performansTarih">ğŸ“… Tarih</label>
                        <input type="date" id="performansTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="performansCalisan">ğŸ‘¤ Ã‡alÄ±ÅŸan AdÄ±</label>
                        <input type="text" id="performansCalisan" placeholder="Ã‡alÄ±ÅŸan adÄ±nÄ± yazÄ±n" required>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>ğŸ“¦ Kutu HazÄ±rlÄ±ÄŸÄ±</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="kutuHazirlikUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="kutuHazirlikAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="kutuHazirlikSure" min="0" placeholder="0">
                        </div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>ğŸ“¦ Koli HazÄ±rlama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="koliHazirlamaUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="koliHazirlamaAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="koliHazirlamaSure" min="0" placeholder="0">
                        </div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>ğŸ”§ Ä°zolasyon Bantlama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="izolasyonUrunPerf" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="izolasyonAdetPerf" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="izolasyonSure" min="0" placeholder="0">
                        </div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>ğŸ” Kalite Kontrol</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="kaliteKontrolUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="kaliteKontrolAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="kaliteKontrolSure" min="0" placeholder="0">
                        </div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>ğŸ›ï¸ PoÅŸetleme</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="posetlemeUrunPerf" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="posetlemeAdetPerf" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="posetlemeSure" min="0" placeholder="0">
                        </div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>ğŸ“¦ ÃœrÃ¼n Kutulama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="urunKutulamaUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="urunKutulamaAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="urunKutulamaSure" min="0" placeholder="0">
                        </div>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #e9ecef;">
                        <h4>âš™ï¸ Ek ParÃ§a HazÄ±rlama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="ekParcaUrunPerf" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="ekParcaAdetPerf" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="ekParcaSure" min="0" placeholder="0">
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn">ğŸ’¾ Performans KaydÄ±nÄ± Kaydet</button>
            </form>
            
            <div id="performansAlert"></div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti3"></div>
            </div>
            
            <div id="performansKayitlar">
                <h3>ğŸ“‹ Son Performans KayÄ±tlarÄ±</h3>
                <div id="performansKayitlariListesi"></div>
            </div>
        </div>
                <!-- Ä°statistikler Tab -->
        <div id="istatistikler" class="tab-content">
            <h2>ğŸ“ˆ Ä°statistikler</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKaliteKayit">0</h3>
                    <p>Toplam Kalite Kontrol</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparisKayit">0</h3>
                    <p>Toplam SipariÅŸ</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformansKayit">0</h3>
                    <p>Toplam Performans</p>
                </div>
                <div class="stat-card">
                    <h3 id="tamamlananSiparis">0</h3>
                    <p>Tamamlanan SipariÅŸ</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamHataAdet">0</h3>
                    <p>Toplam HatalÄ± ÃœrÃ¼n</p>
                </div>
                <div class="stat-card">
                    <h3 id="basariOrani">0%</h3>
                    <p>BaÅŸarÄ± OranÄ±</p>
                </div>
            </div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti4"></div>
            </div>
            
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">ğŸ“Š Hata Ä°statistikleri</h4>
                <div id="hataIstatistikleri"></div>
            </div>
            
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">â±ï¸ Performans Ä°statistikleri</h4>
                <div id="performansIstatistikleri"></div>
            </div>
            
            <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #e9ecef; margin-bottom: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 15px; text-align: center; background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 12px; border-radius: 6px;">ğŸ‘¥ Ã‡alÄ±ÅŸan BazlÄ± Ä°statistikler</h4>
                <div id="calisanIstatistikleri"></div>
            </div>
        </div>

        <!-- Veri GÃ¶rÃ¼ntÃ¼le Tab -->
        <div id="veri-goruntule" class="tab-content">
            <h2>ğŸ“Š Veri GÃ¶rÃ¼ntÃ¼le</h2>
            <div class="form-grid" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label for="veriTuru">ğŸ” Veri TÃ¼rÃ¼</label>
                    <select id="veriTuru" onchange="loadVeriTablosu()">
                        <option value="kalite">Kalite Kontrol Verileri</option>
                        <option value="siparis">SipariÅŸ HazÄ±rlÄ±k Verileri</option>
                        <option value="performans">Performans Verileri</option>
                        <option value="stok">Stok Verileri</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tarihFiltre">ğŸ“… Tarih Filtresi</label>
                    <select id="tarihFiltre" onchange="loadVeriTablosu()">
                        <option value="hepsi">TÃ¼m Tarihler</option>
                        <option value="bugun">BugÃ¼n</option>
                        <option value="bu-hafta">Bu Hafta</option>
                        <option value="bu-ay">Bu Ay</option>
                    </select>
                </div>
            </div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti5"></div>
            </div>
            
            <div id="veriTablosuContainer"></div>
            <div style="margin-top: 20px; text-align: center;">
                <button class="btn" onclick="exportCurrentData()">ğŸ“¥ GÃ¶rÃ¼ntÃ¼lenen Verileri Excel'e Aktar</button>
            </div>
        </div>

        <!-- Raporlar Tab -->
        <div id="raporlar" class="tab-content">
            <h2>ğŸ“‹ Raporlar</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKayit">0</h3>
                    <p>Toplam Kalite Kontrol KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparis">0</h3>
                    <p>SipariÅŸ HazÄ±rlÄ±k KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformans">0</h3>
                    <p>Performans KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="stokSayisi">0</h3>
                    <p>Stok Kalemi</p>
                </div>
            </div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti6"></div>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn" onclick="exportToExcel('kalite')">ğŸ“¥ Kalite Verilerini Excel'e Aktar</button>
                <button class="btn btn-success" onclick="exportToExcel('performans')">ğŸ“¥ Performans Verilerini Excel'e Aktar</button>
                <button class="btn" onclick="exportToExcel('siparis')">ğŸ“¥ SipariÅŸ Verilerini Excel'e Aktar</button>
                <button class="btn btn-danger" onclick="exportToExcel('hepsi')">ğŸ“¥ TÃ¼m Verileri Excel'e Aktar</button>
            </div>
        </div>

        <!-- Ayarlar Tab -->
        <div id="ayarlar" class="tab-content">
            <h2>âš™ï¸ Sistem AyarlarÄ±</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>ğŸ’¾ Veri Yedekleme</label>
                    <button class="btn" onclick="exportAllData()">TÃ¼m Verileri Yedekle (JSON)</button>
                </div>
                <div class="form-group">
                    <label>ğŸ“¤ Veri Geri YÃ¼kleme</label>
                    <input type="file" id="importFile" accept=".json" onchange="importData()">
                </div>
                <div class="form-group">
                    <label>ğŸ—‘ï¸ Veri Temizleme</label>
                    <button class="btn btn-danger" onclick="clearAllData()">TÃ¼m Verileri Temizle</button>
                </div>
            </div>
            
            <!-- TÃ¼m Stoklar Ã–zeti -->
            <div class="kaydedilmis-stoklar">
                <h3>ğŸ“¦ TÃ¼m Stoklar Ã–zeti</h3>
                <div id="stokOzeti7"></div>
            </div>
        </div>
        
        <!-- Modal for Editing -->
        <div id="editModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
            <div style="background-color: white; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto;">
                <span style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;" onclick="document.getElementById('editModal').style.display='none'">&times;</span>
                <h3>âœï¸ SipariÅŸ DÃ¼zenle</h3>
                <div id="editFormContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // Global deÄŸiÅŸkenler
        let kaliteKayitlari = JSON.parse(localStorage.getItem('kaliteKayitlari') || '[]');
        let siparisHazirlikKayitlari = JSON.parse(localStorage.getItem('siparisHazirlikKayitlari') || '[]');
        let performansKayitlari = JSON.parse(localStorage.getItem('performansKayitlari') || '[]');
        let stokKayitlari = JSON.parse(localStorage.getItem('stokKayitlari') || '[]');

        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const nowString = now.toISOString().slice(0, 16);
            const today = now.toISOString().slice(0, 10);
            
            document.getElementById('tarih').value = nowString;
            document.getElementById('hazirlikTarih').value = today;
            document.getElementById('performansTarih').value = today;
            
            loadStats();
            loadStokListesi();
            loadKaliteKayitlari();
            loadSiparislerListesi();
            loadIstatistikler();
            loadVeriTablosu();
            tumStoklariOzetGoster();
            
            // Stok formu iÃ§in event listener
            document.getElementById('stokForm').addEventListener('submit', stokEkleGuncelle);
            
            // DiÄŸer hata checkbox'Ä± iÃ§in listener
            document.getElementById('hataDiger').addEventListener('change', function() {
                const digerDetay = document.getElementById('digerHataDetay');
                digerDetay.style.display = this.checked ? 'block' : 'none';
            });
        });

        // Stok ekleme/gÃ¼ncelleme fonksiyonu
        function stokEkleGuncelle(e) {
            if (e) e.preventDefault();
            
            const malzemeTuru = document.getElementById('stokMalzemeTuru').value;
            const urunAdi = document.getElementById('stokUrunAdi').value.trim();
            const olculeri = document.getElementById('stokOlculeri').value.trim();
            const mevcutAdet = parseInt(document.getElementById('stokMevcut').value) || 0;
            
            if (!malzemeTuru || !urunAdi) {
                showAlert('stokAlert', 'LÃ¼tfen malzeme tÃ¼rÃ¼ ve Ã¼rÃ¼n adÄ± giriniz!', 'error');
                return;
            }
            
            // AynÄ± Ã¼rÃ¼n var mÄ± kontrol et
            const existingIndex = stokKayitlari.findIndex(stok => 
                stok.malzemeTuru === malzemeTuru && 
                stok.urunAdi.toLowerCase() === urunAdi.toLowerCase() &&
                stok.olculeri === olculeri
            );
            
            const yeniStok = {
                id: existingIndex !== -1 ? stokKayitlari[existingIndex].id : Date.now(),
                malzemeTuru: malzemeTuru,
                urunAdi: urunAdi,
                olculeri: olculeri,
                mevcutAdet: mevcutAdet,
                sonGuncelleme: new Date().toISOString()
            };
            
            if (existingIndex !== -1) {
                // GÃ¼ncelle
                stokKayitlari[existingIndex] = yeniStok;
                showAlert('stokAlert', `${getMalzemeAdi(malzemeTuru)} - ${urunAdi} stoku gÃ¼ncellendi!`, 'success');
            } else {
                // Yeni ekle
                stokKayitlari.push(yeniStok);
                showAlert('stokAlert', `${getMalzemeAdi(malzemeTuru)} - ${urunAdi} stoku eklendi!`, 'success');
            }
            
            // LocalStorage'a kaydet
            localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
            
            // Listeyi gÃ¼ncelle
            loadStokListesi();
            tumStoklariOzetGoster();
            
            // Formu temizle
            document.getElementById('stokForm').reset();
        }

        // Stok listesini yÃ¼kle
        function loadStokListesi() {
            const container = document.getElementById('stokListesi');
            
            if (stokKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">HenÃ¼z stok kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            // Malzeme tÃ¼rÃ¼ne gÃ¶re grupla
            const gruplar = {};
            stokKayitlari.forEach(stok => {
                if (!gruplar[stok.malzemeTuru]) {
                    gruplar[stok.malzemeTuru] = [];
                }
                gruplar[stok.malzemeTuru].push(stok);
            });
            
            let html = '';
            Object.keys(gruplar).forEach(malzemeTuru => {
                html += `<h4 style="color: #2c3e50; margin: 20px 0 15px 0; border-bottom: 2px solid #3498db; padding-bottom: 5px;">${getMalzemeIcon(malzemeTuru)} ${getMalzemeAdi(malzemeTuru)}</h4>`;
                
                gruplar[malzemeTuru].forEach(stok => {
                    html += `
                        <div class="stok-kayit-item">
                            <div class="stok-header">
                                <h4>${getMalzemeIcon(stok.malzemeTuru)} ${stok.urunAdi}</h4>
                                <small style="color: #666;">Son gÃ¼ncelleme: ${new Date(stok.sonGuncelleme).toLocaleString('tr-TR')}</small>
                            </div>
                            <div class="stok-bilgi">
                                <div class="stok-bilgi-item">
                                    <strong>Malzeme:</strong>
                                    <span>${getMalzemeAdi(stok.malzemeTuru)}</span>
                                </div>
                                ${stok.olculeri ? `
                                <div class="stok-bilgi-item">
                                    <strong>Ã–lÃ§Ã¼ler:</strong>
                                    <span>${stok.olculeri}</span>
                                </div>` : ''}
                            </div>
                            <div class="stok-kontrol">
                                <button class="stok-btn-small minus" onclick="stokDegistir(${stok.id}, -1)" title="Azalt">-</button>
                                <div class="stok-adet-display">${stok.mevcutAdet}</div>
                                <button class="stok-btn-small" onclick="stokDegistir(${stok.id}, 1)" title="ArtÄ±r">+</button>
                                <input type="number" class="stok-adet-input" value="${stok.mevcutAdet}" 
                                       onchange="stokAdetDegistir(${stok.id}, this.value)" 
                                       min="0" title="Direkt adet gir">
                            </div>
                            <div class="stok-actions">
                                <button class="btn-edit" onclick="stokDuzenle(${stok.id})" title="DÃ¼zenle">âœï¸ DÃ¼zenle</button>
                                <button class="btn-delete" onclick="stokSil(${stok.id})" title="Sil">ğŸ—‘ï¸ Sil</button>
                            </div>
                        </div>
                    `;
                });
            });
            
            container.innerHTML = html;
        }

        // Stok adedini deÄŸiÅŸtir (+ ve - butonlarÄ± iÃ§in)
        function stokDegistir(stokId, miktar) {
            const stokIndex = stokKayitlari.findIndex(s => s.id === stokId);
            if (stokIndex !== -1) {
                const yeniAdet = Math.max(0, stokKayitlari[stokIndex].mevcutAdet + miktar);
                stokKayitlari[stokIndex].mevcutAdet = yeniAdet;
                stokKayitlari[stokIndex].sonGuncelleme = new Date().toISOString();
                
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
            }
        }

        // Stok adedini direkt deÄŸiÅŸtir (input field iÃ§in)
        function stokAdetDegistir(stokId, yeniAdet) {
            const stokIndex = stokKayitlari.findIndex(s => s.id === stokId);
            if (stokIndex !== -1) {
                const adet = Math.max(0, parseInt(yeniAdet) || 0);
                stokKayitlari[stokIndex].mevcutAdet = adet;
                stokKayitlari[stokIndex].sonGuncelleme = new Date().toISOString();
                
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
            }
        }
                // Stok dÃ¼zenle
        function stokDuzenle(stokId) {
            const stok = stokKayitlari.find(s => s.id === stokId);
            if (stok) {
                document.getElementById('stokMalzemeTuru').value = stok.malzemeTuru;
                document.getElementById('stokUrunAdi').value = stok.urunAdi;
                document.getElementById('stokOlculeri').value = stok.olculeri;
                document.getElementById('stokMevcut').value = stok.mevcutAdet;
                
                // Scroll to form
                document.getElementById('stokForm').scrollIntoView({ behavior: 'smooth' });
                showAlert('stokAlert', 'Stok bilgileri forma yÃ¼klendi. DeÄŸiÅŸiklikleri yapÄ±p kaydedin.', 'success');
            }
        }

        // Stok sil
        function stokSil(stokId) {
            const stok = stokKayitlari.find(s => s.id === stokId);
            if (stok && confirm(`${stok.urunAdi} stok kaydÄ±nÄ± silmek istediÄŸinizden emin misiniz?`)) {
                stokKayitlari = stokKayitlari.filter(s => s.id !== stokId);
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'Stok kaydÄ± silindi!', 'success');
            }
        }

        // TÃ¼m stoklarÄ± sÄ±fÄ±rla
        function tumStoklariSifirla() {
            if (confirm('TÃ¼m stok kayÄ±tlarÄ±nÄ± silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz!')) {
                stokKayitlari = [];
                localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                loadStokListesi();
                tumStoklariOzetGoster();
                showAlert('stokAlert', 'TÃ¼m stok kayÄ±tlarÄ± silindi!', 'success');
            }
        }

        // StoklarÄ± yenile
        function tumStoklariYukle() {
            loadStokListesi();
            tumStoklariOzetGoster();
            showAlert('stokAlert', 'Stoklar yenilendi!', 'success');
        }

        // TÃ¼m sekmelerde gÃ¶sterilecek stok Ã¶zeti
        function tumStoklariOzetGoster() {
            // Birden fazla stok Ã¶zeti container'Ä± iÃ§in
            const containers = ['stokOzeti', 'stokOzeti2', 'stokOzeti3', 'stokOzeti4', 'stokOzeti5', 'stokOzeti6', 'stokOzeti7'];
            
            containers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (!container) return;
                
                if (stokKayitlari.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #666;">HenÃ¼z stok kaydÄ± bulunmuyor.</p>';
                    return;
                }
                
                // Malzeme tÃ¼rÃ¼ne gÃ¶re Ã¶zet
                const ozet = {};
                stokKayitlari.forEach(stok => {
                    if (!ozet[stok.malzemeTuru]) {
                        ozet[stok.malzemeTuru] = { toplam: 0, cesit: 0 };
                    }
                    ozet[stok.malzemeTuru].toplam += stok.mevcutAdet;
                    ozet[stok.malzemeTuru].cesit++;
                });
                
                let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">';
                
                Object.keys(ozet).forEach(malzemeTuru => {
                    const renk = ozet[malzemeTuru].toplam > 0 ? '#27ae60' : '#e74c3c';
                    html += `
                        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${renk}; text-align: center;">
                            <h4 style="margin: 0 0 10px 0; color: #2c3e50;">${getMalzemeIcon(malzemeTuru)} ${getMalzemeAdi(malzemeTuru)}</h4>
                            <div style="font-size: 1.5em; font-weight: bold; color: ${renk};">${ozet[malzemeTuru].toplam}</div>
                            <small style="color: #666;">${ozet[malzemeTuru].cesit} Ã§eÅŸit</small>
                        </div>
                    `;
                });
                
                html += '</div>';
                container.innerHTML = html;
            });
        }

        // Stok formu temizle
        function temizleStokFormu() {
            document.getElementById('stokForm').reset();
            showAlert('stokAlert', 'Form temizlendi!', 'success');
        }

        // YardÄ±mcÄ± fonksiyonlar
        function getMalzemeIcon(malzemeTuru) {
            const icons = {
                izolasyon: 'ğŸ”§',
                koli: 'ğŸ“¦',
                kutu: 'ğŸ“¦',
                poset: 'ğŸ›ï¸',
                tapa: 'ğŸ”´',
                etiket: 'ğŸ·ï¸'
            };
            return icons[malzemeTuru] || 'ğŸ“¦';
        }

        function getMalzemeAdi(malzemeTuru) {
            const adlar = {
                izolasyon: 'Ä°zolasyon',
                koli: 'Koli',
                kutu: 'Kutu',
                poset: 'PoÅŸet',
                tapa: 'Tapa',
                etiket: 'Etiket'
            };
            return adlar[malzemeTuru] || malzemeTuru;
        }

        function getMalzemeAd(malzeme) {
            return getMalzemeAdi(malzeme);
        }

        // Tab gÃ¶sterme fonksiyonu (gÃ¼ncellenmiÅŸ)
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Her sekme deÄŸiÅŸiminde stok Ã¶zetini gÃ¼ncelle
            tumStoklariOzetGoster();
            
            if (tabName === 'raporlar') {
                loadStats();
            } else if (tabName === 'kalite-kontrol') {
                loadKaliteKayitlari();
            } else if (tabName === 'siparis-hazirlik') {
                loadSiparislerListesi();
            } else if (tabName === 'gunluk-performans') {
                loadPerformansKayitlari();
            } else if (tabName === 'istatistikler') {
                loadIstatistikler();
            } else if (tabName === 'veri-goruntule') {
                loadVeriTablosu();
            } else if (tabName === 'stok') {
                loadStokListesi();
            }
        }

        // Kalite kontrol form gÃ¶nderimi
        document.getElementById('kaliteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                tip: 'kalite',
                tarih: document.getElementById('tarih').value,
                operator: document.getElementById('operator').value,
                urunKodu: document.getElementById('urunKodu').value,
                toplamAdet: parseInt(document.getElementById('toplamAdet').value),
                siparisNo: document.getElementById('siparisNo').value,
                hatalar: []
            };
            
            // TÃ¼m hatalarÄ± topla
            document.querySelectorAll('input[name="hatalar"]:checked').forEach(checkbox => {
                const hataItem = checkbox.parentElement;
                const adetInputs = hataItem.querySelectorAll('.hata-adet');
                const iskartaAdet = parseInt(adetInputs[0].value) || 0;
                const geriGidenAdet = parseInt(adetInputs[1].value) || 0;
                
                if (iskartaAdet > 0 || geriGidenAdet > 0) {
                    let hataTur = checkbox.value;
                    if (hataTur === 'DiÄŸer') {
                        const aciklama = document.getElementById('digerHataAciklama').value;
                        hataTur = 'DiÄŸer: ' + aciklama;
                    }
                    formData.hatalar.push({
                        tur: hataTur,
                        iskartaAdet: iskartaAdet,
                        geriGidenAdet: geriGidenAdet
                    });
                }
            });
            
            kaliteKayitlari.push(formData);
            localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
            
            document.getElementById('kaliteForm').reset();
            document.getElementById('tarih').value = new Date().toISOString().slice(0, 16);
            document.getElementById('digerHataDetay').style.display = 'none';
            
            showAlert('kaliteAlert', 'Kalite kontrol kaydÄ± baÅŸarÄ±yla kaydedildi!', 'success');
            loadStats();
            loadKaliteKayitlari();
            tumStoklariOzetGoster();
        });

        // SipariÅŸ ekleme form gÃ¶nderimi
        document.getElementById('siparisEkleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                tip: 'siparis-hazirlik',
                tarih: document.getElementById('hazirlikTarih').value,
                operator: document.getElementById('hazirlikOperator').value,
                siparisNo: document.getElementById('hazirlikSiparisNo').value,
                urunKodu: document.getElementById('urunKoduSiparis').value,
                siparisAdet: parseInt(document.getElementById('siparisAdet').value),
                malzemeler: {
                    kutu: { yapildi: 0, hazir: false, mevcut: false },
                    koli: { yapildi: 0, hazir: false, mevcut: false },
                    etiket: { yapildi: 0, hazir: false, mevcut: false },
                    poset: { yapildi: 0, hazir: false, mevcut: false },
                    tapa: { yapildi: 0, hazir: false, mevcut: false },
                    izolasyon: { yapildi: 0, hazir: false, mevcut: false }
                }
            };
            
            siparisHazirlikKayitlari.push(formData);
            localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
            
            document.getElementById('siparisEkleForm').reset();
            document.getElementById('hazirlikTarih').value = new Date().toISOString().slice(0, 10);
            
            showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla eklendi!', 'success');
            loadStats();
            loadSiparislerListesi();
            tumStoklariOzetGoster();
        });

        // Performans form gÃ¶nderimi
        document.getElementById('performansForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                tip: 'performans',
                tarih: document.getElementById('performansTarih').value,
                calisan: document.getElementById('performansCalisan').value,
                kutuHazirlik: {
                    urun: document.getElementById('kutuHazirlikUrun').value,
                    adet: parseInt(document.getElementById('kutuHazirlikAdet').value) || 0,
                    sure: parseInt(document.getElementById('kutuHazirlikSure').value) || 0
                },
                koliHazirlama: {
                    urun: document.getElementById('koliHazirlamaUrun').value,
                    adet: parseInt(document.getElementById('koliHazirlamaAdet').value) || 0,
                    sure: parseInt(document.getElementById('koliHazirlamaSure').value) || 0
                },
                izolasyon: {
                    urun: document.getElementById('izolasyonUrunPerf').value,
                    adet: parseInt(document.getElementById('izolasyonAdetPerf').value) || 0,
                    sure: parseInt(document.getElementById('izolasyonSure').value) || 0
                },
                kaliteKontrol: {
                    urun: document.getElementById('kaliteKontrolUrun').value,
                    adet: parseInt(document.getElementById('kaliteKontrolAdet').value) || 0,
                    sure: parseInt(document.getElementById('kaliteKontrolSure').value) || 0
                },
                posetleme: {
                    urun: document.getElementById('posetlemeUrunPerf').value,
                    adet: parseInt(document.getElementById('posetlemeAdetPerf').value) || 0,
                    sure: parseInt(document.getElementById('posetlemeSure').value) || 0
                },
                urunKutulama: {
                    urun: document.getElementById('urunKutulamaUrun').value,
                    adet: parseInt(document.getElementById('urunKutulamaAdet').value) || 0,
                    sure: parseInt(document.getElementById('urunKutulamaSure').value) || 0
                },
                ekParca: {
                    urun: document.getElementById('ekParcaUrunPerf').value,
                    adet: parseInt(document.getElementById('ekParcaAdetPerf').value) || 0,
                    sure: parseInt(document.getElementById('ekParcaSure').value) || 0
                }
            };
            
            performansKayitlari.push(formData);
            localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
            
            document.getElementById('performansForm').reset();
            document.getElementById('performansTarih').value = new Date().toISOString().slice(0, 10);
            
            showAlert('performansAlert', 'Performans kaydÄ± baÅŸarÄ±yla kaydedildi!', 'success');
            loadStats();
            loadPerformansKayitlari();
            tumStoklariOzetGoster();
        });

        // Kalite kayÄ±tlarÄ±nÄ± yÃ¼kle
        function loadKaliteKayitlari() {
            const container = document.getElementById('kaliteKayitlariListesi');
            if (!container) return;
            
            if (kaliteKayitlari.length === 0) {
                container.innerHTML = '<p>HenÃ¼z kalite kontrol kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            const sonKayitlar = kaliteKayitlari.slice(-10).reverse();
            container.innerHTML = sonKayitlar.map(kayit => {
                const toplamHata = kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                return `
                    <div class="kayit-item">
                        <div class="kayit-header">
                            <span>ğŸ“¦ ${kayit.urunKodu} - ${kayit.toplamAdet} adet</span>
                            <span>ğŸ“… ${new Date(kayit.tarih).toLocaleString('tr-TR')}</span>
                        </div>
                        <div class="kayit-details">
                            <div><strong>OperatÃ¶r:</strong> ${kayit.operator}</div>
                            <div><strong>SipariÅŸ No:</strong> ${kayit.siparisNo}</div>
                            <div><strong>Toplam Hata:</strong> ${toplamHata} adet</div>
                            <div><strong>BaÅŸarÄ± OranÄ±:</strong> ${Math.round((1 - toplamHata/kayit.toplamAdet) * 100)}%</div>
                        </div>
                        ${kayit.hatalar.length > 0 ? `
                        <div style="margin-top: 10px;">
                            <strong>Hatalar:</strong><br>
                            ${kayit.hatalar.map(hata => `<small>â€¢ ${hata.tur}: Ä°skarta ${hata.iskartaAdet}, Geri Giden ${hata.geriGidenAdet}</small>`).join('<br>')}
                        </div>` : ''}
                    </div>
                `;
            }).join('');
            
            // Stok Ã¶zetini de gÃ¶ster
            tumStoklariOzetGoster();
        }

        // SipariÅŸler listesini yÃ¼kle
        function loadSiparislerListesi() {
            const container = document.getElementById('siparislerListesi');
            if (!container) return;
            
            if (siparisHazirlikKayitlari.length === 0) {
                container.innerHTML = '<p>HenÃ¼z sipariÅŸ kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            container.innerHTML = siparisHazirlikKayitlari.map(siparis => `
                <div style="background: white; border: 2px solid #e9ecef; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                    <div style="background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4>ğŸ“‹ SipariÅŸ: ${siparis.siparisNo}</h4>
                            <p>ğŸ“¦ ${siparis.urunKodu} - ${siparis.siparisAdet} adet</p>
                        </div>
                        <div style="text-align: right;">
                            <span>ğŸ“… ${new Date(siparis.tarih).toLocaleDateString('tr-TR')}</span><br>
                            <span>ğŸ‘¤ ${siparis.operator}</span>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                        ${Object.keys(siparis.malzemeler).map(malzeme => `
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border: 2px solid #dee2e6;">
                            <h5 style="margin-bottom: 15px; color: #2c3e50; text-align: center; font-size: 1.1em;">${getMalzemeIcon(malzeme)} ${getMalzemeAd(malzeme)}</h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; align-items: center; margin-bottom: 10px;">
                                <div style="text-align: center; font-weight: bold; color: #2c3e50;">
                                    <input type="number" value="${siparis.malzemeler[malzeme].yapildi}" 
                                           onchange="updateMalzemeAdet(${siparis.id}, '${malzeme}', this.value)" 
                                           style="width: 60px; padding: 5px; text-align: center; border: 1px solid #ddd; border-radius: 3px;">
                                    <br><small>YapÄ±lan</small>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 8px;">
                                    <div style="display: flex; align-items: center; font-size: 0.9em; padding: 5px 10px; border-radius: 4px; background: #d4edda; border: 1px solid #27ae60;">
                                        <input type="checkbox" id="hazir_${siparis.id}_${malzeme}" 
                                               ${siparis.malzemeler[malzeme].hazir ? 'checked' : ''} 
                                               onchange="updateSiparis(${siparis.id}, '${malzeme}', 'hazir', this.checked)"
                                               style="margin-right: 8px; transform: scale(1.2);">
                                        <label for="hazir_${siparis.id}_${malzeme}">âœ… HazÄ±r</label>
                                    </div>
                                    <div style="display: flex; align-items: center; font-size: 0.9em; padding: 5px 10px; border-radius: 4px; background: #e7f3ff; border: 1px solid #3498db;">
                                        <input type="checkbox" id="mevcut_${siparis.id}_${malzeme}" 
                                               ${siparis.malzemeler[malzeme].mevcut ? 'checked' : ''} 
                                               onchange="updateSiparis(${siparis.id}, '${malzeme}', 'mevcut', this.checked)"
                                               style="margin-right: 8px; transform: scale(1.2);">
                                        <label for="mevcut_${siparis.id}_${malzeme}">ğŸ“¦ Mevcut</label>
                                    </div>
                                </div>
                            </div>
                        </div>`).join('')}
                    </div>
                    <div style="margin-top: 15px; text-align: center;">
                        <button style="background: linear-gradient(135deg, #f39c12, #e67e22); padding: 8px 15px; font-size: 12px; margin: 2px;" onclick="editSiparis(${siparis.id})">âœï¸ DÃ¼zenle</button>
                        <button style="background: linear-gradient(135deg, #e74c3c, #c0392b); padding: 8px 15px; font-size: 12px; margin: 2px;" onclick="deleteSiparis(${siparis.id})">ğŸ—‘ï¸ Sil</button>
                        <span style="margin-left: 20px; padding: 8px 15px; border-radius: 15px; font-weight: bold; ${getSiparisStatus(siparis)}">
                            ${getSiparisStatusText(siparis)}
                        </span>
                    </div>
                </div>
            `).join('');
            
            // Stok Ã¶zetini de gÃ¶ster
            tumStoklariOzetGoster();
        }
                // Ä°statistikleri yÃ¼kle
        function loadStats() {
            const elements = {
                'toplamKayit': kaliteKayitlari.length,
                'toplamSiparis': siparisHazirlikKayitlari.length,
                'toplamPerformans': performansKayitlari.length,
                'stokSayisi': stokKayitlari.length
            };
            
            Object.keys(elements).forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = elements[id];
            });
        }

        // Ä°statistikler sayfasÄ±nÄ± yÃ¼kle
        function loadIstatistikler() {
            // Kalite kontrol istatistikleri
            const toplamKaliteKayit = kaliteKayitlari.length;
            const toplamSiparisKayit = siparisHazirlikKayitlari.length;
            const toplamPerformansKayit = performansKayitlari.length;
            
            // Tamamlanan sipariÅŸ sayÄ±sÄ±
            const tamamlananSiparis = siparisHazirlikKayitlari.filter(siparis => {
                const tamamlananMalzeme = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
                const toplamMalzeme = Object.keys(siparis.malzemeler).length;
                return tamamlananMalzeme === toplamMalzeme;
            }).length;
            
            // Toplam hata adedi
            const toplamHataAdet = kaliteKayitlari.reduce((toplam, kayit) => {
                return toplam + kayit.hatalar.reduce((hataToplam, hata) => {
                    return hataToplam + hata.iskartaAdet + hata.geriGidenAdet;
                }, 0);
            }, 0);
            
            // Toplam Ã¼retim adedi
            const toplamUretimAdet = kaliteKayitlari.reduce((toplam, kayit) => toplam + kayit.toplamAdet, 0);
            
            // BaÅŸarÄ± oranÄ±
            const basariOrani = toplamUretimAdet > 0 ? Math.round((1 - toplamHataAdet/toplamUretimAdet) * 100) : 0;
            
            // Ä°statistik kartlarÄ±nÄ± gÃ¼ncelle
            const statElements = {
                'toplamKaliteKayit': toplamKaliteKayit,
                'toplamSiparisKayit': toplamSiparisKayit,
                'toplamPerformansKayit': toplamPerformansKayit,
                'tamamlananSiparis': tamamlananSiparis,
                'toplamHataAdet': toplamHataAdet,
                'basariOrani': basariOrani + '%'
            };
            
            Object.keys(statElements).forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = statElements[id];
            });
            
            // Hata istatistikleri
            loadHataIstatistikleri();
            
            // Performans istatistikleri
            loadPerformansIstatistikleri();
            
            // Ã‡alÄ±ÅŸan istatistikleri
            loadCalisanIstatistikleri();
        }

        // Hata istatistiklerini yÃ¼kle
        function loadHataIstatistikleri() {
            const container = document.getElementById('hataIstatistikleri');
            if (!container) return;
            
            const hatalar = {};
            kaliteKayitlari.forEach(kayit => {
                kayit.hatalar.forEach(hata => {
                    if (!hatalar[hata.tur]) {
                        hatalar[hata.tur] = { iskarta: 0, geriGiden: 0, toplam: 0 };
                    }
                    hatalar[hata.tur].iskarta += hata.iskartaAdet;
                    hatalar[hata.tur].geriGiden += hata.geriGidenAdet;
                    hatalar[hata.tur].toplam += hata.iskartaAdet + hata.geriGidenAdet;
                });
            });
            
            if (Object.keys(hatalar).length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">HenÃ¼z hata kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">';
            Object.keys(hatalar).forEach(hataTuru => {
                const hata = hatalar[hataTuru];
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #e74c3c; text-align: center;">
                        <h5 style="color: #e74c3c; margin-bottom: 10px;">${hataTuru}</h5>
                        <div style="font-size: 1.2em; font-weight: bold; color: #2c3e50;">${hata.toplam}</div>
                        <small style="color: #666;">Ä°skarta: ${hata.iskarta} | Geri Giden: ${hata.geriGiden}</small>
                    </div>
                `;
            });
            html += '</div>';
            container.innerHTML = html;
        }

        // Performans istatistiklerini yÃ¼kle
        function loadPerformansIstatistikleri() {
            const container = document.getElementById('performansIstatistikleri');
            if (!container) return;
            
            if (performansKayitlari.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">HenÃ¼z performans kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            const islemler = ['kutuHazirlik', 'koliHazirlama', 'izolasyon', 'kaliteKontrol', 'posetleme', 'urunKutulama', 'ekParca'];
            const islemAdlari = {
                'kutuHazirlik': 'Kutu HazÄ±rlÄ±ÄŸÄ±',
                'koliHazirlama': 'Koli HazÄ±rlama', 
                'izolasyon': 'Ä°zolasyon',
                'kaliteKontrol': 'Kalite Kontrol',
                'posetleme': 'PoÅŸetleme',
                'urunKutulama': 'ÃœrÃ¼n Kutulama',
                'ekParca': 'Ek ParÃ§a'
            };
            
            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">';
            
            islemler.forEach(islem => {
                const toplamAdet = performansKayitlari.reduce((toplam, kayit) => toplam + (kayit[islem]?.adet || 0), 0);
                const toplamSure = performansKayitlari.reduce((toplam, kayit) => toplam + (kayit[islem]?.sure || 0), 0);
                const ortalama = toplamSure > 0 ? (toplamAdet / (toplamSure / 60)).toFixed(1) : 0;
                
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #3498db; text-align: center;">
                        <h5 style="color: #3498db; margin-bottom: 10px;">${islemAdlari[islem]}</h5>
                        <div style="font-size: 1.1em; font-weight: bold; color: #2c3e50;">${toplamAdet} adet</div>
                        <small style="color: #666;">${toplamSure} dk | ${ortalama} adet/saat</small>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        // Ã‡alÄ±ÅŸan istatistiklerini yÃ¼kle
        function loadCalisanIstatistikleri() {
            const container = document.getElementById('calisanIstatistikleri');
            if (!container) return;
            
            const calisanlar = {};
            
            // Kalite kontrol verilerinden Ã§alÄ±ÅŸanlarÄ± topla
            kaliteKayitlari.forEach(kayit => {
                if (!calisanlar[kayit.operator]) {
                    calisanlar[kayit.operator] = { kalite: 0, performans: 0, siparis: 0 };
                }
                calisanlar[kayit.operator].kalite++;
            });
            
            // Performans verilerinden Ã§alÄ±ÅŸanlarÄ± topla
            performansKayitlari.forEach(kayit => {
                if (!calisanlar[kayit.calisan]) {
                    calisanlar[kayit.calisan] = { kalite: 0, performans: 0, siparis: 0 };
                }
                calisanlar[kayit.calisan].performans++;
            });
            
            // SipariÅŸ verilerinden Ã§alÄ±ÅŸanlarÄ± topla
            siparisHazirlikKayitlari.forEach(kayit => {
                if (!calisanlar[kayit.operator]) {
                    calisanlar[kayit.operator] = { kalite: 0, performans: 0, siparis: 0 };
                }
                calisanlar[kayit.operator].siparis++;
            });
            
            if (Object.keys(calisanlar).length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">HenÃ¼z Ã§alÄ±ÅŸan kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">';
            Object.keys(calisanlar).forEach(calisan => {
                const veri = calisanlar[calisan];
                const toplam = veri.kalite + veri.performans + veri.siparis;
                html += `
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #27ae60; text-align: center;">
                        <h5 style="color: #27ae60; margin-bottom: 10px;">ğŸ‘¤ ${calisan}</h5>
                        <div style="font-size: 1.1em; font-weight: bold; color: #2c3e50;">${toplam} toplam kayÄ±t</div>
                        <small style="color: #666;">Kalite: ${veri.kalite} | Performans: ${veri.performans} | SipariÅŸ: ${veri.siparis}</small>
                    </div>
                `;
            });
            html += '</div>';
            container.innerHTML = html;
        }

        // Performans kayÄ±tlarÄ±nÄ± yÃ¼kle
        function loadPerformansKayitlari() {
            const container = document.getElementById('performansKayitlariListesi');
            if (!container) return;
            
            if (performansKayitlari.length === 0) {
                container.innerHTML = '<p>HenÃ¼z performans kaydÄ± bulunmuyor.</p>';
                return;
            }
            
            const sonKayitlar = performansKayitlari.slice(-5).reverse();
            container.innerHTML = sonKayitlar.map(kayit => `
                <div class="kayit-item">
                    <div class="kayit-header">
                        <span>ğŸ‘¤ ${kayit.calisan}</span>
                        <span>ğŸ“… ${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                        ${Object.keys(kayit).filter(key => typeof kayit[key] === 'object' && kayit[key].adet > 0).map(key => {
                            const islem = kayit[key];
                            return `<div>â€¢ ${key}: ${islem.adet} adet (${islem.sure} dk)</div>`;
                        }).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Veri tablosunu yÃ¼kle
        function loadVeriTablosu() {
            const container = document.getElementById('veriTablosuContainer');
            if (!container) return;
            
            const veriTuru = document.getElementById('veriTuru').value;
            const tarihFiltre = document.getElementById('tarihFiltre').value;
            
            let veriler = [];
            let baslik = '';
            
            switch(veriTuru) {
                case 'kalite':
                    veriler = kaliteKayitlari;
                    baslik = 'Kalite Kontrol Verileri';
                    break;
                case 'siparis':
                    veriler = siparisHazirlikKayitlari;
                    baslik = 'SipariÅŸ HazÄ±rlÄ±k Verileri';
                    break;
                case 'performans':
                    veriler = performansKayitlari;
                    baslik = 'Performans Verileri';
                    break;
                case 'stok':
                    veriler = stokKayitlari;
                    baslik = 'Stok Verileri';
                    break;
            }
            
            // Tarih filtresi uygula
            if (tarihFiltre !== 'hepsi') {
                const bugun = new Date();
                veriler = veriler.filter(veri => {
                    const veriTarihi = new Date(veri.tarih || veri.sonGuncelleme);
                    
                    switch(tarihFiltre) {
                        case 'bugun':
                            return veriTarihi.toDateString() === bugun.toDateString();
                        case 'bu-hafta':
                            const haftaOnce = new Date(bugun.getTime() - 7 * 24 * 60 * 60 * 1000);
                            return veriTarihi >= haftaOnce;
                        case 'bu-ay':
                            return veriTarihi.getMonth() === bugun.getMonth() && veriTarihi.getFullYear() === bugun.getFullYear();
                        default:
                            return true;
                    }
                });
            }
            
            if (veriler.length === 0) {
                container.innerHTML = `<p style="text-align: center; color: #666;">SeÃ§ilen kriterlerde veri bulunamadÄ±.</p>`;
                return;
            }
            
            let html = `<h3>${baslik} (${veriler.length} kayÄ±t)</h3>`;
            html += '<div style="overflow-x: auto; background: white; border-radius: 8px; border: 2px solid #e9ecef;">';
            html += '<table style="width: 100%; border-collapse: collapse;">';
            
            // Tablo baÅŸlÄ±ÄŸÄ±
            if (veriTuru === 'kalite') {
                html += `
                    <thead style="background: #3498db; color: white;">
                        <tr>
                            <th style="padding: 12px; border: 1px solid #ddd;">Tarih</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">OperatÃ¶r</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">ÃœrÃ¼n Kodu</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">Toplam Adet</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">SipariÅŸ No</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">Hata SayÄ±sÄ±</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">BaÅŸarÄ± %</th>
                        </tr>
                    </thead>
                    <tbody>
                `;
                
                veriler.forEach((veri, index) => {
                    const toplamHata = veri.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                    const basariOrani = Math.round((1 - toplamHata/veri.toplamAdet) * 100);
                    html += `
                        <tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">
                            <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.tarih).toLocaleString('tr-TR')}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${veri.operator}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunKodu}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${veri.toplamAdet}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${veri.siparisNo}</td>
                            <td style="padding: 10px; border: 1px solid #ddd; color: ${toplamHata > 0 ? '#e74c3c' : '#27ae60'}">${toplamHata}</td>
                            <td style="padding: 10px; border: 1px solid #ddd; color: ${basariOrani < 95 ? '#e74c3c' : '#27ae60'}">${basariOrani}%</td>
                        </tr>
                    `;
                });
            } else if (veriTuru === 'stok') {
                html += `
                    <thead style="background: #3498db; color: white;">
                        <tr>
                            <th style="padding: 12px; border: 1px solid #ddd;">Malzeme TÃ¼rÃ¼</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">ÃœrÃ¼n AdÄ±</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">Ã–lÃ§Ã¼ler</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">Mevcut Adet</th>
                            <th style="padding: 12px; border: 1px solid #ddd;">Son GÃ¼ncelleme</th>
                        </tr>
                    </thead>
                    <tbody>
                `;
                
                veriler.forEach((veri, index) => {
                    html += `
                        <tr style="background: ${index % 2 === 0 ? '#f8f9fa' : 'white'};">
                            <td style="padding: 10px; border: 1px solid #ddd;">${getMalzemeIcon(veri.malzemeTuru)} ${getMalzemeAdi(veri.malzemeTuru)}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${veri.urunAdi}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${veri.olculeri || '-'}</td>
                            <td style="padding: 10px; border: 1px solid #ddd; color: ${veri.mevcutAdet > 0 ? '#27ae60' : '#e74c3c'}">${veri.mevcutAdet}</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">${new Date(veri.sonGuncelleme).toLocaleString('tr-TR')}</td>
                        </tr>
                    `;
                });
            }
            
            html += '</tbody></table></div>';
            container.innerHTML = html;
        }

        // SipariÅŸ gÃ¼ncelleme fonksiyonlarÄ±
        function updateMalzemeAdet(id, malzeme, adet) {
            const siparisIndex = siparisHazirlikKayitlari.findIndex(s => s.id === id);
            if (siparisIndex !== -1) {
                siparisHazirlikKayitlari[siparisIndex].malzemeler[malzeme].yapildi = parseInt(adet) || 0;
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
            }
        }

        function updateSiparis(id, malzeme, durum, deger) {
            const siparisIndex = siparisHazirlikKayitlari.findIndex(s => s.id === id);
            if (siparisIndex !== -1) {
                siparisHazirlikKayitlari[siparisIndex].malzemeler[malzeme][durum] = deger;
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                setTimeout(() => loadSiparislerListesi(), 100);
            }
        }

        function getSiparisStatus(siparis) {
            const tamamlanan = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
            const toplam = Object.keys(siparis.malzemeler).length;
            
            if (tamamlanan === toplam) {
                return 'background: #d4edda; color: #155724; border: 1px solid #c3e6cb;';
            } else if (tamamlanan > 0) {
                return 'background: #fff3cd; color: #856404; border: 1px solid #ffeaa7;';
            } else {
                return 'background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;';
            }
        }

        function getSiparisStatusText(siparis) {
            const tamamlanan = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
            const toplam = Object.keys(siparis.malzemeler).length;
            
            if (tamamlanan === toplam) {
                return 'âœ… TamamlandÄ±';
            } else if (tamamlanan > 0) {
                return `ğŸ”„ Devam Ediyor (${tamamlanan}/${toplam})`;
            } else {
                return 'â³ Beklemede';
            }
        }

        // SipariÅŸ iÅŸlemleri
        function editSiparis(id) {
            alert('DÃ¼zenleme Ã¶zelliÄŸi yapÄ±m aÅŸamasÄ±nda...');
        }

        function deleteSiparis(id) {
            if (confirm('Bu sipariÅŸi silmek istediÄŸinizden emin misiniz?')) {
                siparisHazirlikKayitlari = siparisHazirlikKayitlari.filter(s => s.id !== id);
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                loadSiparislerListesi();
                loadStats();
                showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla silindi!', 'success');
            }
        }

        // Excel export fonksiyonlarÄ±
        function exportToExcel(type) {
            alert(`${type} verileri Excel'e aktarma Ã¶zelliÄŸi yapÄ±m aÅŸamasÄ±nda...`);
        }

        function exportCurrentData() {
            alert('GÃ¶rÃ¼ntÃ¼lenen verileri Excel\'e aktarma Ã¶zelliÄŸi yapÄ±m aÅŸamasÄ±nda...');
        }

        // TÃ¼m verileri yedekle (gÃ¼ncellenmiÅŸ)
        function exportAllData() {
            const allData = {
                kaliteKayitlari: kaliteKayitlari,
                siparisHazirlikKayitlari: siparisHazirlikKayitlari,
                performansKayitlari: performansKayitlari,
                stokKayitlari: stokKayitlari,
                yedeklemeTarihi: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `akg_sistem_yedek_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            alert('TÃ¼m veriler baÅŸarÄ±yla yedeklendi!');
        }

        // Veri geri yÃ¼kleme (gÃ¼ncellenmiÅŸ)
        function importData() {
            const file = document.getElementById('importFile').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (confirm('Bu iÅŸlem mevcut tÃ¼m verileri silecek ve yedek dosyasÄ±ndaki verilerle deÄŸiÅŸtirecektir. Devam etmek istiyor musunuz?')) {
                        if (data.kaliteKayitlari) {
                            kaliteKayitlari = data.kaliteKayitlari;
                            localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
                        }
                        if (data.siparisHazirlikKayitlari) {
                            siparisHazirlikKayitlari = data.siparisHazirlikKayitlari;
                            localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                        }
                        if (data.performansKayitlari) {
                            performansKayitlari = data.performansKayitlari;
                            localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
                        }
                        if (data.stokKayitlari) {
                            stokKayitlari = data.stokKayitlari;
                            localStorage.setItem('stokKayitlari', JSON.stringify(stokKayitlari));
                        }
                        
                        // TÃ¼m verileri yeniden yÃ¼kle
                        loadStats();
                        loadStokListesi();
                        loadKaliteKayitlari();
                        loadSiparislerListesi();
                        loadIstatistikler();
                        loadVeriTablosu();
                        tumStoklariOzetGoster();
                        
                        alert('Veriler baÅŸarÄ±yla geri yÃ¼klendi!');
                    }
                } catch (error) {
                    alert('Yedek dosyasÄ± okunamadÄ±! LÃ¼tfen geÃ§erli bir JSON dosyasÄ± seÃ§in.');
                }
            };
            reader.readAsText(file);
        }

        // TÃ¼m verileri temizle (gÃ¼ncellenmiÅŸ)
        function clearAllData() {
            if (confirm('Bu iÅŸlem TÃœM VERÄ°LERÄ° siler ve geri alÄ±namaz! Devam etmek istediÄŸinizden emin misiniz?')) {
                if (confirm('Son kez soruyorum: TÃœM VERÄ°LER SÄ°LÄ°NECEK! Emin misiniz?')) {
                    localStorage.clear();
                    kaliteKayitlari = [];
                    siparisHazirlikKayitlari = [];
                    performansKayitlari = [];
                    stokKayitlari = [];
                    
                    // TÃ¼m formlarÄ± temizle
                    document.querySelectorAll('form').forEach(form => form.reset());
                    
                    // Tarih alanlarÄ±nÄ± bugÃ¼ne ayarla
                    const now = new Date();
                    document.getElementById('tarih').value = now.toISOString().slice(0, 16);
                    document.getElementById('hazirlikTarih').value = now.toISOString().slice(0, 10);
                    document.getElementById('performansTarih').value = now.toISOString().slice(0, 10);
                    
                    // TÃ¼m verileri yeniden yÃ¼kle
                    loadStats();
                    loadStokListesi();
                    loadKaliteKayitlari();
                    loadSiparislerListesi();
                    loadIstatistikler();
                    loadVeriTablosu();
                    tumStoklariOzetGoster();
                    
                    alert('TÃ¼m veriler baÅŸarÄ±yla temizlendi!');
                }
            }
        }

        // Alert gÃ¶sterme fonksiyonu
        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (container) {
                const alertClass = type === 'success' ? 'alert-success' : 'alert-error';
                container.innerHTML = `<div class="alert ${alertClass}">${message}</div>`;
                setTimeout(() => {
                    container.innerHTML = '';
                }, 5000);
            }
        }
    </script>
</body>
</html>
