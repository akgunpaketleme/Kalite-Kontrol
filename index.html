<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKG Kalite Kontrol ve Ãœretim Takip Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .tabs {
            display: flex;
            background: #34495e;
            overflow-x: auto;
            padding: 0 20px;
        }
        .tab {
            padding: 12px 18px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-weight: 500;
            font-size: 0.9em;
        }
        .tab:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        .tab.active {
            color: #3498db;
            border-bottom-color: #3498db;
            background: rgba(52, 152, 219, 0.1);
        }
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease-in;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.95em;
        }
        .form-group input,
        .form-group select {
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        .hata-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }
        .hata-container h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.2em;
            text-align: center;
        }
        .hata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
        }
        .hata-item {
            display: flex;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .hata-item input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.3);
        }
        .hata-item label {
            flex: 1;
            margin: 0;
            cursor: pointer;
            font-weight: 500;
            color: #2c3e50;
        }
        .hata-adet-container {
            display: flex;
            gap: 8px;
            margin-left: 10px;
        }
        .hata-adet {
            width: 70px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
        }
        .hata-adet:first-child {
            border-color: #e74c3c;
        }
        .hata-adet:last-child {
            border-color: #f39c12;
        }
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 5px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #219a52);
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .btn-edit {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            padding: 8px 15px;
            font-size: 12px;
            margin: 2px;
        }
        .btn-delete {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 8px 15px;
            font-size: 12px;
            margin: 2px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .stat-card p {
            opacity: 0.9;
            font-size: 0.9em;
        }
        .kayit-item {
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .kayit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c3e50;
        }
        .kayit-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 0.9em;
            color: #666;
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .stok-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .stok-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            text-align: center;
        }
        .stok-item h4 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .stok-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #3498db;
            border-radius: 6px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .stok-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 10px;
        }
        .stok-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .stok-btn:hover {
            background: #2980b9;
        }
        .stok-btn.minus {
            background: #e74c3c;
        }
        .stok-btn.minus:hover {
            background: #c0392b;
        }
        .urun-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .performance-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }
        .performance-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
        }
        .siparis-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .siparis-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .siparis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        .siparis-malzeme {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        .siparis-malzeme h5 {
            margin-bottom: 15px;
            color: #2c3e50;
            text-align: center;
            font-size: 1.1em;
        }
        .malzeme-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }
        .malzeme-adet {
            text-align: center;
            font-weight: bold;
            color: #2c3e50;
        }
        .checkbox-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            font-size: 0.9em;
            padding: 5px 10px;
            border-radius: 4px;
        }
        .checkbox-item input[type="checkbox"] {
            margin-right: 8px;
            transform: scale(1.2);
        }
        .checkbox-item.hazir {
            background: #d4edda;
            border: 1px solid #27ae60;
        }
        .checkbox-item.mevcut {
            background: #e7f3ff;
            border: 1px solid #3498db;
        }
        .edit-form {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            border: 2px solid #3498db;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: black;
        }
        .istatistik-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .istatistik-card h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px;
            border-radius: 6px;
            font-size: 1.2em;
        }
        .istatistik-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .istatistik-item strong {
            color: #2c3e50;
        }
        .istatistik-value {
            font-weight: bold;
            color: #27ae60;
        }
        .veri-tablosu {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        .veri-tablosu th {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        .veri-tablosu td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }
        .veri-tablosu tr:hover {
            background: #f8f9fa;
        }
        .veri-tablosu tr:nth-child(even) {
            background: #f8f9fa;
        }
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            .hata-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .tabs {
                padding: 0 10px;
            }
            .tab {
                padding: 10px 12px;
                font-size: 0.8em;
            }
            .container {
                margin: 5px;
                border-radius: 10px;
            }
            .tab-content {
                padding: 20px 15px;
            }
            .siparis-grid {
                grid-template-columns: 1fr;
            }
            .malzeme-info {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ­ AKG Kalite Kontrol ve Ãœretim Takip Sistemi</h1>
        </div>
        <div class="tabs">
            <div class="tab active" onclick="showTab('kalite-kontrol')">ğŸ“ Kalite Kontrol</div>
            <div class="tab" onclick="showTab('siparis-hazirlik')">ğŸ“‹ SipariÅŸ HazÄ±rlÄ±ÄŸÄ±</div>
            <div class="tab" onclick="showTab('stok')">ğŸ“¦ Stok</div>
            <div class="tab" onclick="showTab('gunluk-performans')">â±ï¸ GÃ¼nlÃ¼k Performans</div>
            <div class="tab" onclick="showTab('istatistikler')">ğŸ“ˆ Ä°statistikler</div>
            <div class="tab" onclick="showTab('veri-goruntule')">ğŸ“Š Veri GÃ¶rÃ¼ntÃ¼le</div>
            <div class="tab" onclick="showTab('raporlar')">ğŸ“‹ Raporlar</div>
            <div class="tab" onclick="showTab('ayarlar')">âš™ï¸ Ayarlar</div>
        </div>

        <!-- Kalite Kontrol Tab -->
        <div id="kalite-kontrol" class="tab-content active">
            <h2>ğŸ” Kalite Kontrol Formu</h2>
            <form id="kaliteForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="tarih">ğŸ“… Tarih/Saat</label>
                        <input type="datetime-local" id="tarih" required>
                    </div>
                    <div class="form-group">
                        <label for="operator">ğŸ‘¤ OperatÃ¶rÃ¼n AdÄ±</label>
                        <input type="text" id="operator" placeholder="OperatÃ¶r adÄ±nÄ± yazÄ±n" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKodu">ğŸ“¦ ÃœrÃ¼n Kodu</label>
                        <input type="text" id="urunKodu" placeholder="ÃœrÃ¼n kodunu girin" required>
                    </div>
                    <div class="form-group">
                        <label for="toplamAdet">ğŸ“Š Toplam Adet</label>
                        <input type="number" id="toplamAdet" min="1" placeholder="Toplam Ã¼rÃ¼n adedi" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisNo">ğŸ·ï¸ SipariÅŸ NumarasÄ±</label>
                        <input type="text" id="siparisNo" placeholder="SipariÅŸ numarasÄ±nÄ± girin" required>
                    </div>
                </div>

                <div class="hata-container">
                    <h3>ğŸš« Hata TÃ¼rleri ve Adetleri</h3>
                    <div style="display: flex; justify-content: flex-end; margin-bottom: 15px; gap: 8px; font-size: 12px; color: #666; font-weight: bold;">
                        <span style="color: #e74c3c; width: 70px; text-align: center;">Ä°skarta</span>
                        <span style="color: #f39c12; width: 70px; text-align: center;">Geri Giden</span>
                    </div>
                    <div class="hata-grid">
                        <div class="hata-item">
                            <input type="checkbox" id="hata1" name="hatalar" value="AÄŸÄ±z yamukluÄŸu">
                            <label for="hata1">AÄŸÄ±z yamukluÄŸu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata2" name="hatalar" value="Yetersiz kaynak">
                            <label for="hata2">Yetersiz kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata3" name="hatalar" value="Fazla kaynak">
                            <label for="hata3">Fazla kaynak</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata4" name="hatalar" value="BakÄ±r erimesi">
                            <label for="hata4">BakÄ±r erimesi</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata5" name="hatalar" value="DÄ±ÅŸa kaynak akmasÄ±">
                            <label for="hata5">DÄ±ÅŸa kaynak akmasÄ±</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata6" name="hatalar" value="Vuruk">
                            <label for="hata6">Vuruk</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata7" name="hatalar" value="BoÄŸum uzunluÄŸu farklÄ±lÄ±ÄŸÄ±">
                            <label for="hata7">BoÄŸum uzunluÄŸu farklÄ±lÄ±ÄŸÄ±</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata8" name="hatalar" value="BoÄŸum yamukluÄŸu">
                            <label for="hata8">BoÄŸum yamukluÄŸu</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata9" name="hatalar" value="Ã‡izik Ã¼rÃ¼n">
                            <label for="hata9">Ã‡izik Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata10" name="hatalar" value="TemizlenememiÅŸ Ã¼rÃ¼n">
                            <label for="hata10">TemizlenememiÅŸ Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hata11" name="hatalar" value="Bilyeli Ã¼rÃ¼n">
                            <label for="hata11">Bilyeli Ã¼rÃ¼n</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                        <div class="hata-item">
                            <input type="checkbox" id="hataDiger" name="hatalar" value="DiÄŸer">
                            <label for="hataDiger">DiÄŸer</label>
                            <div class="hata-adet-container">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                                <input type="number" class="hata-adet" placeholder="0" min="0">
                            </div>
                        </div>
                    </div>
                    
                    <div id="digerHataDetay" style="display: none; margin-top: 15px;">
                        <label for="digerHataAciklama" style="display: block; margin-bottom: 5px; font-weight: bold;">DiÄŸer Hata AÃ§Ä±klamasÄ±:</label>
                        <input type="text" id="digerHataAciklama" placeholder="Hata detayÄ±nÄ± yazÄ±n..." style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px;">
                    </div>
                </div>

                <button type="submit" class="btn">ğŸ’¾ Kalite Kontrol KaydÄ±nÄ± Kaydet</button>
            </form>
            <div id="kaliteAlert"></div>
            
            <div id="kaliteKayitlar">
                <h3>ğŸ“‹ Son Kalite Kontrol KayÄ±tlarÄ±</h3>
                <div id="kaliteKayitlariListesi"></div>
            </div>
        </div>
        <!-- SipariÅŸ HazÄ±rlÄ±ÄŸÄ± Tab -->
        <div id="siparis-hazirlik" class="tab-content">
            <h2>ğŸ“‹ SipariÅŸ HazÄ±rlÄ±ÄŸÄ±</h2>
            
            <!-- Yeni SipariÅŸ Ekleme Formu -->
            <form id="siparisEkleForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hazirlikTarih">ğŸ“… Tarih</label>
                        <input type="date" id="hazirlikTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikOperator">ğŸ‘¤ HazÄ±rlayan</label>
                        <input type="text" id="hazirlikOperator" placeholder="HazÄ±rlayan kiÅŸinin adÄ±" required>
                    </div>
                    <div class="form-group">
                        <label for="hazirlikSiparisNo">ğŸ·ï¸ SipariÅŸ No</label>
                        <input type="text" id="hazirlikSiparisNo" placeholder="SipariÅŸ numarasÄ±" required>
                    </div>
                    <div class="form-group">
                        <label for="urunKoduSiparis">ğŸ“¦ ÃœrÃ¼n Kodu</label>
                        <input type="text" id="urunKoduSiparis" placeholder="ÃœrÃ¼n kodu (Ã¶rn: 1509)" required>
                    </div>
                    <div class="form-group">
                        <label for="siparisAdet">ğŸ“Š SipariÅŸ Adedi</label>
                        <input type="number" id="siparisAdet" min="1" placeholder="SipariÅŸ adedi (Ã¶rn: 1000)" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-success">â• SipariÅŸ Ekle</button>
            </form>
            <div id="siparisEkleAlert"></div>

            <hr style="margin: 30px 0; border: 1px solid #e9ecef;">

            <!-- Mevcut SipariÅŸler -->
            <h3>ğŸ“‹ Mevcut SipariÅŸler</h3>
            <div id="siparislerListesi"></div>

            <!-- Modal for Editing -->
            <div id="editModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>âœï¸ SipariÅŸ DÃ¼zenle</h3>
                    <div id="editFormContainer"></div>
                </div>
            </div>
        </div>

        <!-- Stok Tab -->
        <div id="stok" class="tab-content">
            <h2>ğŸ“¦ Stok Takibi</h2>
            <div class="stok-grid">
                <div class="stok-item">
                    <h4>ğŸ”§ Ä°zolasyon</h4>
                    <input type="text" class="urun-input" id="izolasyonUrun" placeholder="ÃœrÃ¼n Ä°smi">
                    <input type="number" class="stok-input" id="stokIzolasyon" placeholder="0" min="0" readonly>
                    <div class="stok-controls">
                        <button class="stok-btn minus" onclick="changeStok('izolasyon', -1)">-</button>
                        <button class="stok-btn" onclick="changeStok('izolasyon', 1)">+</button>
                    </div>
                    <p>Mevcut Adet</p>
                </div>
                <div class="stok-item">
                    <h4>ğŸ“¦ Koli</h4>
                    <input type="text" class="urun-input" id="koliUrun" placeholder="ÃœrÃ¼n Ä°smi">
                    <input type="number" class="stok-input" id="stokKoli" placeholder="0" min="0" readonly>
                    <div class="stok-controls">
                        <button class="stok-btn minus" onclick="changeStok('koli', -1)">-</button>
                        <button class="stok-btn" onclick="changeStok('koli', 1)">+</button>
                    </div>
                    <p>Mevcut Adet</p>
                </div>
                <div class="stok-item">
                    <h4>ğŸ“¦ Kutu</h4>
                    <input type="text" class="urun-input" id="kutuUrun" placeholder="ÃœrÃ¼n Ä°smi">
                    <input type="number" class="stok-input" id="stokKutu" placeholder="0" min="0" readonly>
                    <div class="stok-controls">
                        <button class="stok-btn minus" onclick="changeStok('kutu', -1)">-</button>
                        <button class="stok-btn" onclick="changeStok('kutu', 1)">+</button>
                    </div>
                    <p>Mevcut Adet</p>
                </div>
                <div class="stok-item">
                    <h4>ğŸ›ï¸ PoÅŸet</h4>
                    <input type="text" class="urun-input" id="posetUrun" placeholder="ÃœrÃ¼n Ä°smi">
                    <input type="text" class="urun-input" id="posetOlculeriStok" placeholder="PoÅŸet Ã–lÃ§Ã¼leri">
                    <input type="number" class="stok-input" id="stokPoset" placeholder="0" min="0" readonly>
                    <div class="stok-controls">
                        <button class="stok-btn minus" onclick="changeStok('poset', -1)">-</button>
                        <button class="stok-btn" onclick="changeStok('poset', 1)">+</button>
                    </div>
                    <p>Mevcut Adet</p>
                </div>
                <div class="stok-item">
                    <h4>ğŸ”´ Tapa</h4>
                    <input type="text" class="urun-input" id="tapaUrun" placeholder="ÃœrÃ¼n Ä°smi">
                    <input type="text" class="urun-input" id="tapaOlculeriStok" placeholder="Tapa Ã–lÃ§Ã¼leri">
                    <input type="number" class="stok-input" id="stokTapa" placeholder="0" min="0" readonly>
                    <div class="stok-controls">
                        <button class="stok-btn minus" onclick="changeStok('tapa', -1)">-</button>
                        <button class="stok-btn" onclick="changeStok('tapa', 1)">+</button>
                    </div>
                    <p>Mevcut Adet</p>
                </div>
                <div class="stok-item">
                    <h4>ğŸ·ï¸ Etiket</h4>
                    <input type="text" class="urun-input" id="etiketUrun" placeholder="ÃœrÃ¼n Ä°smi">
                    <input type="number" class="stok-input" id="stokEtiket" placeholder="0" min="0" readonly>
                    <div class="stok-controls">
                        <button class="stok-btn minus" onclick="changeStok('etiket', -1)">-</button>
                        <button class="stok-btn" onclick="changeStok('etiket', 1)">+</button>
                    </div>
                    <p>Mevcut Adet</p>
                </div>
            </div>
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn" onclick="saveStok()">ğŸ’¾ Stok Bilgilerini Kaydet</button>
                <button class="btn btn-success" onclick="loadStok()" style="margin-left: 10px;">ğŸ”„ Stok Bilgilerini YÃ¼kle</button>
                <button class="btn btn-danger" onclick="resetAllStok()" style="margin-left: 10px;">ğŸ—‘ï¸ TÃ¼m StoklarÄ± SÄ±fÄ±rla</button>
            </div>
            <div id="stokAlert"></div>
        </div>

        <!-- GÃ¼nlÃ¼k Performans Tab -->
        <div id="gunluk-performans" class="tab-content">
            <h2>â±ï¸ GÃ¼nlÃ¼k Ã‡alÄ±ÅŸan PerformansÄ±</h2>
            <form id="performansForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="performansTarih">ğŸ“… Tarih</label>
                        <input type="date" id="performansTarih" required>
                    </div>
                    <div class="form-group">
                        <label for="performansCalisan">ğŸ‘¤ Ã‡alÄ±ÅŸan AdÄ±</label>
                        <input type="text" id="performansCalisan" placeholder="Ã‡alÄ±ÅŸan adÄ±nÄ± yazÄ±n" required>
                    </div>
                </div>

                <div class="performance-grid">
                    <div class="performance-card">
                        <h4>ğŸ“¦ Kutu HazÄ±rlÄ±ÄŸÄ±</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="kutuHazirlikUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="kutuHazirlikAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="kutuHazirlikSure" min="0" placeholder="0">
                        </div>
                    </div>

                    <div class="performance-card">
                        <h4>ğŸ“¦ Koli HazÄ±rlama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="koliHazirlamaUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="koliHazirlamaAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="koliHazirlamaSure" min="0" placeholder="0">
                        </div>
                    </div>

                    <div class="performance-card">
                        <h4>ğŸ”§ Ä°zolasyon Bantlama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="izolasyonUrunPerf" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="izolasyonAdetPerf" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="izolasyonSure" min="0" placeholder="0">
                        </div>
                    </div>

                    <div class="performance-card">
                        <h4>ğŸ” Kalite Kontrol</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="kaliteKontrolUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="kaliteKontrolAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="kaliteKontrolSure" min="0" placeholder="0">
                        </div>
                    </div>

                    <div class="performance-card">
                        <h4>ğŸ›ï¸ PoÅŸetleme</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="posetlemeUrunPerf" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="posetlemeAdetPerf" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="posetlemeSure" min="0" placeholder="0">
                        </div>
                    </div>

                    <div class="performance-card">
                        <h4>ğŸ“¦ ÃœrÃ¼n Kutulama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="urunKutulamaUrun" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="urunKutulamaAdet" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="urunKutulamaSure" min="0" placeholder="0">
                        </div>
                    </div>

                    <div class="performance-card">
                        <h4>âš™ï¸ Ek ParÃ§a HazÄ±rlama</h4>
                        <div class="form-group">
                            <label>ÃœrÃ¼n Ä°smi:</label>
                            <input type="text" id="ekParcaUrunPerf" placeholder="ÃœrÃ¼n Ä°smi">
                        </div>
                        <div class="form-group">
                            <label>Adet:</label>
                            <input type="number" id="ekParcaAdetPerf" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>SÃ¼re (dakika):</label>
                            <input type="number" id="ekParcaSure" min="0" placeholder="0">
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn">ğŸ’¾ Performans KaydÄ±nÄ± Kaydet</button>
            </form>
            <div id="performansAlert"></div>

            <div id="performansKayitlar">
                <h3>ğŸ“‹ Son Performans KayÄ±tlarÄ±</h3>
                <div id="performansKayitlariListesi"></div>
            </div>
        </div>

        <!-- Ä°statistikler Tab -->
        <div id="istatistikler" class="tab-content">
            <h2>ğŸ“ˆ Ä°statistikler</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="toplamKaliteKayit">0</h3>
                    <p>Toplam Kalite Kontrol</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparisKayit">0</h3>
                    <p>Toplam SipariÅŸ</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformansKayit">0</h3>
                    <p>Toplam Performans</p>
                </div>
                <div class="stat-card">
                    <h3 id="tamamlananSiparis">0</h3>
                    <p>Tamamlanan SipariÅŸ</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamHataAdet">0</h3>
                    <p>Toplam HatalÄ± ÃœrÃ¼n</p>
                </div>
                <div class="stat-card">
                    <h3 id="basariOrani">0%</h3>
                    <p>BaÅŸarÄ± OranÄ±</p>
                </div>
            </div>

            <div class="istatistik-card">
                <h4>ğŸ“Š Hata Ä°statistikleri</h4>
                <div id="hataIstatistikleri"></div>
            </div>

            <div class="istatistik-card">
                <h4>â±ï¸ Performans Ä°statistikleri</h4>
                <div id="performansIstatistikleri"></div>
            </div>

            <div class="istatistik-card">
                <h4>ğŸ‘¥ Ã‡alÄ±ÅŸan BazlÄ± Ä°statistikler</h4>
                <div id="calisanIstatistikleri"></div>
            </div>

            <div class="istatistik-card">
                <h4>ğŸ“¦ ÃœrÃ¼n BazlÄ± Ä°statistikler</h4>
                <div id="urunIstatistikleri"></div>
            </div>

            <div class="istatistik-card">
                <h4>ğŸ“ˆ GÃ¼nlÃ¼k Ãœretim Trendi</h4>
                <div id="gunlukTrend"></div>
            </div>
        </div>

        <!-- Veri GÃ¶rÃ¼ntÃ¼le Tab -->
        <div id="veri-goruntule" class="tab-content">
            <h2>ğŸ“Š Veri GÃ¶rÃ¼ntÃ¼le</h2>
            
            <div class="form-grid" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label for="veriTuru">ğŸ” Veri TÃ¼rÃ¼</label>
                    <select id="veriTuru" onchange="loadVeriTablosu()">
                        <option value="kalite">Kalite Kontrol Verileri</option>
                        <option value="siparis">SipariÅŸ HazÄ±rlÄ±k Verileri</option>
                        <option value="performans">Performans Verileri</option>
                        <option value="stok">Stok Verileri</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tarihFiltre">ğŸ“… Tarih Filtresi</label>
                    <select id="tarihFiltre" onchange="loadVeriTablosu()">
                        <option value="hepsi">TÃ¼m Tarihler</option>
                        <option value="bugun">BugÃ¼n</option>
                        <option value="bu-hafta">Bu Hafta</option>
                        <option value="bu-ay">Bu Ay</option>
                    </select>
                </div>
            </div>
            
            <div id="veriTablosuContainer"></div>
            
            <div style="margin-top: 20px; text-align: center;">
                <button class="btn" onclick="exportCurrentData()">ğŸ“¥ GÃ¶rÃ¼ntÃ¼lenen Verileri Excel'e Aktar</button>
            </div>
        </div>

        <!-- Raporlar Tab -->
        <div id="raporlar" class="tab-content">
            <h2>ğŸ“‹ Raporlar</h2>
            <div class="stats-grid" id="statsContainer">
                <div class="stat-card">
                    <h3 id="toplamKayit">0</h3>
                    <p>Toplam Kalite Kontrol KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamSiparis">0</h3>
                    <p>SipariÅŸ HazÄ±rlÄ±k KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="toplamPerformans">0</h3>
                    <p>Performans KaydÄ±</p>
                </div>
                <div class="stat-card">
                    <h3 id="stokSayisi">0</h3>
                    <p>Stok Kalemi</p>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn" onclick="exportToExcel('kalite')">ğŸ“¥ Kalite Verilerini Excel'e Aktar</button>
                <button class="btn btn-success" onclick="exportToExcel('performans')">ğŸ“¥ Performans Verilerini Excel'e Aktar</button>
                <button class="btn" onclick="exportToExcel('siparis')">ğŸ“¥ SipariÅŸ Verilerini Excel'e Aktar</button>
                <button class="btn btn-danger" onclick="exportToExcel('hepsi')">ğŸ“¥ TÃ¼m Verileri Excel'e Aktar</button>
            </div>
        </div>

        <!-- Ayarlar Tab -->
        <div id="ayarlar" class="tab-content">
            <h2>âš™ï¸ Sistem AyarlarÄ±</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>ğŸ’¾ Veri Yedekleme</label>
                    <button class="btn" onclick="exportAllData()">TÃ¼m Verileri Yedekle (JSON)</button>
                </div>
                <div class="form-group">
                    <label>ğŸ“¤ Veri Geri YÃ¼kleme</label>
                    <input type="file" id="importFile" accept=".json" onchange="importData()">
                </div>
                <div class="form-group">
                    <label>ğŸ—‘ï¸ Veri Temizleme</label>
                    <button class="btn btn-danger" onclick="clearAllData()">TÃ¼m Verileri Temizle</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Global deÄŸiÅŸkenler
        let kaliteKayitlari = JSON.parse(localStorage.getItem('kaliteKayitlari') || '[]');
        let siparisHazirlikKayitlari = JSON.parse(localStorage.getItem('siparisHazirlikKayitlari') || '[]');
        let performansKayitlari = JSON.parse(localStorage.getItem('performansKayitlari') || '[]');
        let stokBilgileri = JSON.parse(localStorage.getItem('stokBilgileri') || '{}');

        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const nowString = now.toISOString().slice(0, 16);
            const today = now.toISOString().slice(0, 10);
            
            document.getElementById('tarih').value = nowString;
            document.getElementById('hazirlikTarih').value = today;
            document.getElementById('performansTarih').value = today;
            
            loadStats();
            loadStok();
            loadKaliteKayitlari();
            loadSiparislerListesi();
            loadIstatistikler();
            loadVeriTablosu();

            // DiÄŸer hata checkbox'Ä± iÃ§in listener
            document.getElementById('hataDiger').addEventListener('change', function() {
                const digerDetay = document.getElementById('digerHataDetay');
                digerDetay.style.display = this.checked ? 'block' : 'none';
            });

            // Modal kapatma
            document.querySelector('.close').onclick = function() {
                document.getElementById('editModal').style.display = 'none';
            };

            window.onclick = function(event) {
                const modal = document.getElementById('editModal');
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            };
        });

        // Tab gÃ¶sterme fonksiyonu
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'raporlar') {
                loadStats();
            } else if (tabName === 'kalite-kontrol') {
                loadKaliteKayitlari();
            } else if (tabName === 'siparis-hazirlik') {
                loadSiparislerListesi();
            } else if (tabName === 'gunluk-performans') {
                loadPerformansKayitlari();
            } else if (tabName === 'istatistikler') {
                loadIstatistikler();
            } else if (tabName === 'veri-goruntule') {
                loadVeriTablosu();
            } else if (tabName === 'stok') {
                loadStok();
            }
        }

        // Kalite kontrol form gÃ¶nderimi
        document.getElementById('kaliteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                tip: 'kalite',
                tarih: document.getElementById('tarih').value,
                operator: document.getElementById('operator').value,
                urunKodu: document.getElementById('urunKodu').value,
                toplamAdet: parseInt(document.getElementById('toplamAdet').value),
                siparisNo: document.getElementById('siparisNo').value,
                hatalar: []
            };

            // TÃ¼m hatalarÄ± topla
            document.querySelectorAll('input[name="hatalar"]:checked').forEach(checkbox => {
                const hataItem = checkbox.parentElement;
                const adetInputs = hataItem.querySelectorAll('.hata-adet');
                const iskartaAdet = parseInt(adetInputs[0].value) || 0;
                const geriGidenAdet = parseInt(adetInputs[1].value) || 0;
                
                if (iskartaAdet > 0 || geriGidenAdet > 0) {
                    let hataTur = checkbox.value;
                    if (hataTur === 'DiÄŸer') {
                        const aciklama = document.getElementById('digerHataAciklama').value;
                        hataTur = 'DiÄŸer: ' + aciklama;
                    }
                    
                    formData.hatalar.push({
                        tur: hataTur,
                        iskartaAdet: iskartaAdet,
                        geriGidenAdet: geriGidenAdet
                    });
                }
            });

            kaliteKayitlari.push(formData);
            localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));

            document.getElementById('kaliteForm').reset();
            document.getElementById('tarih').value = new Date().toISOString().slice(0, 16);
            document.getElementById('digerHataDetay').style.display = 'none';

            showAlert('kaliteAlert', 'Kalite kontrol kaydÄ± baÅŸarÄ±yla kaydedildi!', 'success');
            loadStats();
            loadKaliteKayitlari();
        });

        // SipariÅŸ ekleme form gÃ¶nderimi
        document.getElementById('siparisEkleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                tip: 'siparis-hazirlik',
                tarih: document.getElementById('hazirlikTarih').value,
                operator: document.getElementById('hazirlikOperator').value,
                siparisNo: document.getElementById('hazirlikSiparisNo').value,
                urunKodu: document.getElementById('urunKoduSiparis').value,
                siparisAdet: parseInt(document.getElementById('siparisAdet').value),
                malzemeler: {
                    kutu: { yapildi: 0, hazir: false, mevcut: false },
                    koli: { yapildi: 0, hazir: false, mevcut: false },
                    etiket: { yapildi: 0, hazir: false, mevcut: false },
                    poset: { yapildi: 0, hazir: false, mevcut: false },
                    tapa: { yapildi: 0, hazir: false, mevcut: false },
                    izolasyon: { yapildi: 0, hazir: false, mevcut: false }
                }
            };

            siparisHazirlikKayitlari.push(formData);
            localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));

            document.getElementById('siparisEkleForm').reset();
            document.getElementById('hazirlikTarih').value = new Date().toISOString().slice(0, 10);

            showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla eklendi!', 'success');
            loadStats();
            loadSiparislerListesi();
        });

        // Performans form gÃ¶nderimi
        document.getElementById('performansForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                tip: 'performans',
                tarih: document.getElementById('performansTarih').value,
                calisan: document.getElementById('performansCalisan').value,
                kutuHazirlik: {
                    urun: document.getElementById('kutuHazirlikUrun').value,
                    adet: parseInt(document.getElementById('kutuHazirlikAdet').value) || 0,
                    sure: parseInt(document.getElementById('kutuHazirlikSure').value) || 0
                },
                koliHazirlama: {
                    urun: document.getElementById('koliHazirlamaUrun').value,
                    adet: parseInt(document.getElementById('koliHazirlamaAdet').value) || 0,
                    sure: parseInt(document.getElementById('koliHazirlamaSure').value) || 0
                },
                izolasyon: {
                    urun: document.getElementById('izolasyonUrunPerf').value,
                    adet: parseInt(document.getElementById('izolasyonAdetPerf').value) || 0,
                    sure: parseInt(document.getElementById('izolasyonSure').value) || 0
                },
                kaliteKontrol: {
                    urun: document.getElementById('kaliteKontrolUrun').value,
                    adet: parseInt(document.getElementById('kaliteKontrolAdet').value) || 0,
                    sure: parseInt(document.getElementById('kaliteKontrolSure').value) || 0
                },
                posetleme: {
                    urun: document.getElementById('posetlemeUrunPerf').value,
                    adet: parseInt(document.getElementById('posetlemeAdetPerf').value) || 0,
                    sure: parseInt(document.getElementById('posetlemeSure').value) || 0
                },
                urunKutulama: {
                    urun: document.getElementById('urunKutulamaUrun').value,
                    adet: parseInt(document.getElementById('urunKutulamaAdet').value) || 0,
                    sure: parseInt(document.getElementById('urunKutulamaSure').value) || 0
                },
                ekParca: {
                    urun: document.getElementById('ekParcaUrunPerf').value,
                    adet: parseInt(document.getElementById('ekParcaAdetPerf').value) || 0,
                    sure: parseInt(document.getElementById('ekParcaSure').value) || 0
                }
            };

            performansKayitlari.push(formData);
            localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));

            document.getElementById('performansForm').reset();
            document.getElementById('performansTarih').value = new Date().toISOString().slice(0, 10);

            showAlert('performansAlert', 'Performans kaydÄ± baÅŸarÄ±yla kaydedildi!', 'success');
            loadStats();
            loadPerformansKayitlari();
        });

        // Stok deÄŸiÅŸtirme fonksiyonu
        function changeStok(malzeme, miktar) {
            const inputId = 'stok' + malzeme.charAt(0).toUpperCase() + malzeme.slice(1);
            const input = document.getElementById(inputId);
            const currentValue = parseInt(input.value) || 0;
            const newValue = Math.max(0, currentValue + miktar);
            input.value = newValue;
            
            // Otomatik kaydet
            saveStok();
        }

        // Stok kaydetme
        function saveStok() {
            stokBilgileri = {
                izolasyon: {
                    urun: document.getElementById('izolasyonUrun').value,
                    adet: parseInt(document.getElementById('stokIzolasyon').value) || 0
                },
                koli: {
                    urun: document.getElementById('koliUrun').value,
                    adet: parseInt(document.getElementById('stokKoli').value) || 0
                },
                kutu: {
                    urun: document.getElementById('kutuUrun').value,
                    adet: parseInt(document.getElementById('stokKutu').value) || 0
                },
                poset: {
                    urun: document.getElementById('posetUrun').value,
                    adet: parseInt(document.getElementById('stokPoset').value) || 0,
                    olculeri: document.getElementById('posetOlculeriStok').value
                },
                tapa: {
                    urun: document.getElementById('tapaUrun').value,
                    adet: parseInt(document.getElementById('stokTapa').value) || 0,
                    olculeri: document.getElementById('tapaOlculeriStok').value
                },
                etiket: {
                    urun: document.getElementById('etiketUrun').value,
                    adet: parseInt(document.getElementById('stokEtiket').value) || 0
                },
                sonGuncelleme: new Date().toISOString()
            };
            localStorage.setItem('stokBilgileri', JSON.stringify(stokBilgileri));
            showAlert('stokAlert', 'Stok bilgileri kaydedildi!', 'success');
        }

        // Stok yÃ¼kleme
        function loadStok() {
            if (stokBilgileri.izolasyon) {
                document.getElementById('izolasyonUrun').value = stokBilgileri.izolasyon.urun || '';
                document.getElementById('stokIzolasyon').value = stokBilgileri.izolasyon.adet || 0;
            }
            if (stokBilgileri.koli) {
                document.getElementById('koliUrun').value = stokBilgileri.koli.urun || '';
                document.getElementById('stokKoli').value = stokBilgileri.koli.adet || 0;
            }
            if (stokBilgileri.kutu) {
                document.getElementById('kutuUrun').value = stokBilgileri.kutu.urun || '';
                document.getElementById('stokKutu').value = stokBilgileri.kutu.adet || 0;
            }
            if (stokBilgileri.poset) {
                document.getElementById('posetUrun').value = stokBilgileri.poset.urun || '';
                document.getElementById('stokPoset').value = stokBilgileri.poset.adet || 0;
                document.getElementById('posetOlculeriStok').value = stokBilgileri.poset.olculeri || '';
            }
            if (stokBilgileri.tapa) {
                document.getElementById('tapaUrun').value = stokBilgileri.tapa.urun || '';
                document.getElementById('stokTapa').value = stokBilgileri.tapa.adet || 0;
                document.getElementById('tapaOlculeriStok').value = stokBilgileri.tapa.olculeri || '';
            }
            if (stokBilgileri.etiket) {
                document.getElementById('etiketUrun').value = stokBilgileri.etiket.urun || '';
                document.getElementById('stokEtiket').value = stokBilgileri.etiket.adet || 0;
            }
        }

        // TÃ¼m stoklarÄ± sÄ±fÄ±rlama
        function resetAllStok() {
            if (confirm('TÃ¼m stok deÄŸerlerini sÄ±fÄ±rlamak istediÄŸinizden emin misiniz?')) {
                document.querySelectorAll('.stok-input').forEach(input => {
                    input.value = 0;
                });
                saveStok();
                showAlert('stokAlert', 'TÃ¼m stok deÄŸerleri sÄ±fÄ±rlandÄ±!', 'success');
            }
        }

        // SipariÅŸler listesini yÃ¼kle
        function loadSiparislerListesi() {
            const container = document.getElementById('siparislerListesi');
            if (siparisHazirlikKayitlari.length === 0) {
                container.innerHTML = '<p>HenÃ¼z sipariÅŸ kaydÄ± bulunmuyor.</p>';
                return;
            }

            container.innerHTML = siparisHazirlikKayitlari.map(siparis => `
                <div class="siparis-item">
                    <div class="siparis-header">
                        <div>
                            <h4>ğŸ“‹ SipariÅŸ: ${siparis.siparisNo}</h4>
                            <p>ğŸ“¦ ${siparis.urunKodu} - ${siparis.siparisAdet} adet</p>
                        </div>
                        <div style="text-align: right;">
                            <span>ğŸ“… ${new Date(siparis.tarih).toLocaleDateString('tr-TR')}</span><br>
                            <span>ğŸ‘¤ ${siparis.operator}</span>
                        </div>
                    </div>
                    <div class="siparis-grid">
                        ${Object.keys(siparis.malzemeler).map(malzeme => `
                            <div class="siparis-malzeme">
                                <h5>${getMalzemeIcon(malzeme)} ${getMalzemeAd(malzeme)}</h5>
                                <div class="malzeme-info">
                                    <div class="malzeme-adet">
                                        <input type="number" value="${siparis.malzemeler[malzeme].yapildi}" 
                                               onchange="updateMalzemeAdet(${siparis.id}, '${malzeme}', this.value)"
                                               style="width: 60px; padding: 5px; text-align: center; border: 1px solid #ddd; border-radius: 3px;">
                                        <br><small>YapÄ±lan</small>
                                    </div>
                                    <div class="checkbox-container">
                                        <div class="checkbox-item hazir">
                                            <input type="checkbox" id="hazir_${siparis.id}_${malzeme}" 
                                                   ${siparis.malzemeler[malzeme].hazir ? 'checked' : ''}
                                                   onchange="updateSiparis(${siparis.id}, '${malzeme}', 'hazir', this.checked)">
                                            <label for="hazir_${siparis.id}_${malzeme}">âœ… HazÄ±r</label>
                                        </div>
                                        <div class="checkbox-item mevcut">
                                            <input type="checkbox" id="mevcut_${siparis.id}_${malzeme}" 
                                                   ${siparis.malzemeler[malzeme].mevcut ? 'checked' : ''}
                                                   onchange="updateSiparis(${siparis.id}, '${malzeme}', 'mevcut', this.checked)">
                                            <label for="mevcut_${siparis.id}_${malzeme}">ğŸ“¦ Mevcut</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="margin-top: 15px; text-align: center;">
                        <button class="btn-edit" onclick="editSiparis(${siparis.id})">âœï¸ DÃ¼zenle</button>
                        <button class="btn-delete" onclick="deleteSiparis(${siparis.id})">ğŸ—‘ï¸ Sil</button>
                        <span style="margin-left: 20px; padding: 8px 15px; border-radius: 15px; font-weight: bold; ${getSiparisStatus(siparis)}">
                            ${getSiparisStatusText(siparis)}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        function getMalzemeIcon(malzeme) {
            const icons = {
                kutu: 'ğŸ“¦',
                koli: 'ğŸ“¦',
                etiket: 'ğŸ·ï¸',
                poset: 'ğŸ›ï¸',
                tapa: 'ğŸ”´',
                izolasyon: 'ğŸ”§'
            };
            return icons[malzeme] || 'ğŸ“¦';
        }

        function getMalzemeAd(malzeme) {
            const adlar = {
                kutu: 'Kutu',
                koli: 'Koli',
                etiket: 'Etiket',
                poset: 'PoÅŸet',
                tapa: 'Tapa',
                izolasyon: 'Ä°zolasyon'
            };
            return adlar[malzeme] || malzeme;
        }

        function getSiparisStatus(siparis) {
            const tamamlanan = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
            const toplam = Object.keys(siparis.malzemeler).length;
            
            if (tamamlanan === toplam) {
                return 'background: #d4edda; color: #155724; border: 1px solid #c3e6cb;';
            } else if (tamamlanan > 0) {
                return 'background: #fff3cd; color: #856404; border: 1px solid #ffeaa7;';
            } else {
                return 'background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;';
            }
        }

        function getSiparisStatusText(siparis) {
            const tamamlanan = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
            const toplam = Object.keys(siparis.malzemeler).length;
            
            if (tamamlanan === toplam) {
                return 'âœ… TamamlandÄ±';
            } else if (tamamlanan > 0) {
                return `ğŸ”„ Devam Ediyor (${tamamlanan}/${toplam})`;
            } else {
                return 'â³ Beklemede';
            }
        }

        // Malzeme adet gÃ¼ncelleme
        function updateMalzemeAdet(id, malzeme, adet) {
            const siparisIndex = siparisHazirlikKayitlari.findIndex(s => s.id === id);
            if (siparisIndex !== -1) {
                siparisHazirlikKayitlari[siparisIndex].malzemeler[malzeme].yapildi = parseInt(adet) || 0;
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
            }
        }

        // SipariÅŸ gÃ¼ncelleme
        function updateSiparis(id, malzeme, durum, deger) {
            const siparisIndex = siparisHazirlikKayitlari.findIndex(s => s.id === id);
            if (siparisIndex !== -1) {
                siparisHazirlikKayitlari[siparisIndex].malzemeler[malzeme][durum] = deger;
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                // Sayfa yenilemeden gÃ¼ncelle
                setTimeout(() => loadSiparislerListesi(), 100);
            }
        }

        // SipariÅŸ dÃ¼zenleme
        function editSiparis(id) {
            const siparis = siparisHazirlikKayitlari.find(s => s.id === id);
            if (!siparis) return;

            const modal = document.getElementById('editModal');
            const container = document.getElementById('editFormContainer');
            
            container.innerHTML = `
                <form id="editSiparisForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ğŸ“… Tarih</label>
                            <input type="date" id="editTarih" value="${siparis.tarih}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ‘¤ HazÄ±rlayan</label>
                            <input type="text" id="editOperator" value="${siparis.operator}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ·ï¸ SipariÅŸ No</label>
                            <input type="text" id="editSiparisNo" value="${siparis.siparisNo}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“¦ ÃœrÃ¼n Kodu</label>
                            <input type="text" id="editUrunKodu" value="${siparis.urunKodu}" required>
                        </div>
                        <div class="form-group">
                            <label>ğŸ“Š SipariÅŸ Adedi</label>
                            <input type="number" id="editSiparisAdet" value="${siparis.siparisAdet}" min="1" required>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <button type="submit" class="btn btn-success">ğŸ’¾ GÃ¼ncelle</button>
                        <button type="button" class="btn" onclick="document.getElementById('editModal').style.display='none'">âŒ Ä°ptal</button>
                    </div>
                </form>
            `;

            document.getElementById('editSiparisForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const siparisIndex = siparisHazirlikKayitlari.findIndex(s => s.id === id);
                if (siparisIndex !== -1) {
                    siparisHazirlikKayitlari[siparisIndex].tarih = document.getElementById('editTarih').value;
                    siparisHazirlikKayitlari[siparisIndex].operator = document.getElementById('editOperator').value;
                    siparisHazirlikKayitlari[siparisIndex].siparisNo = document.getElementById('editSiparisNo').value;
                    siparisHazirlikKayitlari[siparisIndex].urunKodu = document.getElementById('editUrunKodu').value;
                    siparisHazirlikKayitlari[siparisIndex].siparisAdet = parseInt(document.getElementById('editSiparisAdet').value);
                    
                    localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                    modal.style.display = 'none';
                    loadSiparislerListesi();
                    showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla gÃ¼ncellendi!', 'success');
                }
            });

            modal.style.display = 'block';
        }

        // SipariÅŸ silme
        function deleteSiparis(id) {
            if (confirm('Bu sipariÅŸi silmek istediÄŸinizden emin misiniz?')) {
                siparisHazirlikKayitlari = siparisHazirlikKayitlari.filter(s => s.id !== id);
                localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                loadSiparislerListesi();
                loadStats();
                showAlert('siparisEkleAlert', 'SipariÅŸ baÅŸarÄ±yla silindi!', 'success');
            }
        }

        // Ä°statistikleri yÃ¼kle
        function loadIstatistikler() {
            // Temel sayÄ±lar
            document.getElementById('toplamKaliteKayit').textContent = kaliteKayitlari.length;
            document.getElementById('toplamSiparisKayit').textContent = siparisHazirlikKayitlari.length;
            document.getElementById('toplamPerformansKayit').textContent = performansKayitlari.length;
            
            // Tamamlanan sipariÅŸler
            const tamamlananSiparisler = siparisHazirlikKayitlari.filter(siparis => {
                return Object.values(siparis.malzemeler).every(malzeme => malzeme.hazir);
            }).length;
            document.getElementById('tamamlananSiparis').textContent = tamamlananSiparisler;

            // Toplam hatalÄ± Ã¼rÃ¼n
            let toplamHata = 0;
            kaliteKayitlari.forEach(kayit => {
                kayit.hatalar.forEach(hata => {
                    toplamHata += hata.iskartaAdet + hata.geriGidenAdet;
                });
            });
            document.getElementById('toplamHataAdet').textContent = toplamHata;

            // BaÅŸarÄ± oranÄ±
            const toplamUretim = kaliteKayitlari.reduce((total, kayit) => total + kayit.toplamAdet, 0);
            const basariOrani = toplamUretim > 0 ? Math.round(((toplamUretim - toplamHata) / toplamUretim) * 100) : 0;
            document.getElementById('basariOrani').textContent = basariOrani + '%';

            // Hata istatistikleri
            const hataStats = {};
            kaliteKayitlari.forEach(kayit => {
                kayit.hatalar.forEach(hata => {
                    if (!hataStats[hata.tur]) {
                        hataStats[hata.tur] = { iskarta: 0, geriGiden: 0 };
                    }
                    hataStats[hata.tur].iskarta += hata.iskartaAdet;
                    hataStats[hata.tur].geriGiden += hata.geriGidenAdet;
                });
            });

            const hataContainer = document.getElementById('hataIstatistikleri');
            hataContainer.innerHTML = Object.keys(hataStats).map(hataTur => `
                <div class="istatistik-item">
                    <strong>${hataTur}</strong>
                    <span class="istatistik-value">Ä°skarta: ${hataStats[hataTur].iskarta}, Geri Giden: ${hataStats[hataTur].geriGiden}</span>
                </div>
            `).join('') || '<p style="text-align: center; color: #666;">HenÃ¼z hata kaydÄ± bulunmuyor.</p>';

            // Performans istatistikleri
            const performansStats = {
                kutuHazirlik: { toplam: 0, sure: 0 },
                koliHazirlama: { toplam: 0, sure: 0 },
                izolasyon: { toplam: 0, sure: 0 },
                kaliteKontrol: { toplam: 0, sure: 0 }
            };

            performansKayitlari.forEach(kayit => {
                performansStats.kutuHazirlik.toplam += kayit.kutuHazirlik.adet;
                performansStats.kutuHazirlik.sure += kayit.kutuHazirlik.sure;
                performansStats.koliHazirlama.toplam += kayit.koliHazirlama.adet;
                performansStats.koliHazirlama.sure += kayit.koliHazirlama.sure;
                performansStats.izolasyon.toplam += kayit.izolasyon.adet;
                performansStats.izolasyon.sure += kayit.izolasyon.sure;
                performansStats.kaliteKontrol.toplam += kayit.kaliteKontrol.adet;
                performansStats.kaliteKontrol.sure += kayit.kaliteKontrol.sure;
            });

            const performansContainer = document.getElementById('performansIstatistikleri');
            performansContainer.innerHTML = `
                <div class="istatistik-item">
                    <strong>Kutu HazÄ±rlÄ±k</strong>
                    <span class="istatistik-value">${performansStats.kutuHazirlik.toplam} adet, ${performansStats.kutuHazirlik.sure} dk</span>
                </div>
                <div class="istatistik-item">
                    <strong>Koli HazÄ±rlama</strong>
                    <span class="istatistik-value">${performansStats.koliHazirlama.toplam} adet, ${performansStats.koliHazirlama.sure} dk</span>
                </div>
                <div class="istatistik-item">
                    <strong>Ä°zolasyon</strong>
                    <span class="istatistik-value">${performansStats.izolasyon.toplam} adet, ${performansStats.izolasyon.sure} dk</span>
                </div>
                <div class="istatistik-item">
                    <strong>Kalite Kontrol</strong>
                    <span class="istatistik-value">${performansStats.kaliteKontrol.toplam} adet, ${performansStats.kaliteKontrol.sure} dk</span>
                </div>
            `;

            // Ã‡alÄ±ÅŸan istatistikleri
            const calisanStats = {};
            performansKayitlari.forEach(kayit => {
                if (!calisanStats[kayit.calisan]) {
                    calisanStats[kayit.calisan] = { kayitSayisi: 0, toplamSure: 0 };
                }
                calisanStats[kayit.calisan].kayitSayisi++;
                calisanStats[kayit.calisan].toplamSure += 
                    kayit.kutuHazirlik.sure + kayit.koliHazirlama.sure + kayit.izolasyon.sure + kayit.kaliteKontrol.sure;
            });

            const calisanContainer = document.getElementById('calisanIstatistikleri');
            calisanContainer.innerHTML = Object.keys(calisanStats).map(calisan => `
                <div class="istatistik-item">
                    <strong>${calisan}</strong>
                    <span class="istatistik-value">${calisanStats[calisan].kayitSayisi} gÃ¼n, ${calisanStats[calisan].toplamSure} dk toplam</span>
                </div>
            `).join('') || '<p style="text-align: center; color: #666;">HenÃ¼z Ã§alÄ±ÅŸan performans kaydÄ± bulunmuyor.</p>';

            // ÃœrÃ¼n istatistikleri
            const urunStats = {};
            kaliteKayitlari.forEach(kayit => {
                if (!urunStats[kayit.urunKodu]) {
                    urunStats[kayit.urunKodu] = 0;
                }
                urunStats[kayit.urunKodu] += kayit.toplamAdet;
            });

            const urunContainer = document.getElementById('urunIstatistikleri');
            urunContainer.innerHTML = Object.keys(urunStats).map(urun => `
                <div class="istatistik-item">
                    <strong>ÃœrÃ¼n ${urun}</strong>
                    <span class="istatistik-value">${urunStats[urun]} adet Ã¼retildi</span>
                </div>
            `).join('') || '<p style="text-align: center; color: #666;">HenÃ¼z Ã¼rÃ¼n Ã¼retim kaydÄ± bulunmuyor.</p>';

            // GÃ¼nlÃ¼k trend
            const gunlukUretim = {};
            kaliteKayitlari.forEach(kayit => {
                const tarih = kayit.tarih.split('T')[0];
                if (!gunlukUretim[tarih]) {
                    gunlukUretim[tarih] = 0;
                }
                gunlukUretim[tarih] += kayit.toplamAdet;
            });

            const trendContainer = document.getElementById('gunlukTrend');
            const sortedDates = Object.keys(gunlukUretim).sort().slice(-7); // Son 7 gÃ¼n
            trendContainer.innerHTML = sortedDates.map(tarih => `
                <div class="istatistik-item">
                    <strong>${new Date(tarih).toLocaleDateString('tr-TR')}</strong>
                    <span class="istatistik-value">${gunlukUretim[tarih]} adet</span>
                </div>
            `).join('') || '<p style="text-align: center; color: #666;">HenÃ¼z gÃ¼nlÃ¼k Ã¼retim verisi bulunmuyor.</p>';
        }

        // Veri tablosu yÃ¼kleme
        function loadVeriTablosu() {
            const veriTuru = document.getElementById('veriTuru').value;
            const tarihFiltre = document.getElementById('tarihFiltre').value;
            const container = document.getElementById('veriTablosuContainer');
            
            let data = [];
            let headers = [];
            
            // Tarih filtreleme
            const now = new Date();
            const bugun = now.toISOString().split('T')[0];
            const buHaftaBasi = new Date(now.setDate(now.getDate() - now.getDay())).toISOString().split('T')[0];
            const buAyBasi = new Date(now.getFullYear(), now.getMonth(), 1).toISOString().split('T')[0];
            
            function tarihFiltrele(kayit) {
                const kayitTarih = kayit.tarih.split('T')[0];
                switch(tarihFiltre) {
                    case 'bugun': return kayitTarih === bugun;
                    case 'bu-hafta': return kayitTarih >= buHaftaBasi;
                    case 'bu-ay': return kayitTarih >= buAyBasi;
                    default: return true;
                }
            }
            
            switch(veriTuru) {
                case 'kalite':
                    data = kaliteKayitlari.filter(tarihFiltrele);
                    headers = ['Tarih', 'OperatÃ¶r', 'ÃœrÃ¼n Kodu', 'Toplam Adet', 'SipariÅŸ No', 'Hata SayÄ±sÄ±'];
                    break;
                case 'siparis':
                    data = siparisHazirlikKayitlari.filter(tarihFiltrele);
                    headers = ['Tarih', 'HazÄ±rlayan', 'SipariÅŸ No', 'ÃœrÃ¼n Kodu', 'Adet', 'Durum'];
                    break;
                case 'performans':
                    data = performansKayitlari.filter(tarihFiltrele);
 headers = ['Tarih', 'Ã‡alÄ±ÅŸan', 'Kutu HazÄ±rlÄ±k', 'Koli HazÄ±rlama', 'Ä°zolasyon', 'Kalite Kontrol', 'Toplam SÃ¼re'];
                    break;
                case 'stok':
                    data = [stokBilgileri];
                    headers = ['Malzeme', 'ÃœrÃ¼n', 'Adet', 'Ã–lÃ§Ã¼ler', 'Son GÃ¼ncelleme'];
                    break;
            }
            
            if (data.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">SeÃ§ilen kriterlere gÃ¶re veri bulunamadÄ±.</p>';
                return;
            }
            
            let tableHTML = `
                <table class="veri-tablosu">
                    <thead>
                        <tr>${headers.map(h => `<th>${h}</th>`).join('')}</tr>
                    </thead>
                    <tbody>
            `;
            
            if (veriTuru === 'stok') {
                // Stok verileri iÃ§in Ã¶zel format
                Object.keys(stokBilgileri).forEach(malzeme => {
                    if (malzeme !== 'sonGuncelleme' && stokBilgileri[malzeme]) {
                        const stok = stokBilgileri[malzeme];
                        tableHTML += `
                            <tr>
                                <td>${getMalzemeAd(malzeme)}</td>
                                <td>${stok.urun || '-'}</td>
                                <td>${stok.adet || 0}</td>
                                <td>${stok.olculeri || '-'}</td>
                                <td>${stokBilgileri.sonGuncelleme ? new Date(stokBilgileri.sonGuncelleme).toLocaleString('tr-TR') : '-'}</td>
                            </tr>
                        `;
                    }
                });
            } else {
                data.forEach(row => {
                    tableHTML += '<tr>';
                    switch(veriTuru) {
                        case 'kalite':
                            const toplamHata = row.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                            tableHTML += `
                                <td>${new Date(row.tarih).toLocaleString('tr-TR')}</td>
                                <td>${row.operator}</td>
                                <td>${row.urunKodu}</td>
                                <td>${row.toplamAdet}</td>
                                <td>${row.siparisNo}</td>
                                <td>${toplamHata}</td>
                            `;
                            break;
                        case 'siparis':
                            const tamamlanan = Object.values(row.malzemeler).filter(m => m.hazir).length;
                            const toplam = Object.keys(row.malzemeler).length;
                            const durum = tamamlanan === toplam ? 'TamamlandÄ±' : `${tamamlanan}/${toplam}`;
                            tableHTML += `
                                <td>${new Date(row.tarih).toLocaleDateString('tr-TR')}</td>
                                <td>${row.operator}</td>
                                <td>${row.siparisNo}</td>
                                <td>${row.urunKodu}</td>
                                <td>${row.siparisAdet}</td>
                                <td>${durum}</td>
                            `;
                            break;
                        case 'performans':
                            const toplamSure = row.kutuHazirlik.sure + row.koliHazirlama.sure + row.izolasyon.sure + row.kaliteKontrol.sure;
                            tableHTML += `
                                <td>${new Date(row.tarih).toLocaleDateString('tr-TR')}</td>
                                <td>${row.calisan}</td>
                                <td>${row.kutuHazirlik.adet} adet (${row.kutuHazirlik.sure} dk)</td>
                                <td>${row.koliHazirlama.adet} adet (${row.koliHazirlama.sure} dk)</td>
                                <td>${row.izolasyon.adet} adet (${row.izolasyon.sure} dk)</td>
                                <td>${row.kaliteKontrol.adet} adet (${row.kaliteKontrol.sure} dk)</td>
                                <td>${toplamSure} dakika</td>
                            `;
                            break;
                    }
                    tableHTML += '</tr>';
                });
            }
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            container.innerHTML = tableHTML;
        }

        // Kalite kayÄ±tlarÄ±nÄ± yÃ¼kle
        function loadKaliteKayitlari() {
            const container = document.getElementById('kaliteKayitlariListesi');
            if (kaliteKayitlari.length === 0) {
                container.innerHTML = '<p>HenÃ¼z kalite kontrol kaydÄ± bulunmuyor.</p>';
                return;
            }

            const sonKayitlar = kaliteKayitlari.slice(-10).reverse(); // Son 10 kayÄ±t
            container.innerHTML = sonKayitlar.map(kayit => {
                const toplamHata = kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                return `
                    <div class="kayit-item">
                        <div class="kayit-header">
                            <span>ğŸ“¦ ${kayit.urunKodu} - ${kayit.toplamAdet} adet</span>
                            <span>ğŸ“… ${new Date(kayit.tarih).toLocaleString('tr-TR')}</span>
                        </div>
                        <div class="kayit-details">
                            <div><strong>OperatÃ¶r:</strong> ${kayit.operator}</div>
                            <div><strong>SipariÅŸ No:</strong> ${kayit.siparisNo}</div>
                            <div><strong>Toplam Hata:</strong> ${toplamHata} adet</div>
                            <div><strong>BaÅŸarÄ± OranÄ±:</strong> ${Math.round((1 - toplamHata/kayit.toplamAdet) * 100)}%</div>
                        </div>
                        ${kayit.hatalar.length > 0 ? `
                            <div style="margin-top: 10px;">
                                <strong>Hatalar:</strong><br>
                                ${kayit.hatalar.map(hata => 
                                    `<small>â€¢ ${hata.tur}: Ä°skarta ${hata.iskartaAdet}, Geri Giden ${hata.geriGidenAdet}</small>`
                                ).join('<br>')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // Performans kayÄ±tlarÄ±nÄ± yÃ¼kle
        function loadPerformansKayitlari() {
            const container = document.getElementById('performansKayitlariListesi');
            if (performansKayitlari.length === 0) {
                container.innerHTML = '<p>HenÃ¼z performans kaydÄ± bulunmuyor.</p>';
                return;
            }

            const sonKayitlar = performansKayitlari.slice(-10).reverse(); // Son 10 kayÄ±t
            container.innerHTML = sonKayitlar.map(kayit => {
                const toplamSure = kayit.kutuHazirlik.sure + kayit.koliHazirlama.sure + kayit.izolasyon.sure + kayit.kaliteKontrol.sure;
                const toplamAdet = kayit.kutuHazirlik.adet + kayit.koliHazirlama.adet + kayit.izolasyon.adet + kayit.kaliteKontrol.adet;
                return `
                    <div class="kayit-item">
                        <div class="kayit-header">
                            <span>ğŸ‘¤ ${kayit.calisan}</span>
                            <span>ğŸ“… ${new Date(kayit.tarih).toLocaleDateString('tr-TR')}</span>
                        </div>
                        <div class="kayit-details">
                            <div><strong>Toplam Ä°ÅŸlem:</strong> ${toplamAdet} adet</div>
                            <div><strong>Toplam SÃ¼re:</strong> ${toplamSure} dakika</div>
                            <div><strong>Ortalama HÄ±z:</strong> ${toplamSure > 0 ? Math.round(toplamAdet/toplamSure*60) : 0} adet/saat</div>
                            <div><strong>En YoÄŸun Ä°ÅŸlem:</strong> ${getEnYogunIslem(kayit)}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getEnYogunIslem(kayit) {
            const islemler = [
                { ad: 'Kutu HazÄ±rlÄ±k', adet: kayit.kutuHazirlik.adet },
                { ad: 'Koli HazÄ±rlama', adet: kayit.koliHazirlama.adet },
                { ad: 'Ä°zolasyon', adet: kayit.izolasyon.adet },
                { ad: 'Kalite Kontrol', adet: kayit.kaliteKontrol.adet }
            ];
            const enYogun = islemler.reduce((max, islem) => islem.adet > max.adet ? islem : max);
            return enYogun.adet > 0 ? enYogun.ad : 'Yok';
        }

        // Mevcut verileri dÄ±ÅŸa aktar
        function exportCurrentData() {
            const veriTuru = document.getElementById('veriTuru').value;
            let data, filename;
            
            switch(veriTuru) {
                case 'kalite':
                    data = kaliteKayitlari;
                    filename = 'kalite_kontrol_verileri';
                    break;
                case 'siparis':
                    data = siparisHazirlikKayitlari;
                    filename = 'siparis_hazirlik_verileri';
                    break;
                case 'performans':
                    data = performansKayitlari;
                    filename = 'performans_verileri';
                    break;
                case 'stok':
                    data = [stokBilgileri];
                    filename = 'stok_verileri';
                    break;
            }
            
            exportToExcel(veriTuru, filename);
        }

        // Ä°statistikleri yÃ¼kle
        function loadStats() {
            document.getElementById('toplamKayit').textContent = kaliteKayitlari.length;
            document.getElementById('toplamSiparis').textContent = siparisHazirlikKayitlari.length;
            document.getElementById('toplamPerformans').textContent = performansKayitlari.length;
            document.getElementById('stokSayisi').textContent = Object.keys(stokBilgileri).filter(k => k !== 'sonGuncelleme').length;
        }

        // Alert gÃ¶sterme
        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            const alertClass = type === 'success' ? 'alert-success' : 'alert-error';
            container.innerHTML = `<div class="alert ${alertClass}">${message}</div>`;
            
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        // Excel'e aktarma fonksiyonu
        function exportToExcel(type, customFilename) {
            let data, headers, filename;
            
            switch(type) {
                case 'kalite':
                    data = kaliteKayitlari.map(kayit => {
                        const toplamHata = kayit.hatalar.reduce((total, hata) => total + hata.iskartaAdet + hata.geriGidenAdet, 0);
                        return {
                            'Tarih': new Date(kayit.tarih).toLocaleString('tr-TR'),
                            'OperatÃ¶r': kayit.operator,
                            'ÃœrÃ¼n Kodu': kayit.urunKodu,
                            'Toplam Adet': kayit.toplamAdet,
                            'SipariÅŸ No': kayit.siparisNo,
                            'Toplam Hata': toplamHata,
                            'BaÅŸarÄ± OranÄ±': Math.round((1 - toplamHata/kayit.toplamAdet) * 100) + '%',
                            'Hatalar': kayit.hatalar.map(h => `${h.tur}: Ä°${h.iskartaAdet} G${h.geriGidenAdet}`).join('; ')
                        };
                    });
                    filename = customFilename || 'kalite_kontrol_verileri';
                    break;
                    
                case 'performans':
                    data = performansKayitlari.map(kayit => {
                        const toplamSure = kayit.kutuHazirlik.sure + kayit.koliHazirlama.sure + kayit.izolasyon.sure + kayit.kaliteKontrol.sure;
                        return {
                            'Tarih': new Date(kayit.tarih).toLocaleDateString('tr-TR'),
                            'Ã‡alÄ±ÅŸan': kayit.calisan,
                            'Kutu HazÄ±rlÄ±k Adet': kayit.kutuHazirlik.adet,
                            'Kutu HazÄ±rlÄ±k SÃ¼re': kayit.kutuHazirlik.sure,
                            'Koli HazÄ±rlama Adet': kayit.koliHazirlama.adet,
                            'Koli HazÄ±rlama SÃ¼re': kayit.koliHazirlama.sure,
                            'Ä°zolasyon Adet': kayit.izolasyon.adet,
                            'Ä°zolasyon SÃ¼re': kayit.izolasyon.sure,
                            'Kalite Kontrol Adet': kayit.kaliteKontrol.adet,
                            'Kalite Kontrol SÃ¼re': kayit.kaliteKontrol.sure,
                            'Toplam SÃ¼re': toplamSure
                        };
                    });
                    filename = customFilename || 'performans_verileri';
                    break;
                    
                case 'siparis':
                    data = siparisHazirlikKayitlari.map(siparis => {
                        const tamamlanan = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
                        const toplam = Object.keys(siparis.malzemeler).length;
                        return {
                            'Tarih': new Date(siparis.tarih).toLocaleDateString('tr-TR'),
                            'HazÄ±rlayan': siparis.operator,
                            'SipariÅŸ No': siparis.siparisNo,
                            'ÃœrÃ¼n Kodu': siparis.urunKodu,
                            'SipariÅŸ Adedi': siparis.siparisAdet,
                            'Tamamlanan/Toplam': `${tamamlanan}/${toplam}`,
                            'Durum': tamamlanan === toplam ? 'TamamlandÄ±' : 'Devam Ediyor',
                            'Kutu YapÄ±lan': siparis.malzemeler.kutu.yapildi,
                            'Kutu HazÄ±r': siparis.malzemeler.kutu.hazir ? 'Evet' : 'HayÄ±r',
                            'Koli YapÄ±lan': siparis.malzemeler.koli.yapildi,
                            'Koli HazÄ±r': siparis.malzemeler.koli.hazir ? 'Evet' : 'HayÄ±r',
                            'Ä°zolasyon YapÄ±lan': siparis.malzemeler.izolasyon.yapildi,
                            'Ä°zolasyon HazÄ±r': siparis.malzemeler.izolasyon.hazir ? 'Evet' : 'HayÄ±r'
                        };
                    });
                    filename = customFilename || 'siparis_hazirlik_verileri';
                    break;
                    
                case 'hepsi':
                    // TÃ¼m veriler iÃ§in kombinasyonu oluÅŸtur
                    const tumVeriler = [];
                    
                    kaliteKayitlari.forEach(kayit => {
                        tumVeriler.push({
                            'Veri TÃ¼rÃ¼': 'Kalite Kontrol',
                            'Tarih': new Date(kayit.tarih).toLocaleString('tr-TR'),
                            'KiÅŸi': kayit.operator,
                            'ÃœrÃ¼n/SipariÅŸ': kayit.urunKodu,
                            'Adet': kayit.toplamAdet,
                            'Detay': `SipariÅŸ: ${kayit.siparisNo}`,
                            'Durum': 'TamamlandÄ±'
                        });
                    });
                    
                    siparisHazirlikKayitlari.forEach(siparis => {
                        const tamamlanan = Object.values(siparis.malzemeler).filter(m => m.hazir).length;
                        const toplam = Object.keys(siparis.malzemeler).length;
                        tumVeriler.push({
                            'Veri TÃ¼rÃ¼': 'SipariÅŸ HazÄ±rlÄ±k',
                            'Tarih': new Date(siparis.tarih).toLocaleDateString('tr-TR'),
                            'KiÅŸi': siparis.operator,
                            'ÃœrÃ¼n/SipariÅŸ': siparis.siparisNo,
                            'Adet': siparis.siparisAdet,
                            'Detay': `ÃœrÃ¼n: ${siparis.urunKodu}`,
                            'Durum': tamamlanan === toplam ? 'TamamlandÄ±' : `${tamamlanan}/${toplam}`
                        });
                    });
                    
                    performansKayitlari.forEach(kayit => {
                        const toplamSure = kayit.kutuHazirlik.sure + kayit.koliHazirlama.sure + kayit.izolasyon.sure + kayit.kaliteKontrol.sure;
                        tumVeriler.push({
                            'Veri TÃ¼rÃ¼': 'Performans',
                            'Tarih': new Date(kayit.tarih).toLocaleDateString('tr-TR'),
                            'KiÅŸi': kayit.calisan,
                            'ÃœrÃ¼n/SipariÅŸ': 'Performans KaydÄ±',
                            'Adet': '-',
                            'Detay': `Toplam ${toplamSure} dakika`,
                            'Durum': 'KayÄ±tlÄ±'
                        });
                    });
                    
                    data = tumVeriler;
                    filename = 'tum_veriler';
                    break;
                    
                default:
                    alert('GeÃ§ersiz veri tÃ¼rÃ¼!');
                    return;
            }
            
            if (data.length === 0) {
                alert('DÄ±ÅŸa aktarÄ±lacak veri bulunamadÄ±!');
                return;
            }
            
            // CSV formatÄ±nda veriyi hazÄ±rla
            const csvContent = convertToCSV(data);
            
            // DosyayÄ± indir
            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `${filename}_${new Date().toISOString().slice(0, 10)}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showAlert('kaliteAlert', `${filename} baÅŸarÄ±yla Excel formatÄ±nda indirildi!`, 'success');
        }

        // CSV'ye Ã§evir
        function convertToCSV(data) {
            if (data.length === 0) return '';
            
            const headers = Object.keys(data[0]);
            const csvRows = [headers.join(',')];
            
            data.forEach(row => {
                const values = headers.map(header => {
                    let value = row[header] || '';
                    // VirgÃ¼l ve tÄ±rnak iÅŸaretlerini escape et
                    if (typeof value === 'string' && (value.includes(',') || value.includes('"') || value.includes('\n'))) {
                        value = '"' + value.replace(/"/g, '""') + '"';
                    }
                    return value;
                });
                csvRows.push(values.join(','));
            });
            
            return csvRows.join('\n');
        }

        // TÃ¼m verileri yedekle
        function exportAllData() {
            const allData = {
                kaliteKayitlari: kaliteKayitlari,
                siparisHazirlikKayitlari: siparisHazirlikKayitlari,
                performansKayitlari: performansKayitlari,
                stokBilgileri: stokBilgileri,
                yedeklemeTarihi: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(allData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `akg_sistem_yedek_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            alert('TÃ¼m veriler baÅŸarÄ±yla yedeklendi!');
        }

        // Veri geri yÃ¼kleme
        function importData() {
            const file = document.getElementById('importFile').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (confirm('Bu iÅŸlem mevcut tÃ¼m verileri silecek ve yedek dosyasÄ±ndaki verilerle deÄŸiÅŸtirecektir. Devam etmek istiyor musunuz?')) {
                        if (data.kaliteKayitlari) {
                            kaliteKayitlari = data.kaliteKayitlari;
                            localStorage.setItem('kaliteKayitlari', JSON.stringify(kaliteKayitlari));
                        }
                        if (data.siparisHazirlikKayitlari) {
                            siparisHazirlikKayitlari = data.siparisHazirlikKayitlari;
                            localStorage.setItem('siparisHazirlikKayitlari', JSON.stringify(siparisHazirlikKayitlari));
                        }
                        if (data.performansKayitlari) {
                            performansKayitlari = data.performansKayitlari;
                            localStorage.setItem('performansKayitlari', JSON.stringify(performansKayitlari));
                        }
                        if (data.stokBilgileri) {
                            stokBilgileri = data.stokBilgileri;
                            localStorage.setItem('stokBilgileri', JSON.stringify(stokBilgileri));
                        }
                        
                        // TÃ¼m verileri yeniden yÃ¼kle
                        loadStats();
                        loadStok();
                        loadKaliteKayitlari();
                        loadSiparislerListesi();
                        loadIstatistikler();
                        loadVeriTablosu();
                        
                        alert('Veriler baÅŸarÄ±yla geri yÃ¼klendi!');
                    }
                } catch (error) {
                    alert('Yedek dosyasÄ± okunamadÄ±! LÃ¼tfen geÃ§erli bir JSON dosyasÄ± seÃ§in.');
                }
            };
            reader.readAsText(file);
        }

        // TÃ¼m verileri temizle
        function clearAllData() {
            if (confirm('Bu iÅŸlem TÃœM VERÄ°LERÄ° siler ve geri alÄ±namaz! Devam etmek istediÄŸinizden emin misiniz?')) {
                if (confirm('Son kez soruyorum: TÃœM VERÄ°LER SÄ°LÄ°NECEK! Emin misiniz?')) {
                    localStorage.clear();
                    kaliteKayitlari = [];
                    siparisHazirlikKayitlari = [];
                    performansKayitlari = [];
                    stokBilgileri = {};
                    
                    // TÃ¼m formlari temizle
                    document.querySelectorAll('form').forEach(form => form.reset());
                    
                    // Tarih alanlarÄ±nÄ± bugÃ¼ne ayarla
                    const now = new Date();
                    document.getElementById('tarih').value = now.toISOString().slice(0, 16);
                    document.getElementById('hazirlikTarih').value = now.toISOString().slice(0, 10);
                    document.getElementById('performansTarih').value = now.toISOString().slice(0, 10);
                    
                    // TÃ¼m verileri yeniden yÃ¼kle
                    loadStats();
                    loadStok();
                    loadKaliteKayitlari();
                    loadSiparislerListesi();
                    loadIstatistikler();
                    loadVeriTablosu();
                    
                    alert('TÃ¼m veriler baÅŸarÄ±yla temizlendi!');
                }
            }
        }
    </script>
</body>
</html>
